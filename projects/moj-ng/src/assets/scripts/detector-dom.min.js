/*
 * Version:  5.6.200SP1B31  
 * Copyright (c) 19-02-2019 GlassBox http://www.glassboxdigital.com
 */
function runDetector() {
    !function (n, M, k, t, D) { if (!function (n, e) { if (void 0 !== n[e]) return void 0 !== n.console && "function" == typeof n.console.log && console.log("WARNING[EyeView-1301]: detector script has been loaded more than once. Please fix to have a single detector loading. (Extra script loading will be ignored)"), !0; if (void 0 === n.NodeFilter) return !0; return !1 }(M, n)) { var O = { beaconVersion: "2" }; O.mouseEvents = M.PointerEvent ? { down: "pointerdown", up: "pointerup" } : { down: "mousedown", up: "mouseup" }, O.eventTypes = [O.mouseEvents.down, O.mouseEvents.up, "touchstart", "touchend", "scroll", "change", "blur", "focusout", "keydown", "submit", "reset", "load", "unload", "ajaxComplete", "hashchange", "navigation", "popstate", "focus", "focusin", "mouseenter", "mousemove", "error", "beforeunload", "resize", "pagehide"], O.snapshotApplicableEventType = ["pageUpdate", "change", "mousedown", "scroll", "touchstart", "blur", "submit", "drag", "formValidationError", "navigation", "unload", "beforeunload", "segmentChanged"], O.reportBase64URLs = !1, O.nobelEventTypes = ["pageSnapshot"], O.socialNobelEventTypes = ["resourceContent"], O.encodeSelectors = !0, O.encodeEventTypes = !0, O.useClassesInSelectors = !1, O.repeatingElementSelector = "!", O.encoding = { numberBase: 36, rootSelector: "-", delimiters: { versionPayload: ";", pages: "~~~", events: "~~", eventParts: "~", pageIdEvents: "_" }, domSnapshotPrefix: "D", domSnapshotRefPrefix: "r", domSnapshotCompressedPrefix: "d", domSnapshotPlainPrefix: "P", valueEncodedPrefix: "E", valueNotEncodedPrefix: "N" }, O.cookies = { session: "_cls_s", visitor: "_cls_v", sub_session: "_cls_subs", supportMode: "_cls_sm" }, O.ValueMaskingMode = { BlackList: "blacklist", WhiteList: "whitelist" }, O.ValueEncryptionMode = { BlackList: "blacklist", WhiteList: "whitelist" }, O.Storage = { BoundKeyPrefix: "gb.", UnboundKeyPrefix: "gb_unbound." }, O.detectorScript = function (n, e) { if (n) return n.hasAttribute(e) ? n : k.querySelector("[" + e + "]") || n; var t = k.querySelector("[" + e + "]"); return !t && M._cls_config && M._cls_config.detectorTagId && (t = k.getElementById(M._cls_config.detectorTagId)), t || (t = k.getElementById("_cls_detector")), t }(k.currentScript, "data-clsconfig"); var E = {}; void 0 !== E && Pn(E), O.setup = "dom", void 0 !== E && Fn(E); var r = ","; void 0 !== O && O.detectorScript && (r = O.detectorScript.getAttribute("data-clsarraydelim") || r); var i = function (n, e) { if ("TRUE" === n.toUpperCase()) return !0; if ("FALSE" === n.toUpperCase()) return !1; throw "cannot parse boolean from '" + n + "'" }, o = function (n) { var e = -1 == n.indexOf(".") ? parseInt(n) : parseFloat(n); if (isNaN(e)) throw "cannot parse number from '" + n + "'"; return e }, v = function (n) { return n }, a = function (n) { return null == n ? [] : n.split(r) }, u = function (n) { return (Array.isArray ? Array.isArray(n) : n instanceof Array) ? null : "array is expected" }, c = function (n, e) { for (var t = 0; t < e.length; t++)if (typeof e[t] !== n) return "array element type mismatch. expected:" + n + " actual:" + typeof e[t]; return null }, s = function () { var r = arguments; return function (n) { for (var e = 0; e < r.length; e++) { var t = r[e](n); if (null != t) return t } return null } }; jn.prototype.ignore = function (n) { this[n.toLowerCase()] = { name: n, ignore: !0 } }; var f = { options: { caseSensitive: !0, errorOnUnknown: !(jn.newBuilder = function () { var t = new jn; return { bool: function (n, e) { return t.add("boolean", !1, i, null, n, e), this }, num: function (n, e) { return t.add("number", !1, o, null, n, e), this }, str: function (n, e) { return t.add("string", !0, v, null, n, e), this }, strarray: function (n, e) { return t.add("object", !0, a, s(u, function (n) { return c("string", n) }), n, e), this }, ignore: function (n) { return t.ignore(n), this }, build: function () { return t } } }) }, validate: function (n, e) { var t = new Bn; if (this.parsingError) return t.addError(f.parsingError), t; e = e || {}; var r = n.requiredFieldsMask(); for (var i in e) if (e.hasOwnProperty(i)) { var o = n[i.toLowerCase()]; if (!o) { (f.options.errorOnUnknown ? t.addError : t.addWarning).call(t, "unknown configuration field", i); continue } if (o.ignore) continue; if (o.name !== i && f.options.caseSensitive) { t.addError("unknown configuration field (did you mean '" + o.name + "'?).", i), delete r[o.name]; continue } var a = e[i]; if (null == a) { o.nullable || t.addError("value cannot be null, value of " + o.type + " type is expected.", i); continue } if (typeof a !== o.type) { t.addError("value type mismatch. expected:" + o.type + " actual:" + typeof a, i); continue } if (o.required && delete r[o.name], o.validator) { var u = o.validator(a); u && t.addError("value violation, " + u, i) } } for (var c in r) t.addError("missing required field", c); return t }, onParsingError: function (n) { f.parsingError = n } }; Bn.prototype.addError = function (n, e) { this.errors.push({ field: e, reason: n }) }, Bn.prototype.addWarning = function (n, e) { this.warnings.push({ field: e, reason: n }) }, Bn.prototype.toString = function () { var n = function (n) { for (var e = "", t = 0; t < n.length; t++)return e + "\n" + (n[t].field ? "'" + n[t].field + "': " : "") + n[t].reason; return e }, e = "\n" + this.errors.length + " error(s):"; return e += n(this.errors), e += "\n" + this.warnings.length + " warning(s):", e += n(this.warnings) }; var l = function (n, e, t, r, i) { var o = function (n) { return "function" != typeof String.prototype.trim ? n.replace(/^\s+|\s+$/g, "") : n.trim() }; n = n || {}; for (var a = null != t ? t.split(e) : [], u = 0; u < a.length; u++) { var c = a[u].split("="); if (2 == c.length) { var s, f = o(c[0]), l = o(c[1]), d = n[f.toLowerCase()]; d ? void 0 === (s = d.parser) && (s = v) : s = v; try { r[f] = s(l) } catch (n) { i && i("'" + f + "': " + n) } } } }, d = jn.newBuilder().ignore("injectionTime").ignore("visualName").ignore("detectionScriptURI").str("reportURI", !0).str("configPath", !1).bool("recordMouseMoves", !1).bool("recordScrolls", !1).bool("recordErrors", !1).bool("reportValidationErrors", !1).strarray("domFormValidationClassErrors", !1).num("idleEventTimeInterval", !1).bool("botDetection", !1).bool("recordHovers", !1).bool("reportByPost", !1).num("maxPostReportSize", !1).num("reportPostInterval", !1).bool("postRetry", !1).bool("DOMBeaconImg", !1).num("reportInterval", !1).bool("reportAllOnUnload", !1).num("maxReportSize", !1).strarray("maskList", !1).strarray("maskClassList", !1).strarray("encryptionList", !1).strarray("encryptionClassList", !1).str("externalIdAttr", !1).bool("useIdSelectors", !1).bool("useNameInFormSelectors", !1).bool("preferNamesInFormSelectors", !1).strarray("noIdSelectorsForClassNames", !1).strarray("noIdSelectorsForIDs", !1).strarray("noIdSelectorsForAttrs", !1).bool("SCIntegration", !1).strarray("SCIntegrationURLsContainList", !1).strarray("SCIntegrationKeyList", !1).bool("reportAllResourcesLoad", !1).bool("reportExternalResources", !1).strarray("ignoreReportResourcesByTagNames", !1).strarray("reportScriptURLContainList", !1).strarray("reportScriptKeyList", !1).strarray("reportImageURLContainList", !1).strarray("reportImageKeyList", !1).bool("debugMode", !1).bool("traceMode", !1).bool("suppressMouseMovesDebug", !1).bool("visualNameDebug", !1).bool("timingMode", !1).num("maxReportsWithUnload", !1).num("minDragPixels", !1).bool("reportVisualNames", !1).num("titleCharsLimit", !1).num("maxTimeForIdleEvent", !1).num("validationValueForRenderTime", !1).bool("reportDebugInfo", !1).bool("supportNativeAutoComplete", !1).bool("recordEnterForInputs", !1).bool("recordTypingAll", !1).strarray("recordTypingForAttrs", !1).strarray("recordTypingForClasses", !1).strarray("recordTypingForIDs", !1).num("mmMaxMovesWithUnload", !1).num("mmMaxMovesInEventNoTimes", !1).num("mmMaxMovesInEventWithTimes", !1).num("mmMinStallingMoveTime", !1).num("mmMaxInMemoryMoves", !1).bool("mmDebug", !1).num("mhDeepLevel", !1).num("mhMaxListSize", !1).num("mhMaxInMemeoryHovers", !1).bool("mhDebug", !1).bool("dependentScroll", !1).num("minStallingScrollTime", !1).bool("scrollDebug", !1).bool("clsDebug", !1).num("clsDebugCharsLimit", !1).num("clsDebugMaxReports", !1).bool("domRecordEnabled", !1).strarray("domNewPageTriggers", !1).strarray("pageSnapshotTriggers", !1).num("domStartAfter", !1).num("domUpdateEveryWsMsgIn", !1).num("domRecordEnabledByChance", !1).str("domReportURI", !1).bool("domCompress", !1).strarray("domNewPageAjaxTriggers", !1).strarray("domIgnoredFormElements", !1).bool("semiDomEnabled", !1).bool("domRecordCssRules", !1).strarray("ignorableElementIds", !1).bool("recordAjaxCallsAnyway", !1).bool("truncateEventsWithUnload", !1).bool("mmRecordTimes", !1).num("mmDiluteMinPixels", !1).bool("reportHybrid", !1).str("customTLD", !1).num("enabledByChance", !1).strarray("domCloningBannedIds", !1).strarray("domCloningBannedClasses", !1).str("reportEncoding", !1).bool("reportCompress", !1).str("maskingMode", !1).str("encryptionMode", !1).strarray("reportAddUriParams", !1).bool("recordConsoleErrors", !1).strarray("domMaskContentById", !1).strarray("domMaskContentByClass", !1).strarray("domMaskOmitById", !1).strarray("domMaskOmitByClass", !1).strarray("domMaskedAttributes", !1).strarray("domMaskAttributesByTag", !1).strarray("domMaskSimpleSelector", !1).str("encryptionPublicKey", !1).str("encryptionKeyId", !1).num("encryptionTimeout", !1).bool("reportPreferSendBeaconAPI", !1).bool("domKeepComments", !1).str("domKeepScriptMatching", !1).num("domExpireSnapshotAfter", !1).bool("reportCorsForceSafelistedHeaders", !1).bool("reportDisableCors", !1).strarray("reportCorsTakeNativeCookies", !1).strarray("maskCookies", !1).bool("reportToStorageAfterUnload", !1).bool("domOmitAfterUnload", !1).bool("duplicateIdCheck", !1).strarray("domPartialWhenLocationContains", !1).strarray("blackoutWhenLocationContains", !1).bool("iframesAutoInject", !1).bool("iframesRecordEnabled", !1).str("iframesParentOrigin", !1).num("iframesHandshakeTimeout", !1).bool("iframesDebugEnabled", !1).bool("iframesSkipHidden", !1).bool("reportIncludeReferrer", !1).str("mobileHybridId", !1).bool("domAssignGlassboxId", !1).bool("interceptAjax", !1).bool("ajaxDebug", !1).bool("ajaxHashRecurrentUrls", !1).str("ajaxRecordMetadata", !1).str("ajaxRecordResponseBody", !1).str("ajaxRecordResponseHeaders", !1).str("ajaxRecordRequestBody", !1).str("ajaxRecordRequestHeaders", !1).bool("recordAjaxRequest", !1).bool("ajaxCaptureResponseHeaders", !1).num("ajaxCaptureResponseOnStatusGreater", !1).str("ajaxCaptureResponseContentWhenUrlMatches", !1).bool("ajaxCaptureFQDNOnly", !1).bool("reportCreateSubSessionCookie", !1).bool("resourcesRecordEnabled", !1).bool("resourceRecordCssOnly", !1).bool("resourcesRecordAllowCors", !1).num("resourcesRecordCount", !1).num("resourcesRecordChance", !1).strarray("resourceIgnoreWhenUrlContains", !1).bool("resourceTimingRecordEnabled", !1).num("resourceTimingRecordEnabledByChance", !1).bool("clientAttributesEnabled", !1).num("clientAttributeMaxLength", !1).bool("domIE11ForceMutationObserver", !1).str("detectorTagId", !1).bool("cookieAssignFQDN", !1).str("sessionIdByQueryParam", !1).str("visitorIdByQueryParam", !1).str("domIdentifyingAttribute", !1).bool("sendStateInfo", !1).strarray("valueAutoMasking", !1).num("debounceScrolls", !1).bool("domHashTokens", !1).build(); if (O.detectorScript) { var h = O.detectorScript.getAttribute("data-clsdelim") || ";", p = O.detectorScript.getAttribute("data-clsconfig"); p && l(d, h, p, E, f.onParsingError) } var m, g = M._cls_config || M._config || {}; for (m in g) g.hasOwnProperty(m) && (E[m] = g[m]); var y, w, b, C = (w = /\d{12,19}/g, y = [0, 2, 4, 6, 8, 1, 3, 5, 7, 9], b = function (n) { for (var e, t = n.length, r = 1, i = 0; t;)e = parseInt(n.charAt(--t), 10), i += (r ^= 1) ? y[e] : e; return i && i % 10 == 0 }, { creditCard: function (n) { return !!((n = (n || "").trim()) && n.match(w) && b(n)) }, byTypes: function (n) { var e, t, r = []; for (n = n || [], e = 0; e < n.length; e++)this[n[e]] && "byTypes" !== n[e] ? r.push(this[n[e]]) : console.error("[EyeView-1408]: Detector configuration error: auto censoring of type '" + n[e] + "' is not supported."); return 1 === r.length ? r[0] : (t = r, function (n) { var e; for (e = 0; e < t[e]; e++)if (t[e](n)) return !0; return !1 }) } }), x = { censorValueOf: function (n) { return new Array(("" + (n || "")).length + 1).join("*") }, isAvailable: function () { return !0 }, hasFallback: function () { return !1 } }; !function (n) { if (n.CSS && n.CSS.escape) return n.CSS.escape; var e = function (n) { if (0 == arguments.length) throw new TypeError("`CSS.escape` requires an argument."); for (var e, t = String(n), r = t.length, i = -1, o = "", a = t.charCodeAt(0); ++i < r;)0 != (e = t.charCodeAt(i)) ? o += 1 <= e && e <= 31 || 127 == e || 0 == i && 48 <= e && e <= 57 || 1 == i && 48 <= e && e <= 57 && 45 == a ? "\\" + e.toString(16) + " " : 0 == i && 1 == r && 45 == e || !(128 <= e || 45 == e || 95 == e || 48 <= e && e <= 57 || 65 <= e && e <= 90 || 97 <= e && e <= 122) ? "\\" + t.charAt(i) : t.charAt(i) : o += "�"; return o }; n.CSS || (n.CSS = {}), n.CSS.escape = e }(M); var _ = function () { var e = Object.prototype.toString; var r = n("indexOf"); function n(n) { return function () { return Array.prototype[n].apply(arguments[0], Array.prototype.slice.call(arguments, 1)) } } return { isFunction: function (n) { return "function" == typeof n }, isNumber: function (n) { return "number" == typeof n || "[object Number]" === e.call(n) }, isString: function (n) { return "string" == typeof n || "[object String]" === e.call(n) }, isUndefined: function (n) { return void 0 === n }, last: function (n) { return n && n[n.length - 1] }, forOwn: function (n, e) { for (var t in n) n.hasOwnProperty(t) && e(n[t], t) }, indexOf: r, pluck: function (n, e) { return n ? n.map(function (n) { return n[e] }) : [] }, reduce: n("reduce"), contains: "function" == typeof Array.prototype.includes ? n("includes") : function (n, e, t) { return -1 < r(n, e, t) }, forEach: n("forEach") } }(), S = new function (n) { var o = {}, a = []; (n = n || this).on = function (n, e, t) { (o[n] = o[n] || []).push([e, t]) }, n.off = function (n, e) { n || (o = {}); for (var t = o[n] || a, r = t.length = e ? t.length : 0; r--;)e == t[r][0] && t.splice(r, 1) }, n.emit = function (n) { for (var e, t = o[n] || a, r = 0 < t.length ? t.slice(0, t.length) : t, i = 0; e = r[i++];)e[0].apply(e[1], a.slice.call(arguments, 1)) } }, N = function (i, o, a, t) { t = t || {}; var e, u = { select: "input", change: "input", submit: "form", reset: "form", error: "img", load: "img", unload: "img", abort: "img", readystatechange: "XMLHttpRequest" }, r = a.createElement("a"), c = o.console && o.console.time && o.console.timeEnd && o.console.timeStamp, s = i.isFunction(String.prototype.startsWith); return { currentTimestamp: i.isFunction(Date.now) && i.isNumber(Date.now()) ? Date.now : function () { return (new Date).getTime() }, isElement: function (n) { return "hasAttribute" in n }, isDOMElement: function (n) { return "object" == typeof HTMLElement ? n instanceof HTMLElement : n && "object" == typeof n && null !== n && 1 === n.nodeType && "string" == typeof n.nodeName }, isEditableInput: function (n) { if (!n) return !1; if ("INPUT" === n.tagName) { var e = (n.getAttribute("type") || "").toLowerCase(); return "button" !== e && "submit" !== e && "reset" !== e } return !0 }, isOldIE: function () { return !a.addEventListener }, hasTouch: function () { return "ontouchstart" in o }, isChromeDesktop: function () { var n = navigator.userAgent, e = /Android|webOS|iPhone|iPad|iPod|Windows Phone|IEMobile|Opera Mini|Mobile|mobile|Tablet|CriOS/i.test(n), t = /Chrome/i.test(n); return !e && t }, getAttributeForElement: function (n, e) { return n && this.isElement(n) ? (n.hasAttribute(e.toLocaleLowerCase()) ? t = n.getAttribute(e.toLocaleLowerCase()) : n.hasAttribute(e.toLocaleUpperCase()) && (t = n.getAttribute(e.toLocaleUpperCase())), t && (t = this.trim(t)), t || null) : null; var t }, getElementId: function (n) { return n && n.id ? i.isString(n.id) || "function" != typeof n.getAttribute ? n.id : n.getAttribute("id") : null }, isDuplicateElementId: function (n) { if (!t.duplicateIdCheck) return !1; try { return "querySelectorAll" in a && 1 < a.querySelectorAll("[id='" + n + "']").length } catch (n) { return !1 } }, getMouseEnterTarget: function () { return "onmouseenter" in a ? a : "onmouseenter" in o ? o : a.body }, hasTimingAPI: function () { return !i.isUndefined(o.performance) && !i.isUndefined(o.performance.timing) }, startsWith: function (n, e) { return !(!i.isString(n) || !i.isString(e)) && (s ? n.startsWith(e) : n.slice(0, e.length) === e) }, truncateStr: function (n, e, t) { var r = n; return n && n.length > e && (r = n.substr(0, e), t && (r = r.concat("..."))), r }, getCoordinate: function (n) { var e = n.changedTouches || n.touches, t = e && 0 < e.length ? e[0] : n, r = this.extractElementFromEvent(n); return this.isHybrid() || "HTML" === r.nodeName.toUpperCase() ? new ae(t.clientX, t.clientY) : i.isUndefined(t.pageX) || i.isUndefined(t.pageY) ? new ae(n.clientX + a.body.scrollLeft + a.documentElement.scrollLeft, n.clientY + a.body.scrollTop + a.documentElement.scrollTop) : new ae(t.pageX, t.pageY) }, getScrollTopLeft: function () { try { var n = null !== o.top && o.top !== o.self ? o.top : o; return { top: void 0 !== n.pageYOffset ? n.pageYOffset : (n.document.documentElement || n.document.body.parentNode || n.document.body).scrollTop, left: void 0 !== n.pageXOffset ? n.pageXOffset : (n.document.documentElement || n.document.body.parentNode || n.document.body).scrollLeft } } catch (n) { return this.log("Failed getting scroll values: " + n.message, n), { top: 0, left: 0 } } }, getElementXYCoordinates: function (n) { if (!n) return null; if (!("getBoundingClientRect" in n)) return null; var e = n.getBoundingClientRect(), t = this.getScrollTopLeft(); return new ae(Math.round(e.left + t.left), Math.round(e.top + t.top)) }, isSameCoordinates: function (n, e) { return n.x === e.x && n.y === e.y }, isCoordinatesDistLargerThan: function (n, e, t) { return Math.abs(n.x - e.x) > t || Math.abs(n.y - e.y) > t }, getCurrentScrollReach: function () { try { var n = null !== o.top && o.top !== o.self ? o.top : o; return (void 0 !== n.pageYOffset ? n.pageYOffset : (n.document.documentElement || n.document.body.parentNode || n.document.body).scrollTop) + (n.innerHeight || n.document.documentElement.clientHeight || n.document.body.clientHeight) } catch (n) { return this.log("Failed getting scroll reach: " + n.message, n), 0 } }, getWindowSize: function () { return i.isNumber(o.innerWidth) && i.isNumber(o.innerHeight) ? this.validateSize(o.innerWidth, o.innerHeight) : !i.isUndefined(a.body) && i.isNumber(a.body.offsetWidth) && i.isNumber(a.body.offsetHeight) ? this.validateSize(a.body.offsetWidth, a.body.offsetHeight) : null }, getScreenSize: function () { return this.validateSize(screen.width, screen.height) }, validateSize: function (n, e) { return i.isNumber(n) && i.isNumber(e) ? { width: n, height: e } : null }, indexOfNode: function (n, e, t) { for (var r = t || 0; r < n.length; r++)if (n[r] === e) return r; return -1 }, getLocationUrlSplitByHash: function () { var n = o.location.href, e = n.indexOf("#"); return -1 === e ? { url: n, withoutHash: n, hash: null } : { url: n, withoutHash: n.slice(0, e), hash: n.slice(e + 1, n.length) } }, getHashFromUrl: function (n) { var e = n.indexOf("#"); return -1 === e ? "" : n.slice(e + 1, n.length) }, stripHash: function (n) { var e = n.indexOf("#"); return -1 === e ? n : n.slice(0, e) }, getReferrerUrlWithoutHash: function () { var n = o.document.referrer; if (!n || 0 === n.length) return null; var e = n.indexOf("#"); return -1 !== e ? n.slice(0, e) : n }, encodeAsBase: function (n, e) { return n.toString(e) }, uuid: function () { return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (n) { var e = 16 * Math.random() | 0; return ("x" === n ? e : 3 & e | 8).toString(16) }) }, addEventHandler: function (n, e, t, r) { n.addEventListener ? n.addEventListener(e, t, r) : n.attachEvent && n.attachEvent("on" + e, t) }, removeEventHandler: function (n, e, t) { i.isUndefined(n.removeEventListener) ? i.isUndefined(n.detachEvent) || n.detachEvent("on" + e, t) : n.removeEventListener(e, t, !0) }, extractElementFromEvent: function (n) { void 0 === n && (n = o.event); var e = n.target || n.srcElement; return null == e ? null : 3 === e.nodeType ? e.parentNode : e }, isEventSupported: function (n) { var e = "on" + n; if (e in o || e in o.document) return !0; var t = a.createElement(u[e] || "div"), r = e in t; return r || (t.setAttribute(e, "return;"), r = i.isFunction(t[e])), t = null, r || this.log(n + " is not supported."), r }, isConsoleSupported: function () { return !i.isUndefined(o.console) && i.isFunction(o.console.log) }, getReason: function (n) { return i.isString(n) ? "(" + n + ")" : "(not specified)" }, hashcode: function (n) { var e = 0; if (0 === n.length) return e; for (var t = 0; t < n.length; t++)e = (e << 5) - e + n.charCodeAt(t), e &= e; return e }, trim: function (n) { return "function" != typeof String.prototype.trim ? n.replace(/^\s+|\s+$/g, "") : n.trim() }, log: function () { if (!i.isUndefined(t.debugMode) && t.debugMode) { var n = Array.prototype.slice.call(arguments, 0); if (n.unshift(this.currentTimestamp()), !0 === W.page.frame && n.push(" (in frame " + W.page.id + ")"), this.isConsoleSupported()) console.log.apply(console, n); else if (!i.isUndefined(o.console.log)) { var e = n.join(" "); console.log(e) } } }, trace: function () { t.traceMode && this.log.apply(this, arguments) }, time: function (n) { t.timingMode && c && o.console.time(n) }, timeEnd: function (n) { t.timingMode && c && o.console.timeEnd(n) }, timeStamp: function (n) { t.timingMode && c && o.console.timeStamp(n) }, hasOneOfClassNames: function (n, e) { for (var t = " " + this.getClass(n) + " ", r = 0; r < e.length; r++)if (-1 < t.indexOf(" " + e[r] + " ")) return !0; return !1 }, getClass: function (n) { return n.getAttribute && n.getAttribute("class") || "" }, getClassList: function (n) { var e = this.getClass(n); return e ? e.split(" ") : [] }, hasClassName: function (n, e) { return -1 < (" " + this.getClass(n) + " ").indexOf(" " + e + " ") }, getHybridType: function () { return "undefined" == typeof eyeViewHybridBridge ? null : eyeViewHybridBridge.getHybridType() }, isHybrid: function () { return "undefined" != typeof eyeViewHybridBridge }, isHybridAndroid: function () { return this.isHybrid() && this.getHybridType() === eyeViewHybridBridge.HYBRID_ANDROID }, isHybridIOS: function () { return this.isHybrid() && this.getHybridType() === eyeViewHybridBridge.HYBRID_IOS }, immutableSet: function () { for (var n = {}, e = 0; e < arguments.length; e++)n[arguments[e]] = !0; return n }, DOMElement2Str: function (n) { return n instanceof CharacterData ? n.textContent : n.outerHTML }, dateFromNow: function (n) { return new Date(this.currentTimestamp() + n) }, isAttachedToDOM: function (n) { for (; n;) { if (n === a) return !0; n = n.parentNode } return !1 }, ensureProperty: function (n) { for (var e = Array.prototype.slice.call(arguments, 1), t = n, r = 0; r < e.length; r++)t.hasOwnProperty(e[r]) || (t[e[r]] = {}), t = t[e[r]]; return t }, shallowExtend: function (n, e) { if (!n) return n; var t; for (t in e) e.hasOwnProperty(t) && (n[t] = e[t]); return n }, isEmpty: function (n) { for (var e in n) if (n.hasOwnProperty(e)) return !1; return !0 }, extractHostname: function (n) { if (!n) return ""; var e = n.indexOf("//"); if (-1 !== e) { var t = n.indexOf("/", e + 2); return n.substring(e + 2, -1 !== t ? t : D) } return "" }, joinPath: function (n, e) { var t = "/" === n.charAt(n.length - 1), r = "/" === e.charAt(0); return t && r ? n + e.substring(1) : t || r ? n + e : n + "/" + e }, extractOrigin: function (n) { if (!n) return ""; if (r.href = n, !r.origin) { var e = n.indexOf("://"), t = -1 !== e && -1 !== n.indexOf(":", e + 3); return r.hostname ? r.protocol + "//" + r.hostname + (t && r.port ? ":" + r.port : "") : "" } return r.origin }, toAbsoluteUrl: function (n) { return r.href = n, r.href }, arrayToJsonSafe: function (n) { return e || (e = "function" == typeof Array.prototype.toJSON ? function (n) { var e = Array.prototype.toJSON; delete Array.prototype.toJSON; var t = JSON.stringify(n); return Array.prototype.toJSON = e, t } : JSON.stringify), e(n) }, parseQuery: function (n) { var e = {}; if (n) { var t, r, i = n.split("&"); for (t = 0; t < i.length; t++)if ((r = i[t].split("="))[0]) try { e[r[0]] = r[1] ? decodeURIComponent(r[1]) : "" } catch (n) { } } return e }, optionsWithDefaults: function (n, e) { var t; for (t in n = n || {}, e = e || {}) e.hasOwnProperty(t) && (n[t] = n[t] || e[t]); return n }, strToBytes: function (n) { for (var e = new ArrayBuffer(n.length), t = new Uint8Array(e), r = 0; r < n.length; r++)t[r] = n.charCodeAt(r); return e }, strToUTF8Bytes: function (n) { for (var e = [], t = 0, r = 0; r < n.length; r++) { var i = n.charCodeAt(r); i < 128 ? e[t++] = i : (i < 2048 ? e[t++] = i >> 6 | 192 : (55296 == (64512 & i) && r + 1 < n.length && 56320 == (64512 & n.charCodeAt(r + 1)) ? (i = 65536 + ((1023 & i) << 10) + (1023 & n.charCodeAt(++r)), e[t++] = i >> 18 | 240, e[t++] = i >> 12 & 63 | 128) : e[t++] = i >> 12 | 224, e[t++] = i >> 6 & 63 | 128), e[t++] = 63 & i | 128) } return e } } }(_, M, k, void 0 !== E ? E : {}); !function (e, n) { "use strict"; var i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", o = function (n) { for (var e = {}, t = 0, r = n.length; t < r; t++)e[n.charAt(t)] = t; return e }(i), a = String.fromCharCode, t = function (n) { var e = n.charCodeAt(0); return e < 128 ? n : e < 2048 ? a(192 | e >>> 6) + a(128 | 63 & e) : a(224 | e >>> 12 & 15) + a(128 | e >>> 6 & 63) + a(128 | 63 & e) }, r = function (n) { return n.replace(/[^\x00-\x7F]/g, t) }, u = function (n) { var e = [0, 2, 1][n.length % 3], t = n.charCodeAt(0) << 16 | (1 < n.length ? n.charCodeAt(1) : 0) << 8 | (2 < n.length ? n.charCodeAt(2) : 0); return [i.charAt(t >>> 18), i.charAt(t >>> 12 & 63), 2 <= e ? "=" : i.charAt(t >>> 6 & 63), 1 <= e ? "=" : i.charAt(63 & t)].join("") }, c = "function" == typeof e.btoa ? function (n) { return e.btoa(n) } : function (n) { return n.replace(/[\s\S]{1,3}/g, u) }, s = "function" == typeof e.atob ? function (n) { return e.atob(n) } : function (n) { return n.replace(/[\s\S]{1,4}/g, p) }, f = function (n) { return c(r(n)) }, l = function (n, e) { return e ? f(n).replace(/[+\/]/g, function (n) { return "+" == n ? "-" : "_" }) : f(n) }, d = /[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}/g, v = function (n) { return a(n.length < 3 ? (31 & n.charCodeAt(0)) << 6 | 63 & n.charCodeAt(1) : (15 & n.charCodeAt(0)) << 12 | (63 & n.charCodeAt(1)) << 6 | 63 & n.charCodeAt(2)) }, h = function (n) { return n.replace(d, v) }, p = function (n) { var e = n.length, t = e % 4, r = (0 < e ? o[n.charAt(0)] << 18 : 0) | (1 < e ? o[n.charAt(1)] << 12 : 0) | (2 < e ? o[n.charAt(2)] << 6 : 0) | (3 < e ? o[n.charAt(3)] : 0), i = [a(r >>> 16), a(r >>> 8 & 255), a(255 & r)]; return i.length -= [0, 0, 2, 1][t], i.join("") }, m = function (n) { return e = n.replace(/[-_]/g, function (n) { return "-" == n ? "+" : "/" }).replace(/[^A-Za-z0-9\+\/]/g, ""), h(s(e)); var e }; n.Base64 = { atob: s, btoa: c, fromBase64: m, toBase64: l, bytesToBase64: function (n) { for (var e, t = "", r = 0; r < n.length; r += 3)e = (252 & n[r]) >> 2, t += i.charAt(e), e = (3 & n[r]) << 4, r + 1 < n.length ? (e |= (240 & n[r + 1]) >> 4, t += i.charAt(e), e = (15 & n[r + 1]) << 2, r + 2 < n.length ? (e |= (192 & n[r + 2]) >> 6, t += i.charAt(e), e = 63 & n[r + 2], t += i.charAt(e)) : (t += i.charAt(e), t += "=")) : (t += i.charAt(e), t += "=="); return t }, utob: r, encode: l, encodeURI: function (n) { return l(n, !0) }, btou: h, decode: m } }(M, void 0 !== N ? N : {}), Xn.attributeValueInRegexpArray = function (n, e) { for (var t = 0; t < e.length; t++)if (e[t].test(n)) return !0; return !1 }, Xn.prototype.isCensored = function (n, e) { var t = n, r = e ? n.parentElement : n; if (!N.isEditableInput(r)) return !1; var i = this._options.valueCensorshipMode === this._envCensorMode.WhiteList; return "INPUT" === r.tagName && "password" === r.type ? i = !0 : r.hasAttribute(this._censorAttribute) ? i = !0 : N.hasClassName(r, this._censorAttribute) ? i = !0 : this._valueCensorIdsWithoutwildcards.length && _.contains(this._valueCensorIdsWithoutwildcards, N.getElementId(r)) ? i = !i : this._valueCensorClassesWithoutwildcards.length && N.hasOneOfClassNames(r, this._valueCensorClassesWithoutwildcards) ? i = !i : this._regexpValueCensorIds.length && Xn.attributeValueInRegexpArray(N.getElementId(r), this._regexpValueCensorIds) ? i = !i : this._regexpValueCensorClasses.length && Xn.attributeValueInRegexpArray(N.getClass(r), this._regexpValueCensorClasses) && (i = !i), !i && this._options.autoCensorPredicate(t.value) && (this._autoCensorCallback(t), i = !0), i }, Xn.prototype.censor = function (n, e) { return this.isCensored(n, e) ? this._censorValueOf(n.value) : n.value }, Xn.prototype.isAvailable = function () { return this._isAvailable() }, Xn.prototype.hasFallback = function () { return this._hasFallback() }; var A, R, T, I, L = new function (a, u, c) { var n = c ? "" : (t = a.location.host, r = t.split(":")[0] || "", i = r.split("."), i.length <= 2 ? r : (i.shift(), "." + i.join("."))), e = function () { if (-1 === (u || "").indexOf("://")) return !1; var n = a.createElement("a"); if (n.href = u, c) return n.hostname !== a.location.hostname; for (var e = a.location.hostname.split("."), t = n.hostname.split("."), r = e.length <= 2, i = !1; e.length && t.length && !i;)i = e.pop() !== t.pop(); var o = (i ? 1 : 0) + Math.max(e.length, t.length); return r ? 0 !== o : 1 < o }(); var t, r, i; this.isCorsReporting = function () { return e }, this.cookieDomainSegment = function () { return n } }(k, E.reportURI, E.cookieAssignFQDN), U = new function (a, n) { var u = {}, c = n ? ";domain=" + n : ""; this.get = function (n) { var e, t, r = u[n]; return void 0 === r && (e = a, t = new RegExp("[,; ]" + n + "=([^\\s,;]*)", "gi").exec(";" + e.cookie), r = t && t[1] || null, u[n] = r), null == r ? D : r }, this.set = function (n, e, t) { var r, i, o; u[n] = e, a.cookie = (r = e, i = t, o = encodeURIComponent(n) + "=" + (r + "").replace(/[^!#-+\--:<-\[\]-~]/g, encodeURIComponent), o += ";path=/", o += c, o += i ? ";expires=" + i.toUTCString() : "") } }(k, L.cookieDomainSegment()), P = new function (i, o) { i = i || {}; var a = o.keysPrefix + "sid", u = function () { return n || (n = o.sessionIdFunc()), n }; var n; function c(n) { return o.keysPrefix + n } this.get = function (n) { var e = u(); if (!e) return D; try { if (e == i[a]) return i[c(n)] } catch (n) { } return D }, this.set = function (n, e) { var t = u(); if (!t) return D; try { var r = i[a]; return t !== r && function () { var n; for (n in i) 0 === n.indexOf(o.keysPrefix) && delete i[n] }(), i[a] = t, i[c(n)] = e } catch (n) { } return D }, this.remove = function (n) { var e = u(); if (!e) return !0; try { if (e == i[a]) return delete i[c(n)] } catch (n) { } return !0 } }(M.localStorage, { keysPrefix: O.Storage.BoundKeyPrefix, sessionIdFunc: function () { return U.get(O.cookies.session) } }), F = new function (l) { var e = { tilda: "_clstil", asterisks: "_clsast", space: "_clsspc" }; function d(n, e) { if (p(n)) return e ? O.encoding.rootSelector : n.nodeName; var t = u(n.nodeName, e), r = function (n) { if (!n.parentNode) return null; var e = n.parentNode.childNodes; if (e.length < 2) return null; for (var t = n.nodeName, r = [], i = 0; i < e.length; i += 1)e[i].nodeName === t && r.push(e[i]); if (r.length < 2) return null; for (var o = 0; o < r.length; o += 1)if (r[o] === n) return o; return null }(n); if (null !== r) return function (n, e, t) { var r = n; t || (r += ":eq"); return r + "(" + e + ")" }(t, r, e); if (O.useClassesInSelectors) { var i = N.getClassList(n); if (0 < i.length) { for (var o = t, a = 0; a < i.length; a++)o += "." + i[a]; return o } } return t } function v(n, e, t) { if (p(n)) return null; var r = N.getElementId(n); return (r && -1 !== r.indexOf("~") || -1 !== r.indexOf("*") || -1 !== r.indexOf(" ")) && (r = o(r)), e ? u(n.nodeName, t) + "#" + r : "#" + r } function h(n, e) { var t = typeof e; "string" !== t && "number" !== t || n.unshift(e) } function u(n, e) { return e ? O.dictionary.encodeNodeName(n) : n } function p(n) { var e = n.nodeName; return "HTML" === e || "BODY" === e } function o(n) { return n.replace(/~/g, e.tilda).replace(/\*/g, e.asterisks).replace(/ /g, e.space) } function m(n) { for (var e = n.parentNode; null !== e;) { if (void 0 === e && console.log("hasFormAncestor undefined node: ", n), "FORM" === e.nodeName) return !0; e = e.parentNode } return !1 } function g(n, e, t) { var r = n.getAttribute(e), i = "[" + e + "='" + r + "']"; return -1 === i.indexOf("~") && -1 === i.indexOf("*") && -1 === i.indexOf(" ") || (i = o(i)), u(n.nodeName, t) + i } function y(n, e) { if (0 === l.noIdSelectorsForClassNames.length && 0 === l.noIdSelectorsForIDs.length && 0 === l.noIdSelectorsForAttrs.length) return !0; var t, r = N.getClassList(n); for (t = 0; t < l.noIdSelectorsForClassNames.length; t++)if (0 <= _.indexOf(r, l.noIdSelectorsForClassNames[t])) return !1; for (t = 0; t < l.noIdSelectorsForAttrs.length; t++)if (n.hasAttribute(l.noIdSelectorsForAttrs[t])) return !1; for (t = 0; t < l.noIdSelectorsForIDs.length; t++) { var i = l.noIdSelectorsForIDs[t]; if (i && 0 <= e.indexOf(i)) return !1 } return !0 } this.getSelectorExpression = function (n, e, t) { e = void 0 !== e ? e : O.encodeSelectors, t = t || { useId: !0 }; var r = l.useIdSelectors && t.useId; if (null === n || _.isUndefined(n) || !N.isElement(n)) return O.encoding.rootSelector; if (n.name && l.preferNamesInFormSelectors && m(n)) return g(n, "name", e); if (r) { var i = N.getElementId(n); if (i && !N.isDuplicateElementId(i) && y(n, i)) return v(n, !0, e) } if (n.name && l.useNameInFormSelectors && m(n)) return g(n, "name", e); if (t.identifyingAttribute && n.hasAttribute(t.identifyingAttribute)) return g(n, t.identifyingAttribute, e); for (var o = d(n, e), a = [o], u = n, c = e ? "*" : ">"; u.parentNode && !p(u);)if (1 === (u = u.parentNode).nodeType) { var s = N.getElementId(u); if (s && r && !N.isDuplicateElementId(s) && y(u, s)) return h(a, v(u, !1)), a.join(c); var f = d(u, e); if (h(a, f), u === parent) return a.join(c) } return a.join(c) } }(E), j = new function (t, e, n, r, i, o) { o = o || {}; var a, u, c, s, f, l, d = 0 < (i.encryptionList || []).length || 0 < (i.encryptionClassList || []).length || i.encryptionMode === O.ValueMaskingMode.WhiteList, v = d && !(!o.publicKey || !o.keyId), h = !1, p = !1, m = !1, g = []; function y(n) { b(u = N.Base64.bytesToBase64(new Uint8Array(n))), !m && p && w() } function E(n) { g.push(n), b(), p && g.length && e.emit("clsDebug", "Error: " + g.join(". Error: ")) } function w() { n.set("hybrid.key", u), n.set("symmetric.key", N.Base64.bytesToBase64(new Uint8Array(a))), m = !0 } function b(n) { h || (h = !0, (u = n) && (c = o.keyId + "_" + u), s && s()) } if (v) try { f = n.get("symmetric.key"), l = n.get("hybrid.key"), f && l && (a = new Uint8Array(N.strToBytes(N.Base64.atob(f))), b(l), 1) || (e.on("init:loaded", function () { p = !0, !m && a && u && w(), g.length && e.emit("clsDebug", "Error: " + g.join(". Error: ")) }), function () { var n = r(t); if (!n) return E("Current browser does not support crypto interface."), !1; var e = N.strToBytes(N.Base64.atob(o.publicKey)); return a = new Uint8Array(16), n.getRandomValues(a), n.executeEncryptionFlow(e, a, y, E), !0 }() && setTimeout(function () { b() }, o.timeout)) } catch (n) { E(n.message || "unknown exception during encryption") } else d && (E("encryption is not well configured"), console.error("[EyeView-403]: Encryption configuration error: missing encryption key settings. Sensitive data might be recorded.")); this.delayedExecution = function (n) { !d || h ? n() : s = n }, this.isEncryptionConfigured = function () { return !!d }, this.canUseEncryption = function () { return !!c }, this.getEncryptionKey = function () { return c ? a : D }, this.getKeyInfo = function () { return c || D }, this.stringIsEncrypted = function (n) { return N.startsWith(n, "__ENC_") } }(M, S, P, function (n) { return n.crypto && (n.crypto.subtle || n.crypto.webkitSubtle) ? new zn(n) : n.msCrypto && n.msCrypto.subtle ? new Vn(n) : null }, E, { publicKey: E.encryptionPublicKey, keyId: E.encryptionKeyId, timeout: E.encryptionTimeout }), B = new function (n, o) { var a = o.handlers; this.censor = function (e, t) { var r, n, i = e.value; for (r = 0; r < a.length; r++) { !(n = a[r]).isAvailable() && n.hasFallback() && (a[r] = o.fallbackHandlers[r], n = a[r]); try { i = n.censor(e, t) } catch (n) { N.log("Failed censoring value. Switching to fallback: " + n.message, n), a[r] = o.fallbackHandlers[r], i = a[r].censor(e, t) } if (i !== e.value) return i } return i }, this.isCensored = function (n, e) { var t; for (t = 0; t < a.length; t++)if (a[t].isCensored(n, e)) return !0; return !1 } }(M, (R = E, (A = j).isEncryptionConfigured() ? { handlers: [new Xn(x, O.ValueMaskingMode, "cls_mask", { valueCensorshipMode: R.maskingMode, valueCensorIds: R.maskList, valueCensorClasses: R.maskClassList, autoCensorPredicate: C.byTypes(R.valueAutoMasking) }, qn(), function (n) { W.onAutoMaskingApplied(n) }), new Xn((T = A, { censorValueOf: function (n) { var e, t = T.getEncryptionKey(); return e = T.AES_CBC.encrypt(new Uint8Array(N.strToUTF8Bytes(n)), t, !0), "__ENC_" + N.Base64.bytesToBase64(e, !0) + "_" }, isAvailable: function () { return T.canUseEncryption() }, hasFallback: function () { return !0 } }), O.ValueEncryptionMode, "cls_encrypt", { valueCensorshipMode: R.encryptionMode, valueCensorIds: R.encryptionList, valueCensorClasses: R.encryptionClassList, autoCensorPredicate: D }, qn())], fallbackHandlers: [new Xn(x, O.ValueMaskingMode, "cls_mask", { valueCensorshipMode: R.maskingMode, valueCensorIds: R.maskList, valueCensorClasses: R.maskClassList, autoCensorPredicate: C.byTypes(R.valueAutoMasking) }, qn(), function (n) { W.onAutoMaskingApplied(n) }), new Xn(x, O.ValueEncryptionMode, "cls_encrypt", { valueCensorshipMode: R.encryptionMode, valueCensorIds: R.encryptionList, valueCensorClasses: R.encryptionClassList, autoCensorPredicate: D }, qn())] } : { handlers: [new Xn(x, O.ValueMaskingMode, "cls_mask", { valueCensorshipMode: R.maskingMode, valueCensorIds: R.maskList, valueCensorClasses: R.maskClassList, autoCensorPredicate: C.byTypes(R.valueAutoMasking) }, qn(), function (n) { W.onAutoMaskingApplied(n) })] })); Wn.prototype.open = function (n, e) { this._url = e, this.readyState = XMLHttpRequest.OPENED, this.onreadystatechange && this.onreadystatechange() }, Wn.prototype.send = function (n) { var e; if (this.readyState = XMLHttpRequest.LOADING, this._contentType) { var t = { type: this._contentType }; e = new Blob([n], t) } else e = n; this.status = navigator.sendBeacon(this._url, e) ? 200 : Wn.BEACON_ERROR_STATUS, 200 !== this.status && N.log("failed posting new beacon using sendBeacon API. payload:  contentType:" + this._contentType), this.readyState = XMLHttpRequest.DONE, this.onreadystatechange && this.onreadystatechange() }, Wn.prototype.setRequestHeader = function (n, e) { "Content-Type" === n && (this._contentType = e) }, Wn.prototype.getResponseHeader = function () { return null }, Wn.canSend = (I = /chrome/.test(navigator.userAgent.toLowerCase()), function (n) { return !(I && n && n.length > Wn.CHROME_PAYLOAD_LIMIT) }), Wn.isSupported = function () { return "function" == typeof navigator.sendBeacon }, Wn.CHROME_PAYLOAD_LIMIT = 61440, Wn.BEACON_ERROR_STATUS = 400, Gn.prototype.open = function (n, e) { -1 === e.indexOf("://") && (e = location.protocol + "//" + location.hostname + (e.startsWith("/") ? "" : "/") + e), this.xdr.open(n, e), this.readyState = XMLHttpRequest.OPENED, this.onreadystatechange && this.onreadystatechange() }, Gn.prototype.send = function (n) { this.xdr.send(n), this.readyState = XMLHttpRequest.LOADING, this.onreadystatechange && this.onreadystatechange() }, Gn.prototype.setRequestHeader = function () { }, Gn.prototype.getResponseHeader = function () { return null }; var H = function (i) { var o = [function () { return new XMLHttpRequest }, function () { return new ActiveXObject("Msxml2.XMLHTTP") }, function () { return new ActiveXObject("Msxml3.XMLHTTP") }, function () { return new ActiveXObject("Microsoft.XMLHTTP") }]; if (void 0 !== M.XDomainRequest && /(msie 8\.0|msie 9\.0)/i.test(M.navigator.userAgent) && o.unshift(function () { return new Gn }), "undefined" != typeof CordovaRequestAdapter) { var n = new CordovaCookieAdapter(U), e = new CordovaContext(k, n); o.unshift(function () { return new CordovaRequestAdapter(e, n) }) } var a = null, u = function (n) { var e = n(); return e.cls_own = !0, e }; return { createXMLHTTPObject: function (n, e) { if (!n && i && e && Wn.isSupported() && Wn.canSend(e)) return new Wn; if (a) return u(a); var t, r; for (t = 0; t < o.length; t++)try { return r = u(o[t]), a = o[t], r } catch (n) { continue } return r } } }(E.reportPreferSendBeaconAPI); !function (n) { var r, e = this && this.__extends || (r = function (n, e) { return (r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (n, e) { n.__proto__ = e } || function (n, e) { for (var t in e) e.hasOwnProperty(t) && (n[t] = e[t]) })(n, e) }, function (n, e) { function t() { this.constructor = n } r(n, e), n.prototype = null === e ? Object.create(e) : (t.prototype = e.prototype, new t) }), f = function (r) { function n() { for (var n = [], e = 0; e < arguments.length; e++)n[e] = arguments[e]; var t = r.apply(this, n) || this; return Object.create(Error.prototype, { name: { value: "IllegalArgumentError" } }), t } return e(n, r), n }(Error); var E = function () { "use strict"; var a, u, i = !1; function o(n, e) { var t = a[(u[n] + u[e]) % 255]; return 0 !== n && 0 !== e || (t = 0), t } var p, c, s, f, l = !1; function r() { function n(n) { var e, t, r, i, o; for (o = a[255 - u[i = n]], 0 === i && (o = 0), t = r = o, e = 0; e < 4; e++)r ^= t = 255 & (t << 1 | t >>> 7); return r ^= 99 } i || function () { a = [], u = []; var n, e, t = 1; for (n = 0; n < 255; n++)e = 128 & (a[n] = t), t <<= 1, t &= 255, 128 === e && (t ^= 27), t ^= a[n], u[a[n]] = n; a[255] = a[0], u[0] = 0, i = !0 }(), p = [], c = [], s = [[], [], [], []], f = [[], [], [], []]; for (var e = 0; e < 256; e++) { var t = n(e); p[e] = t, c[t] = e, s[0][e] = o(2, t) << 24 | t << 16 | t << 8 | o(3, t), f[0][t] = o(14, e) << 24 | o(9, e) << 16 | o(13, e) << 8 | o(11, e); for (var r = 1; r < 4; r++)s[r][e] = s[r - 1][e] >>> 8 | s[r - 1][e] << 24, f[r][t] = f[r - 1][t] >>> 8 | f[r - 1][t] << 24 } l = !0 } var n = function (n, e) { l || r(); var v = new Uint32Array(e); v.set(p, 512), v.set(c, 768); for (var t = 0; t < 4; t++)v.set(s[t], 4096 + 1024 * t >> 2), v.set(f[t], 8192 + 1024 * t >> 2); var h = function (n, e, t) { "use asm"; var m = 0, g = 0, y = 0, E = 0, h = 0, p = 0, w = 0, b = 0, i = 0, o = 0, a = 0, u = 0, c = 0, s = 0, f = 0, l = 0, C = 0, x = 0, S = 0, A = 0, d = 0; var R = new n.Uint32Array(t), v = new n.Uint8Array(t); function T(n, e, t, r, i, o, a, u) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; i = i | 0; o = o | 0; a = a | 0; u = u | 0; var c = 0, s = 0, f = 0, l = 0, d = 0, v = 0, h = 0, p = 0; c = t | 0x400, s = t | 0x800, f = t | 0xc00; i = i ^ R[(n | 0) >> 2], o = o ^ R[(n | 4) >> 2], a = a ^ R[(n | 8) >> 2], u = u ^ R[(n | 12) >> 2]; for (p = 16; (p | 0) <= r << 4; p = p + 16 | 0) { l = R[(t | i >> 22 & 1020) >> 2] ^ R[(c | o >> 14 & 1020) >> 2] ^ R[(s | a >> 6 & 1020) >> 2] ^ R[(f | u << 2 & 1020) >> 2] ^ R[(n | p | 0) >> 2], d = R[(t | o >> 22 & 1020) >> 2] ^ R[(c | a >> 14 & 1020) >> 2] ^ R[(s | u >> 6 & 1020) >> 2] ^ R[(f | i << 2 & 1020) >> 2] ^ R[(n | p | 4) >> 2], v = R[(t | a >> 22 & 1020) >> 2] ^ R[(c | u >> 14 & 1020) >> 2] ^ R[(s | i >> 6 & 1020) >> 2] ^ R[(f | o << 2 & 1020) >> 2] ^ R[(n | p | 8) >> 2], h = R[(t | u >> 22 & 1020) >> 2] ^ R[(c | i >> 14 & 1020) >> 2] ^ R[(s | o >> 6 & 1020) >> 2] ^ R[(f | a << 2 & 1020) >> 2] ^ R[(n | p | 12) >> 2]; i = l, o = d, a = v, u = h } m = R[(e | i >> 22 & 1020) >> 2] << 24 ^ R[(e | o >> 14 & 1020) >> 2] << 16 ^ R[(e | a >> 6 & 1020) >> 2] << 8 ^ R[(e | u << 2 & 1020) >> 2] ^ R[(n | p | 0) >> 2], g = R[(e | o >> 22 & 1020) >> 2] << 24 ^ R[(e | a >> 14 & 1020) >> 2] << 16 ^ R[(e | u >> 6 & 1020) >> 2] << 8 ^ R[(e | i << 2 & 1020) >> 2] ^ R[(n | p | 4) >> 2], y = R[(e | a >> 22 & 1020) >> 2] << 24 ^ R[(e | u >> 14 & 1020) >> 2] << 16 ^ R[(e | i >> 6 & 1020) >> 2] << 8 ^ R[(e | o << 2 & 1020) >> 2] ^ R[(n | p | 8) >> 2], E = R[(e | u >> 22 & 1020) >> 2] << 24 ^ R[(e | i >> 14 & 1020) >> 2] << 16 ^ R[(e | o >> 6 & 1020) >> 2] << 8 ^ R[(e | a << 2 & 1020) >> 2] ^ R[(n | p | 12) >> 2] } function r(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; T(0x0000, 0x0800, 0x1000, d, n, e, t, r) } function I(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; var i = 0; T(0x0400, 0x0c00, 0x2000, d, n, r, t, e); i = g, g = E, E = i } function M(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; T(0x0000, 0x0800, 0x1000, d, h ^ n, p ^ e, w ^ t, b ^ r); h = m, p = g, w = y, b = E } function k(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; var i = 0; T(0x0400, 0x0c00, 0x2000, d, n, r, t, e); i = g, g = E, E = i; m = m ^ h, g = g ^ p, y = y ^ w, E = E ^ b; h = n, p = e, w = t, b = r } function D(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; T(0x0000, 0x0800, 0x1000, d, h, p, w, b); h = m = m ^ n, p = g = g ^ e, w = y = y ^ t, b = E = E ^ r } function O(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; T(0x0000, 0x0800, 0x1000, d, h, p, w, b); m = m ^ n, g = g ^ e, y = y ^ t, E = E ^ r; h = n, p = e, w = t, b = r } function _(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; T(0x0000, 0x0800, 0x1000, d, h, p, w, b); h = m, p = g, w = y, b = E; m = m ^ n, g = g ^ e, y = y ^ t, E = E ^ r } function N(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; T(0x0000, 0x0800, 0x1000, d, i, o, a, u); u = ~l & u | l & u + 1; a = ~f & a | f & a + ((u | 0) == 0); o = ~s & o | s & o + ((a | 0) == 0); i = ~c & i | c & i + ((o | 0) == 0); m = m ^ n; g = g ^ e; y = y ^ t; E = E ^ r } function L(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; var i = 0, o = 0, a = 0, u = 0, c = 0, s = 0, f = 0, l = 0, d = 0, v = 0; n = n ^ h, e = e ^ p, t = t ^ w, r = r ^ b; i = C | 0, o = x | 0, a = S | 0, u = A | 0; for (; (d | 0) < 128; d = d + 1 | 0) { if (i >>> 31) { c = c ^ n, s = s ^ e, f = f ^ t, l = l ^ r } i = i << 1 | o >>> 31, o = o << 1 | a >>> 31, a = a << 1 | u >>> 31, u = u << 1; v = r & 1; r = r >>> 1 | t << 31, t = t >>> 1 | e << 31, e = e >>> 1 | n << 31, n = n >>> 1; if (v) n = n ^ 0xe1000000 } h = c, p = s, w = f, b = l } function U(n) { n = n | 0; d = n } function P(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; m = n, g = e, y = t, E = r } function F(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; h = n, p = e, w = t, b = r } function j(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; i = n, o = e, a = t, u = r } function B(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; c = n, s = e, f = t, l = r } function H(n, e, t, r) { n = n | 0; e = e | 0; t = t | 0; r = r | 0; u = ~l & u | l & r, a = ~f & a | f & t, o = ~s & o | s & e, i = ~c & i | c & n } function q(n) { n = n | 0; if (n & 15) return -1; v[n | 0] = m >>> 24, v[n | 1] = m >>> 16 & 255, v[n | 2] = m >>> 8 & 255, v[n | 3] = m & 255, v[n | 4] = g >>> 24, v[n | 5] = g >>> 16 & 255, v[n | 6] = g >>> 8 & 255, v[n | 7] = g & 255, v[n | 8] = y >>> 24, v[n | 9] = y >>> 16 & 255, v[n | 10] = y >>> 8 & 255, v[n | 11] = y & 255, v[n | 12] = E >>> 24, v[n | 13] = E >>> 16 & 255, v[n | 14] = E >>> 8 & 255, v[n | 15] = E & 255; return 16 } function V(n) { n = n | 0; if (n & 15) return -1; v[n | 0] = h >>> 24, v[n | 1] = h >>> 16 & 255, v[n | 2] = h >>> 8 & 255, v[n | 3] = h & 255, v[n | 4] = p >>> 24, v[n | 5] = p >>> 16 & 255, v[n | 6] = p >>> 8 & 255, v[n | 7] = p & 255, v[n | 8] = w >>> 24, v[n | 9] = w >>> 16 & 255, v[n | 10] = w >>> 8 & 255, v[n | 11] = w & 255, v[n | 12] = b >>> 24, v[n | 13] = b >>> 16 & 255, v[n | 14] = b >>> 8 & 255, v[n | 15] = b & 255; return 16 } function z() { r(0, 0, 0, 0); C = m, x = g, S = y, A = E } function X(n, e, t) { n = n | 0; e = e | 0; t = t | 0; var r = 0; if (e & 15) return -1; while ((t | 0) >= 16) { G[n & 7](v[e | 0] << 24 | v[e | 1] << 16 | v[e | 2] << 8 | v[e | 3], v[e | 4] << 24 | v[e | 5] << 16 | v[e | 6] << 8 | v[e | 7], v[e | 8] << 24 | v[e | 9] << 16 | v[e | 10] << 8 | v[e | 11], v[e | 12] << 24 | v[e | 13] << 16 | v[e | 14] << 8 | v[e | 15]); v[e | 0] = m >>> 24, v[e | 1] = m >>> 16 & 255, v[e | 2] = m >>> 8 & 255, v[e | 3] = m & 255, v[e | 4] = g >>> 24, v[e | 5] = g >>> 16 & 255, v[e | 6] = g >>> 8 & 255, v[e | 7] = g & 255, v[e | 8] = y >>> 24, v[e | 9] = y >>> 16 & 255, v[e | 10] = y >>> 8 & 255, v[e | 11] = y & 255, v[e | 12] = E >>> 24, v[e | 13] = E >>> 16 & 255, v[e | 14] = E >>> 8 & 255, v[e | 15] = E & 255; r = r + 16 | 0, e = e + 16 | 0, t = t - 16 | 0 } return r | 0 } function W(n, e, t) { n = n | 0; e = e | 0; t = t | 0; var r = 0; if (e & 15) return -1; while ((t | 0) >= 16) { J[n & 1](v[e | 0] << 24 | v[e | 1] << 16 | v[e | 2] << 8 | v[e | 3], v[e | 4] << 24 | v[e | 5] << 16 | v[e | 6] << 8 | v[e | 7], v[e | 8] << 24 | v[e | 9] << 16 | v[e | 10] << 8 | v[e | 11], v[e | 12] << 24 | v[e | 13] << 16 | v[e | 14] << 8 | v[e | 15]); r = r + 16 | 0, e = e + 16 | 0, t = t - 16 | 0 } return r | 0 } var G = [r, I, M, k, D, O, _, N]; var J = [M, L]; return { set_rounds: U, set_state: P, set_iv: F, set_nonce: j, set_mask: B, set_counter: H, get_state: q, get_iv: V, gcm_init: z, cipher: X, mac: W } }({ Uint8Array: Uint8Array, Uint32Array: Uint32Array }, n, e); return h.set_key = function (n, e, t, r, i, o, a, u, c) { var s = v.subarray(0, 60); v.subarray(256, 316), s.set([e, t, r, i, o, a, u, c]); for (var f = n, l = 1; f < 4 * n + 28; f++) { var d = s[f - 1]; (f % n == 0 || 8 === n && f % n == 4) && (d = p[d >>> 24] << 24 ^ p[d >>> 16 & 255] << 16 ^ p[d >>> 8 & 255] << 8 ^ p[255 & d]), f % n == 0 && (d = d << 8 ^ d >>> 24 ^ l << 24, l = l << 1 ^ (128 & l ? 27 : 0)), s[f] = s[f - n] ^ d } h.set_rounds(n + 5) }, h }; return n.ENC = { ECB: 0, CBC: 2, CFB: 4, OFB: 6, CTR: 7 }, n.MAC = { CBC: 0, GCM: 1 }, n.HEAP_DATA = 16384, n }(), o = function () { function n(n, e, t, r, i, o) { void 0 === t && (t = !0), this.pos = 0, this.len = 0, this.mode = r, this.heap = i || function (n, e) { var t = n ? n.byteLength : e || 65536; if (4095 & t || t <= 0) throw new Error("heap size must be a positive integer and a multiple of 4096"); return n = n || new Uint8Array(new ArrayBuffer(t)) }().subarray(E.HEAP_DATA), this.asm = o || new E(null, this.heap.buffer), this.pos = 0, this.len = 0; var a = n.length; if (16 !== a && 24 !== a && 32 !== a) throw new f("illegal key size"); var u = new DataView(n.buffer, n.byteOffset, n.byteLength); if (this.asm.set_key(a >> 2, u.getUint32(0), u.getUint32(4), u.getUint32(8), u.getUint32(12), 16 < a ? u.getUint32(16) : 0, 16 < a ? u.getUint32(20) : 0, 24 < a ? u.getUint32(24) : 0, 24 < a ? u.getUint32(28) : 0), e !== D) { if (16 !== e.length) throw new f("illegal iv size"); var c = new DataView(e.buffer, e.byteOffset, e.byteLength); this.asm.set_iv(c.getUint32(0), c.getUint32(4), c.getUint32(8), c.getUint32(12)) } else this.asm.set_iv(0, 0, 0, 0); this.padding = t } return n.prototype.AES_Encrypt_process = function (n) { if (!(n instanceof Uint8Array)) throw new TypeError("data isn't of expected type"); for (var e, t, r, i, o, a, u, c = this.asm, s = this.heap, f = E.ENC[this.mode], l = E.HEAP_DATA, d = this.pos, v = this.len, h = 0, p = n.length || 0, m = 0, g = 0, y = new Uint8Array(v + p & -16); 0 < p;)t = d + v, r = n, i = h, o = p, void 0, a = (e = s).length - t, u = a < o ? a : o, e.set(r.subarray(i, i + u), t), v += g = u, h += g, p -= g, (g = c.cipher(f, l + d, v)) && y.set(s.subarray(d, d + g), m), m += g, g < v ? (d += g, v -= g) : v = d = 0; return this.pos = d, this.len = v, y }, n.prototype.AES_Encrypt_finish = function () { var n = this.asm, e = this.heap, t = E.ENC[this.mode], r = E.HEAP_DATA, i = this.pos, o = this.len, a = 16 - o % 16, u = o; if (this.hasOwnProperty("padding")) { if (this.padding) { for (var c = 0; c < a; ++c)e[i + o + c] = a; u = o += a } else if (o % 16) throw new f("data length must be a multiple of the block size") } else o += a; var s = new Uint8Array(u); return o && n.cipher(t, r + i, o), u && s.set(e.subarray(i, i + u)), this.pos = 0, this.len = 0, s }, n }(); n.AES_CBC = function () { function i(n, e, t, r) { void 0 === t && (t = !0), this.aes = r || new o(n, e, t, "CBC") } return i.encrypt = function (n, e, t, r) { return void 0 === t && (t = !0), new i(e, r, t).encrypt(n) }, i.prototype.encrypt = function (n) { return function () { for (var n = [], e = 0; e < arguments.length; e++)n[e] = arguments[e]; for (var t = n.reduce(function (n, e) { return n + e.length }, 0), r = new Uint8Array(t), i = 0, o = 0; o < n.length; o++)r.set(n[o], i), i += n[o].length; return r }(this.aes.AES_Encrypt_process(n), this.aes.AES_Encrypt_finish()) }, i }() }(j), Jn.prototype.put = function (n, e) { var t = { key: n, value: e }; if (this._keymap[n] = t, this.tail ? (this.tail.newer = t).older = this.tail : this.head = t, this.tail = t, this.size === this.limit) return this.shift(); this.size++ }, Jn.prototype.shift = function () { var n = this.head; return n && (this.head.newer ? (this.head = this.head.newer, this.head.older = D) : this.head = D, n.newer = n.older = D, delete this._keymap[n.key]), n }, Jn.prototype.get = function (n, e) { var t = this._keymap[n]; if (t !== D) return t === this.tail || (t.newer && (t === this.head && (this.head = t.newer), t.newer.older = t.older), t.older && (t.older.newer = t.newer), t.newer = D, t.older = this.tail, this.tail && (this.tail.newer = t), this.tail = t), e ? t : t.value }, Jn.prototype.find = function (n) { return this._keymap[n] }, Jn.prototype.set = function (n, e) { var t, r = this.get(n, !0); return r ? (t = r.value, r.value = e) : (t = this.put(n, e)) && (t = t.value), t }, Jn.prototype.toString = function () { for (var n = "", e = this.head; e;)n += String(e.key) + ":" + e.value, (e = e.newer) && (n += " < "); return n }, O.dictionary = { eventTypes: { change: 0, document: 2, mousedown: 3, touchstart: 4, touchend: 5, focusout: 6, blur: 7, unload: 9, submit: 10, reset: 11, mouseup: 12, drag: 13, scroll: 14, popstate: 15, keydown: 16, keyup: 17, keypress: 18, timing: 20, idle: 21, ajaxRequest: 22, formValidationError: 23, hashchange: 25, botDetection: 26, mouseenter: 27, navigation: 28, mousemove: 29, error: 30, thirdparty: 31, custom: 32, hover: 33, thirdpartymap: 34, performance: 35, resource: 36, clsdebug: 37, resize: 38, pageSnapshot: 91, pageUpdate: 92, resourceContent: 93, corsDeniedResource: 94, blackout: 101, segmentChanged: 102, titleChanged: 103, clientAttribute: 110, waterfall: 111, lastSegment: 112 }, elements: { DIV: 0, SPAN: 1, INPUT: 2, FORM: 3, SELECT: 4, TEXTAREA: 5, TABLE: 6, TR: 7, TD: 8, IFRAME: 9, TBODY: 10, THEAD: 11, LABEL: 12 }, encodingTypes: { cd_number: 0, cd_boolean: 1, cd_string: 2, cd_coordinate: 3 }, performanceTimingEvents: { navigationStart: 1, redirectStart: 2, fetchStart: 4, domainLookupStart: 5, connectStart: 7, secureConnectionStart: 8, requestStart: 10, responseStart: 13, domLoading: 15, domContentLoadedEventStart: 17, domComplete: 19, loadEventStart: 20, loadEventEnd: 21 }, encode: function (n, e) { var t = e[n]; return t !== D ? t : n }, encodeEventType: function (n) { return O.dictionary.encode(n, O.dictionary.eventTypes) }, encodeNodeName: function (n) { return O.dictionary.encode(n, O.dictionary.elements) }, encodeEncodingType: function (n) { return O.dictionary.encode(n, O.dictionary.encodingTypes) }, encodePerformanceTimingMeasurement: function (n) { return O.dictionary.encode(n, O.dictionary.performanceTimingEvents) } }, Kn.MAX_ENTRIES = 150, Kn.DirectionType = { BACK: 1, FORWARD: 2 }, Kn.UrlType = { FUlL_URL: 1, HASH_ONLY: 2 }, Qn.EVENTS = { BlackoutEnter: "BlackoutEnter", BlackoutLeave: "BlackoutLeave" }, Qn.ALWAYS_FALSE = function () { return !1 }; var q, V = { severity: { ERROR: 0, WARN: 1, INFO: 2, DEBUG: 3 }, types: { GENERAL_ERR: { code: 100, count: 0 }, INVALID_TIMING_ERR: { code: 101, count: 0 }, TOP_WINDOW_SIZE_ERR: { code: 102, count: 0 }, WINDOW_SIZE_NOT_VALID_ERR: { code: 103, count: 0 }, KEREN_ERR: { code: 104, count: 0 } }, currentDebugInfo: null, registerError: function (n, e) { V.registerDebugInfo(V.severity.ERROR, n, e) }, registerErrorAndLog: function (n, e) { V.registerDebugInfoAndLog(V.severity.ERROR, n, e) }, registerDebugInfoAndLog: function (n, e, t) { V.registerDebugInfo(n, e, t), N.log(t) }, registerDebugInfo: function (n, e, t) { e.count++ , null === V.currentDebugInfo && (V.currentDebugInfo = new Yn(n, e.code, e.count, t)) }, getRegisteredDebugInfo: function (n) { var e = V.currentDebugInfo; return null === e || _.isUndefined(e) ? null : (n && V.clearDebugInfo(), e) }, clearDebugInfo: function () { V.currentDebugInfo = null }, setRegisteredDebugInfoOnEvent: function (n) { if (null === n.getDebugInfo() || _.isUndefined(n.getDebugInfo())) { var e = V.getRegisteredDebugInfo(!0); null != e && n.setDebugInfo(e) } }, setErrorOnEvent: function (n, e, t) { V.setDebugInfoOnEvent(n, V.severity.ERROR, e, t) }, setErrorOnEventAndLog: function (n, e, t, r) { V.setDebugInfoOnEvent(n, V.severity.ERROR, e, t), r ? N.log(t, r) : N.log(t) }, setWarnOnEvent: function (n, e, t) { V.setDebugInfoOnEvent(n, V.severity.WARN, e, t) }, setDebugInfoOnEvent: function (n, e, t, r) { if (null === n || _.isUndefined(n)) N.log("Failed setting debug on non-existing event"); else { var i = new Yn(e, t.code, t.count, r); n.setDebugInfo(i) } } }; q = function (t, r, i, u, c, o) { var a = { currentlyEncodedPageEvent: null }; function s(n, e, t) { var r = _.isNumber(n) && _.isNumber(e); return r || o.setErrorOnEvent(a.currentlyEncodedPageEvent, o.types.WINDOW_SIZE_NOT_VALID_ERR, "Non valid values for window size for " + t + ": x=" + n + " y=" + e), r ? { width: n, height: e } : null } function f(n) { return null !== n && _.isNumber(n.width) && _.isNumber(n.height) ? n.width + "x" + n.height : "x" } function l(n) { if (_.isNumber(n)) return N.encodeAsBase(n, O.encoding.numberBase); N.log("Trying to encode a non-number " + n) } function d(n) { if (_.isString(n)) return l(N.hashcode(n)); N.log("Trying to encode hashCode of a non-string " + n) } function e(n) { if (_.isNumber(n.x) && _.isNumber(n.y)) { var e = Math.round(n.x), t = Math.round(n.y); return l(e) + "_" + l(t) } N.log("Trying to encode coordinate with non-numbers x,y : (" + n.x + "," + n.y + ")") } function v(n, e, t, r) { _.isString(t) && (r ? n.push(N.Base64.encode(e) + "_" + N.Base64.encode(t)) : n.push(e + "_" + t)) } function h(n, e, t) { _.isNumber(t) && n.push(e + "_" + l(t)) } function p(n, e, t, r) { r = r || 0; var i = u.mmRecordTimes ? "_" + l(r) : "", o = Math.round(e), a = Math.round(t); n.push(l(o) + "_" + l(a) + i) } return { encodePageDetails: function (n) { var e = []; return n.frame && v(e, "t", n.frame ? "f" : "p"), v(e, "u", d(n.urlWithoutHash)), n.hash && v(e, "h", N.Base64.encode(n.hash)), i().state.lastSizes.window = _.isNumber(t.innerWidth) && _.isNumber(t.innerHeight) ? s(t.innerWidth, t.innerHeight, "[inner]") : !_.isUndefined(r.body) && _.isNumber(r.body.offsetWidth) && _.isNumber(r.body.offsetHeight) ? s(r.body.offsetWidth, r.body.offsetHeight, "[offset]") : null, i().state.lastSizes.screen = s(t.screen.width, t.screen.height, "[screen]"), v(e, "s", f(i().state.lastSizes.window)), v(e, "sc", f(i().state.lastSizes.screen)), n.referrerWithoutHash && v(e, "r", d(n.referrerWithoutHash)), O.reportBase64URLs && v(e, "ub", N.Base64.encode(n.url)), e.join("*") }, encodePageSnapshotData: function (n) { var e = "h", t = i().plugins.reporter.beaconEncoder.encodeSnapshotHtml(n.html); return t.compressed ? e = "hh" : t.plain && (e = "p"), ["sn_" + n.seq, "r_" + N.Base64.encode(n.referrer), "c_" + N.Base64.encode(n.cookie), "ch_" + n.charset, e + "_" + t.encoded].join("*") }, encodeResize: function (n) { var e = []; return v(e, "ws", f(n.window)), v(e, "sc", f(n.screen)), e.join("*") }, encodeTimings: function (n) { return _.reduce(n, function (n, e, t) { var r = "u_" + t + "*t_" + e.total; return _.isNumber(e.rendering) && (r += "*r_" + e.rendering), _.isNumber(e.dns) && (r += "*d_" + e.dns), _.isNumber(e.timeToFirstBuffer) && (r += "*f_" + e.timeToFirstBuffer), _.isNumber(e.downloadTime) && (r += "*w_" + e.downloadTime), _.isNumber(e.originalRenderTime) && (r += "*o_" + e.originalRenderTime), _.isString(n) && 0 < n.length ? n + "**" + r : r }, "") }, encodeWaterfallTiming: function (n) { var e = []; for (var t in n) { var r, i = [], o = {}, a = []; for (r = 0; r < n[t].length; r++) { var u = [], c = null; for (var s in n[t][r]) "name" === s ? c = N.Base64.encode(n[t][r][s]) : (o[s] === D && (o[s] = a.length, a.push(s)), h(u, o[s], Math.round(n[t][r][s]))); null !== c && i.push(c + "_" + u.join("_")), c = null } 0 !== i.length && e.push(t + "*" + a.join("_") + "*" + i.join("*")) } return e.join("**") }, encodePerformanceTimings: function (n) { var e = n.perf.timing, t = n.perf.navigation, r = n.browserTime, i = []; for (var o in e) void 0 !== O.dictionary.performanceTimingEvents[o] && h(i, O.dictionary.encodePerformanceTimingMeasurement(o), e[o]); return t && _.isNumber(t.type) && h(i, "nt", t.type), t && _.isNumber(t.redirectCount) && h(i, "rc", t.redirectCount), r && h(i, "bt", r), i.join("*") }, encodeAjaxRequest: function (n) { var e = []; if (n.method && v(e, "m", n.method), u.ajaxHashRecurrentUrls) { var t = d(n.url), r = n.ajaxUrls.get(t); _.isUndefined(r) && (n.ajaxUrls.set(t, n.url), v(e, "u", N.Base64.encode(n.url))), v(e, "uh", t) } else v(e, "u", N.Base64.encode(n.url)); return n.startedAt && n.endedAt && v(e, "d", l(n.endedAt - n.startedAt)), n.status && v(e, "s", l(n.status)), n.statusText && v(e, "st", N.Base64.encode(n.statusText)), n.requestHeaders && v(e, "rqh", N.Base64.encode(n.requestHeaders)), n.requestContent && v(e, "rqc", N.Base64.encode(n.requestContent)), n.responseHeaders && v(e, "rh", N.Base64.encode(n.responseHeaders)), n.responseContent && v(e, "rc", N.Base64.encode(n.responseContent)), e.join("*") }, encodeResourceContent: function (n) { var e = []; if (!_.isUndefined(n.url)) return v(e, "u", N.Base64.encode(n.url)), n.type && 0 < n.type.length && v(e, "t", N.Base64.encode(n.type)), n.content && 0 < n.content.length && v(e, "dd", N.Base64.bytesToBase64(n.content)), n.error && 0 < n.error.length && v(e, "er", N.Base64.encode(n.error)), e.join("*") }, encodeKeyValue: function (n) { var e = []; return v(e, "n", N.Base64.encode(n.name)), v(e, "v", N.Base64.encode("" + n.val)), e.join("*") }, encodeSegmentChanged: function (n) { var e = []; return n.type && e.push("t_" + n.type), n.current && e.push("c_" + N.Base64.encode(n.current)), n.hint && e.push("h_" + n.hint), n.last && e.push("l_" + N.Base64.encode(n.last)), n.lastDwell && e.push("ld_" + l(n.lastDwell)), e.join("*") }, encodeKeyEvent: function (n) { var e = ""; return n.unicode && (e += n.unicode), _.isUndefined(n.content) || (e += "_" + N.Base64.encode(n.content)), e }, encodeClickDetails: function (n) { return e(n.start) + "*" + e(n.end) + "*" + l(n.duration) }, encodeMouseMove: function (n) { u.mmDebug && N.log("encoding coordArr[" + n.length + "]:" + JSON.stringify(n)); var e, t, r = []; for (e = 0; e < n.length; e++)p(r, (t = n[e]).x, t.y, t.t); return r.join("*") }, encodeHoverEvent: function (n) { for (var e = [], t = [], r = n.length - 1; 0 <= r; r--) { var i = n[r]; if (0 <= t.indexOf(i)) u.mhDebug && N.log("encode hover skipping duplicate: ", i); else { var o = c.getSelectorExpression(i); if (e.push(o), t.push(i), t.length >= u.mhMaxListSize) break; u.mhDebug && N.log("encoding hover selector: " + o, i) } } var a = e.join(" "); return u.mhDebug && N.log("encoding total of [" + e.length + "] hovers: " + a), a }, encodeKVMap: function (n) { var e = []; for (var t in n) n.hasOwnProperty(t) && v(e, t, n[t], !0); return e.join("*") }, encodeNumber: l, encodeBoolean: function (n) { return n ? "1" : "0" }, encodeCoordinate: function (n) { if (_.isNumber(n.x) && _.isNumber(n.y)) { var e = Math.round(n.x), t = Math.round(n.y); return l(e) + "_" + l(t) } N.log("Trying to encode coordinate with non-numbers x,y : (" + n.x + "," + n.y + ")") }, encodeCoordinate64: function (n) { return N.Base64.encode(e(n)) }, encodeString: function (n) { return N.Base64.encode(n) }, encodeHashCode: d } }(M, k, function () { return W }, E, F, V), Zn.prototype.add = function (n, e) { return this._updates.push({ ref: e, update: n }), this }, $n.INITIAL_COMPRESSION_FACTOR = .25, $n.MINIMAL_COMPRESSION_FACTOR = .05, eventEncodingUtils = { compress: function (n) { return N.pako.gzip(n) }, encodeTimestamp: function (n) { var e = n.timestamp; return _.isNumber(e) || (N.log("Missing event timestamp", n), e = N.currentTimestamp()), q.encodeNumber(e) }, encodeEventType: function (n) { return O.encodeEventTypes ? O.dictionary.encodeEventType(n) : n }, encodeExtraInfo: function (n) { var e = n.extraInfo; if (_.isUndefined(e)) return ""; for (var t, r, i, o, a = [], u = ue.prototype.extraInfoAttrs, c = 0; c < u.length; c++) { var s = u[c], f = e[s.name]; _.isUndefined(f) || (t = a, r = s.encodeName, i = s.encodeFunc(f), o = s.encodeCode, _.isString(i) && t.push(r + "." + o + "_" + i)) } return a.join("*") }, encodeDebugInfo: function (n) { var e = n.debugInfo; if (_.isUndefined(e)) return "-"; var t = function (n, e, t) { _.isUndefined(t) || n.push(e + "_" + t) }, r = []; return t(r, "s", e.severity), t(r, "c", e.code), t(r, "i", e.count), e.msg && e.count <= 3 && t(r, "m", q.encodeString(e.msg)), r.join("*") } }, ee.COMPRESSED_INDICATION_CHARSET = "ISO-8859-15", ee.MINIMAL_COMPRESSION_FACTOR = .05, te.currentRef = function () { return k.location.protocol + "//" + k.location.host + k.location.pathname }, ie.prototype.track = function (n) { var e = !this.current || this.current.ofSameSegment(n); return this.last = this.current, this.current = n, e }, ie.prototype.getCurrent = function () { return this.current }; var z, X, W = { env: O, config: E, utils: N, _: _, sessionId: D, visitorId: D, debugHelper: (z = E, X = t, { visitLoadEvent: function (n) { if (z.sendStateInfo) { var e = {}; Pn(e), Fn(e); var t = { ver: X, config: function (n) { var e, t, r = {}; for (e in z) if (z.hasOwnProperty(e)) switch (typeof z[e]) { case "string": t = z[e], n[e] !== t && (100 < t.length && (t = "[trimmed] " + t.substring(0, 100)), r[e] = t); break; case "object": 0 < (z[e].length || 0) && (r[e] = z[e]) }return r }(e) }; n.setExtraInfo(ue.prototype.DETECTOR_CONFIG_ID, JSON.stringify(t)) } }, visitUnloadEvent: function (n) { } }), page: { timing: {} }, pendingPageEventsEmitted: !(ie.prototype.getLast = function () { return this.last || this.current }), pendingPageEvents: [], bindings: { registered: [], unsupportedEventTypes: [] }, plugins: {}, reports: { events: [], resources: [] }, state: { loaded: !1, stopped: !1, clickStart: {}, scrolling: {}, unloading: !1, maxScrollReach: 0, typableElementsLRUMap: new Jn(20), lastFocusData: {}, mouseEnterReported: !1, hover: { hoverStartTimestamp: 0, hoverElementList: [] }, clsDebugCounter: 0, lastSizes: { window: null, screen: null, dpr: M.devicePixelRatio } }, touchDetected: !1, ajaxUrls: new Jn(20), historyManager: new Kn(M, S, M.history), blackoutManager: new Qn(M, S, E.blackoutWhenLocationContains), debugInfoHandler: V, zoomType: { IN: 1, OUT: 2 }, version: "local_dev", segmentManager: new function (o, a) { var n, u = !1, c = N.stripHash(o.location.href), s = "", f = { startedAt: N.currentTimestamp(), value: o.location.pathname, type: "path" }; function r(n, e) { var t = "hash" === n ? o.location.hash : o.location.pathname + o.location.hash, r = N.currentTimestamp(), i = { type: n, hint: e, current: t, last: f.value, lastDwell: r - f.startedAt }; f.startedAt = r, f.type = n, f.value = t, s = o.location.hash, c = N.stripHash(o.location.href), u = !0, a.emit("segmentChanged", i) } void 0 !== ue && (n = ue, ue = function () { n.apply(this, arguments), this.subPage = s, this.referrer = c }), a.on("navigation", function (n) { var e; n.direction === Kn.DirectionType.BACK ? e = "back" : n.direction === Kn.DirectionType.FORWARD && (e = "forward"); var t = "path"; n.urlType === Kn.UrlType.HASH_ONLY && (t = "hash"), r(t, e) }), a.on("init:loaded", function () { s = o.location.hash, c = N.stripHash(o.location.href), f.startedAt = N.currentTimestamp(), o.location.hash && r("hash", "load") }), this.createSegmentTracker = function () { return new ie }, this.onUnload = function () { u && a.emit("lastSegment", { last: f.value, lastDwell: N.currentTimestamp() - f.startedAt }) } }(k, S), botDetector: new function (t, e, i) { var o = "bot.nh", r = "bot.d", a = { CLICKS_WITH_NO_MOUSE_MOVES: { code: "1", active: !0 }, NOT_TRUSTED_MOUSEEVENT: { code: "3", active: !0 }, INVALID_NAVIGATION_API_VALUES: { code: "4", active: !0 }, MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES: { code: "5", active: !0 } }, u = { MANY_MOUSE_MOVES_BETWEEN_CLICKS: { code: "-1", active: !0 } }, c = !1, s = !1, f = null, l = null, d = 0, v = 100, h = 0, p = { robot: !1, human: !1 }, m = !1; function g() { n("mousemove", y), n("click", E), m = !1 } function y(n) { return c || (l = N.getCoordinate(n), d = N.currentTimestamp()), s && h++ , c = !0 } function E(n) { return n.type === O.mouseEvents.down && function (n) { if (n.type === O.mouseEvents.down) { s = !0; var e, t = N.getCoordinate(n); null !== f ? u.MANY_MOUSE_MOVES_BETWEEN_CLICKS.active && !N.isSameCoordinates(t, f) ? 10 <= h && (e = u.MANY_MOUSE_MOVES_BETWEEN_CLICKS, N.log("Human Detected [" + e.code + "]"), p.human = !0, i.set(r, e.code), g()) : a.CLICKS_WITH_NO_MOUSE_MOVES.active && N.isCoordinatesDistLargerThan(t, f, 10) && 0 === h && w(a.CLICKS_WITH_NO_MOUSE_MOVES) : c && function (n) { if (a.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES.active) { var e = N.getCoordinate(n); if (null !== l && N.isSameCoordinates(e, l) && N.currentTimestamp() - d < v) { var t = i.get(o); if (_.isUndefined(t)) i.set(o, 1); else { var r = parseInt(t); isNaN(r) && (N.log("Bad format of non human counter in the robot cookie: " + r), r = 1), r++ , i.set(o, r), w(a.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES), a.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES.active = !1 } } } }(n), h = 0, f = t } }(n), e = n, a.NOT_TRUSTED_MOUSEEVENT.active && "isTrusted" in e && !1 === e.isTrusted && w(a.NOT_TRUSTED_MOUSEEVENT), !0; var e } function n(e, n) { try { N.removeEventHandler(t.body, e, n) } catch (n) { N.log("BotDetector failed to remove " + e + " listener. " + n.message(), n) } } function w(n) { m && (N.log("BotDetector has detected a bot with type: " + n.code), n.active = !1, i.set(r, n.code), p.robot = !0, g(), e.emit("botDetection", n.code)) } this.init = function () { var n = i.get(r); n ? N.log("Session was already Bot/Human classified with code: " + n) : (m = !0, N.addEventHandler(t.body, "mousemove", y, !0), N.addEventHandler(t.body, "click", E, !0)) }, this.isActive = function () { return m }, this.notifyMouseAction = E }(k, S, P), initialize: function (n) { if (W.version = n, N.log("Initializing Detector... (" + O.setup + " setup) VERSION:" + W.version), W.setClientCookies(), void 0 !== E.enabledByChance && !Hn(E.enabledByChance, P, "recording")) return O.disabled = !0, void N.log("recording is DISABLED (chances = " + E.enabledByChance + ")"); E.domRecordEnabled || void 0 === E.domRecordEnabledByChance || Hn(E.domRecordEnabledByChance, P, "dom") && "function" == typeof E.enableDomConfig && (E.enableDomConfig(), N.log("DOM recording ENABLED (chances = " + E.domRecordEnabledByChance + ")")); try { if (void 0 !== d) { var e = f.validate(d, E); if (0 < e.errors.length) return void console.error("[EyeView-1401]: Detector configuration validation failure. validation report:" + e); N.log("configuration fields validation report:" + e) } else N.log("Warning: configuration scheme not set, skipping configuration validation.") } catch (n) { return void console.error("[EyeView-1402]: Error while validating Detector configuration:" + n + ". Detector is DISABLED.") } try { W.checkSupportModeSession(), W.initializePageDetails(), W.registerPlugins(), S.on("clsDebug", W.saveClsDebugErrorEvent), S.on(Qn.EVENTS.BlackoutEnter, W.onBlackoutEnter), S.on(Qn.EVENTS.BlackoutLeave, W.onBlackoutLeave), this.asStoppable().isStopped(!0) && N.log("The detector is currently in STOPPED state. Events reporting is suspended."), void 0 !== W.plugins.domRecordingPlugin && W.plugins.domRecordingPlugin.isSemiDomActivated() && W.addDomReadyEventHandler(), W.updateScrollReach(), W.saveDocumentLoadEvent(W.page.initializationTimestamp), N.log("Extracted page details for " + W.page.id + " at " + W.page.urlWithoutHash), W.registerPreLoadEvents(), E.SCIntegration && S.on("3rdpartymap:scReport", W.saveThirdPartyMapEvent), S.on("thirdPartyMap", function (n) { W.saveThirdPartyMapEvent({ value: n }) }), S.emit("init:preloaded"); var t = M.document.readyState; N.log("readyState on initialization: " + t), k.body && "complete" === t ? W.onLoad() : N.addEventHandler(M, "load", W.onLoad, !1), j.delayedExecution(W.emitPageEvents) } catch (n) { N.log("ERROR: while initializing detector. Exception: ", n.stack ? n.stack : n.message), console.log("WARNING[EyeView-1302]: Failed initializing detector script - " + n.message), W.saveClsDebugErrorEvent("initialize", n) } }, emitPageEvents: function () { for (var n = 0; n < W.pendingPageEvents.length; n++)S.emit("saveEvent", W.pendingPageEvents[n]); W.pendingPageEventsEmitted = !0, W.pendingPageEvents = [] }, onBlackoutEnter: function (n) { var e = W.createEventObject("blackout", N.currentTimestamp(), null); e.value = n, W.saveEvent(e) }, onBlackoutLeave: function () { W.savePageUpdate() }, onLoad: function () { N.log("onLoad - finalizing detector initialization. location:" + M.location.href); var n = N.currentTimestamp(); W.state.loaded || (N.time("onLoadInitialization"), W.documentEvent && 0 < k.title.length && (void 0 === W.page.title || 0 === W.page.title.length) && (W.page.title = W.getPageTitle(), W.documentEvent.setExtraInfo(ue.prototype.VISUAL_NAME, W.page.title)), E.botDetection && !N.hasTouch() && W.botDetector.init(), W.page.loadTimestamp = n, W.resolvePageLoadTime(W.page), E.reportValidationErrors && S.on("formValidationError", W.saveValidationError), W.state.loaded = !0, S.emit("init:loaded"), W.registerPostLoadEvents(), W.plugins.domRecordingPlugin && new ke(k, S), S.emit("init:post_binding"), N.timeEnd("onLoadInitialization"), N.log("onLoad - detector initialization completed. location:" + M.location.href)) }, registerPlugins: function () { var t = this; _.forOwn(W.plugins, function (n, e) { n.initialize(S, t) && N.log("Registered plugin: " + e) }) }, registerPreLoadEvents: function () { var n = function () { return W.state.unloading }, e = [{ type: "beforeunload", interception: W.interceptUnload, target: M, logicalName: "unload", filter: n }, { type: "pagehide", interception: W.interceptUnload, target: M, logicalName: "unload", filter: n }, { type: "resize", valueEncoding: q.encodeResize, filter: W.filterResize, interception: W.interceptResize, target: M }, { type: W.getChangeEventType(), valueExtraction: W.extractElementValue, interception: W.interceptFocusLost, filter: W.filterNonChangableEventsElements, logicalName: "change", target: k }, { type: "reset", target: k }, { type: "submit", valueExtraction: W.extractElementSource, valueEncoding: q.encodeHashCode, target: k }, { type: W.getFocusInEventType(), valueExtraction: W.extractElementValue, interception: W.interceptFocusIn, filter: W.filterNonTypableElements, target: k }]; W.page.hasTouch ? (e.push({ type: "touchstart", interception: W.interceptClickStart, target: k }), e.push({ type: N.isHybridAndroid() ? "touchmove" : "touchend", interception: W.interceptClickEnd, valueEncoding: q.encodeClickDetails, target: k })) : (e.push({ type: O.mouseEvents.down, interception: W.interceptClickStart, target: k, logicalName: "mousedown" }), e.push({ type: O.mouseEvents.up, interception: W.interceptClickEnd, valueEncoding: q.encodeClickDetails, target: k, logicalName: "mouseup" })), "blur" !== W.getChangeEventType() && e.push({ preload: !0, type: "blur", valueExtraction: W.extractElementValue, interception: W.interceptBlur, filter: W.filterNonTypableElements, logicalName: "change", target: k }), E.recordMouseMoves && e.push({ type: "mousemove", valueExtraction: W.extractMouseMoveValue, valueEncoding: q.encodeMouseMove, encodeValue: !1, interception: W.interceptMouseMove, dependent: !0, dontSendElement: !0, target: k }), E.recordHovers && e.push({ type: "mouseover", encodeValue: !1, filter: W.filterHovers, interception: W.interceptMouseOver, valueEncoding: q.encodeHoverEvent, target: k }), E.recordScrolls && e.push({ type: "scroll", debounceBy: E.debounceScrolls, valueExtraction: W.extractScrollValue, valueEncoding: q.encodeCoordinate, filter: W.filterScrollElements, interception: W.interceptScroll, dependent: E.dependentScroll, target: k }), E.recordErrors && e.push({ type: "error", valueExtraction: W.extractErrorValue, interception: W.interceptError, target: M }), E.recordConsoleErrors && function (n) { if ("object" == typeof console) { var e, t = function (n, e) { if ("function" == typeof console[n]) { var t = console[n]; console[n] = function () { var n = Array.prototype.slice.call(arguments); t.apply(console, n), e(n) } } }; for (e in n) t(e, n[e]) } }({ error: W.onConsoleError }); var t = N.getMouseEnterTarget(); t !== k && t !== M || e.push({ type: "mouseenter", interception: W.interceptMouseEnter, target: t }), W.shouldListenToKeyEvents() && (e.push({ type: "keydown", interception: W.interceptKeyboard, valueEncoding: q.encodeKeyEvent, dependent: !0, target: k }), e.push({ type: "keypress", interception: W.interceptKeyboard, valueEncoding: q.encodeKeyEvent, dependent: !0, target: k })), E.domRecordEnabled && (S.on("pageSnapshot:save", W.savePageSnapshotEvent), S.on("pageUpdate", W.savePageUpdate)), E.resourcesRecordEnabled && S.on("saveResourceEvent", W.saveResourceDataEvent), E.resourcesRecordAllowCors && S.on("saveCorsDeniedEvent", W.saveCorsDeniedDataEvent), E.clientAttributesEnabled && S.on("clientAttribute", W.saveClientAttributeEvent), E.resourceTimingRecordEnabled && Hn(E.resourceTimingRecordEnabledByChance, P, "performanceRecord") && S.on("waterfall", W.savePerformanceDataEvent), W.page.hasTimingAPI && !E.recordAjaxCallsAnyway || (S.on("ajax:load", W.recordAjaxResource), S.on("ajax:error", W.recordAjaxResource)), S.on("ajax:loadend", W.saveAjaxRequestEvent), S.on("segmentChanged", W.saveSegmentChangedEvent), S.on("lastSegment", W.saveLastSegmentEvent), S.on("titleChanged", W.saveTitleChanged), S.on("botDetection", W.saveBotDetectionEvent), S.on("reporter:idle", W.saveIdleEvent), S.on("customEvent", W.saveCustomEvent), W.bindPageEvents(e) }, saveIdleEvent: function (n) { var e = N.currentTimestamp(), t = W.createEventObject("idle", e, null); t.value = e - n.idleBaseTime, t.binding = { valueEncoding: q.encodeNumber }, t.setExtraInfo(ue.prototype.TIME_SINCE_LAST_EVENT, e - n.latestEventTime), W.saveEvent(t) }, saveBotDetectionEvent: function (n) { var e = W.createEventObject("botDetection", N.currentTimestamp(), null); e.value = n, e.shouldEncodeValue = !1, W.saveEvent(e) }, registerPostLoadEvents: function () { var n = []; W.state.mouseEnterReported || N.getMouseEnterTarget() !== k.body || n.push({ type: "mouseenter", interception: W.interceptMouseEnter, target: k.body }), 0 < n.length && W.bindPageEvents(n) }, bindPageEvents: function (n) { N.time("bindPageEvents"), _.forEach(n, function (n) { W.registerEventBinding(n) }), N.log("Bound event types (" + W.bindings.registered.length + "): " + _.pluck(W.bindings.registered, "type") + (W.bindings.unsupportedEventTypes.length ? " Unsupported event types: [" + W.bindings.unsupportedEventTypes.join(", ") + "]." : "")), N.timeEnd("bindPageEvents") }, registerEventBinding: function (e) { var n = e.target || M.document.body; if (_.isUndefined(n) || null == n) N.log("Couldn't register '" + e.type + "' handler on a non-existing element.", e); else try { W.handleElementsEvents(n, e) } catch (n) { N.log("Failed binding '" + e.type + "'. Error: " + n.message, n), M.console && console.error(n) } }, handleElementsEvents: function (n, e) { var t = e.type; if (_.contains(O.eventTypes, t)) if (N.isEventSupported(t)) { var r = W.createHandler(e); N.addEventHandler(n, t, r, !0), W.bindings.registered.push({ type: t, el: n, handler: r }) } else W.bindings.unsupportedEventTypes.push(t) }, createHandler: function (e) { var n = function (n) { if (Ln.bounceAll(n.type), W.handleDOMEvent(n, e), "beforeunload" !== n.type) return !0 }; if (0 < (e.debounceBy || 0)) { var t = Ln[e.type]; t ? n = t(n, e.debounceBy).debouncedHandler : N.log("WARN: event de-bouncing for type '" + e.type + "' is not supported.") } return n }, handleDOMEvent: function (e, n) { try { if (e = e || M.event, !_.isUndefined(e._cls_handled) && !0 === e._cls_handled) return void N.log("WARN: handler already handled this event. skipping..", e); e._cls_handled = !0, N.time("handleDOMEvent_" + e.type); var t = N.extractElementFromEvent(e), r = N.getElementId(t); E.ignorableElementIds && _.contains(E.ignorableElementIds, r) || W.handleEvent(e, t, n), N.timeEnd("handleDOMEvent_" + e.type) } catch (n) { N.log("ERROR: while handling " + e.type + " DOM event ", e, " Exception: ", n.stack ? n.stack : n.message), W.saveClsDebugErrorEvent("handleDOMEvent", n, "event type=" + e.type) } }, handleEvent: function (n, e, t) { if (!_.isFunction(t.filter) || !t.filter(e, n)) { var r = N.currentTimestamp(), i = n.type; N.time("handleEvent_" + i); var o = W.createEventObject(i, r, e); o.domEvent = n; var a = !_.isUndefined(t.dontSendElement) && !0 === t.dontSendElement; if (o.selectorExpression = a ? O.encoding.rootSelector : F.getSelectorExpression(e) || O.encoding.rootSelector, o.binding = t, _.isUndefined(t.encodeValue) || !1 !== t.encodeValue || (o.shouldEncodeValue = !1), _.isUndefined(t.dependent) || !0 !== t.dependent || (o.dependent = !0), W.extractValue(o, t), W.extractExternalId(o, e), W.interceptReport(o, t), E.reportVisualNames && o.report && !a) { var u = W.extractVisualName(e); u && o.setExtraInfo(ue.prototype.VISUAL_NAME, u) } W.autoMaskingSignaled && (o.setExtraInfo(ue.prototype.AUTO_MASKING, !0), W.autoMaskingSignaled = !1), W.saveEvent(o), S.emit("event:" + o.type, o), N.timeEnd("handleEvent" + i) } }, createEventObject: function (n, e, t) { return new ue(n, e, t, W.page.id) }, onDomReady: function () { k.addEventListener ? k.removeEventListener("DOMContentLoaded", W.onDomReady, !1) : k.detachEvent("onreadystatechange", W.onDomReady), S.emit("init:domready") }, onAutoMaskingApplied: function (n) { N.log("auto masking was applied on element: " + n.tagName + " [id=" + n.id + "]"), W.autoMaskingSignaled = !0 }, addDomReadyEventHandler: function () { "complete" !== k.readyState && (k.addEventListener ? M.addEventListener("DOMContentLoaded", W.onDomReady, !1) : k.attachEvent("onreadystatechange", W.onDomReady)) }, extractValue: function (e, n) { try { if (!_.isUndefined(n.valueExtraction)) { var t = n.valueExtraction(e.domEvent, e.element); _.isUndefined(t) || null == t || (e.value = t) } } catch (n) { N.log("Failed extracting value for event " + e.type + " - " + n.name + ": " + n.message, n), "clsdebug" !== e.type && W.saveClsDebugErrorEvent("extractValue", n, "event type=" + e.type) } }, extractExternalId: function (n, e) { if (e && N.isElement(e) && !_.isUndefined(E.externalIdAttr) && _.isString(E.externalIdAttr) && 0 < E.externalIdAttr.length) { var t = N.getAttributeForElement(e, E.externalIdAttr); null !== t && 0 < t.length && n.setExtraInfo(ue.prototype.EXTERNAL_ID, t) } }, interceptReport: function (e, n) { if (!_.isUndefined(n.interception)) try { e.report = n.interception(e) } catch (n) { N.log("Failed intercepting " + e.type + " event: " + n.message, n, e), "clsdebug" !== e.type && W.saveClsDebugErrorEvent("interceptReport", n, "event type=" + e.type) } }, addEvent: function (n) { W.config.debugMode && W.reports.events.push(n) }, getFocusInEventType: function () { return N.isOldIE() ? "focusin" : "focus" }, getChangeEventType: function () { return N.isOldIE() ? "onfocusout" in k ? "focusout" : "blur" : "change" }, startFocusTiming: function (n) { var e = N.currentTimestamp(), t = W.state.lastFocusData.startTime; W.state.lastFocusData = { element: n, startTime: e, prevFocusStartTime: t } }, endFocusTiming: function (n) { if (W.state.lastFocusData.element === n) { var e = N.currentTimestamp(); W.state.lastFocusData.focusTime = e - W.state.lastFocusData.startTime } else N.trace("Cannot measure focus time because of element mismatch. ") }, filterNonTypableElements: function (n, e) { return null === n || (W.isChangebleElement(n) && ("focus" === e.type || "focusin" === e.type ? W.startFocusTiming(n) : "blur" === e.type && W.endFocusTiming(n)), !W.isTypableElement(n)) }, filterNonChangableEventsElements: function (n, e) { return null === n || null === e || (W.isChangebleElement(n) && W.endFocusTiming(n), "change" !== e.type && !W.isChangebleElement(n)) }, interceptFocusIn: function (n) { return W.checkTypedContentHasChangedAndUpdate(n), !1 }, interceptFocusLost: function (n) { return null !== n && null !== n.element && (W.state.lastFocusData.focusTime && n.setExtraInfo(n.FOCUS_TIME_ATTR, W.state.lastFocusData.focusTime), !!W.isSelectableElement(n.element) || W.checkTypedContentHasChangedAndUpdate(n)) }, interceptBlur: function (n) { return W.state.lastFocusData.focusTime && n.setExtraInfo(n.FOCUS_TIME_ATTR, W.state.lastFocusData.focusTime), W.checkTypedContentHasChangedAndUpdate(n) }, checkTypedContentHasChangedAndUpdate: function (n) { var e = "focus" === n.type || "focusin" === n.type, t = "blur" === n.type || "focusout" === n.type, r = n.selectorExpression, i = n.value; if (null === i || _.isUndefined(i)) return !1; var o = { text: i, markAutoComplete: !1 }, a = W.state.typableElementsLRUMap.set(r, o), u = _.isUndefined(a); if (e && !u && a.text !== i && 0 <= i.toLocaleLowerCase().indexOf(a.text.toLocaleLowerCase()) && (o.markAutoComplete = !0), t && !u && a.markAutoComplete) { var c = W.state.lastFocusData.prevFocusStartTime; if (!_.isUndefined(c) && _.isNumber(c) && W.state.lastFocusData.element === n.element) { var s = N.currentTimestamp() - c; n.setExtraInfo(n.FOCUS_TIME_ATTR, s) } else N.log("Unable to compute total auto-complete time"), n.setExtraInfo(n.FOCUS_TIME_ATTR, -1); return n.setExtraInfo(n.AUTO_COMPLETE_ATTR, !0), !0 } return u || a.text !== i }, isMouseEvent: function (n) { return n === O.mouseEvents.down || n === O.mouseEvents.up }, isTouchEvent: function (n) { return "touchstart" === n || "touchend" === n || "touchmove" === n }, interceptMouseEnter: function (n) { if (W.state.mouseEnterReported) return !1; var e = N.getCoordinate(n.domEvent); return n.setExtraInfo(ue.prototype.COORDINATE_ATTR, e), W.removeEventBinding("mouseenter"), W.state.mouseEnterReported = !0, W.page.hasTouch && !W.touchDetected && N.isChromeDesktop() && (W.switchTouchToMouse(), W.page.hasTouch = !1), !0 }, switchTouchToMouse: function () { N.log("Mouse Detected. Switch touch event to mouse events"), W.removeEventBinding("touchstart"), N.isHybridAndroid() ? W.removeEventBinding("touchmove") : W.removeEventBinding("touchend"); var n = [{ type: O.mouseEvents.down, interception: W.interceptClickStart, target: k, logicalName: "mousedown" }, { type: O.mouseEvents.up, interception: W.interceptClickEnd, valueEncoding: q.encodeClickDetails, target: k, logicalName: "mouseup" }]; W.bindPageEvents(n) }, filterHovers: function (e, n) { try { if ("undefined" == typeof jQuery || _.isUndefined(jQuery) || _.isUndefined(jQuery._data)) return !0; for (var t = e, r = 1, i = _.isNumber(E.mhDeepLevel) ? E.mhDeepLevel : 1; null !== t && t !== k.body && r <= i;) { var o = jQuery._data(t, "events"); if (o && o.mouseover && 0 < o.mouseover.length) return E.mhDebug && N.log("++ Hover adding element(level-" + r + ") " + (t.id ? t.id : ""), t), W.addHoverElement(t), !0; r++ , t = t.parentElement } } catch (n) { N.log("Exception while extracting hover information for element : ", e, n.message, n), W.saveClsDebugErrorEvent("filterHovers", n, "element=" + (e ? e.nodeName : "null")) } return !0 }, addHoverElement: function (n) { W.state.hover.hoverElementList.length < E.mhMaxInMemeoryHovers ? (W.state.hover.hoverElementList.push(n), W.state.hover.hoverStartTimestamp = N.currentTimestamp()) : N.log("warn: exceed size of hover elements (>100). skipping..") }, cleanHoverElements: function () { E.mhDebug && N.log("Hover cleaning"), W.state.hover.hoverElementList = [], W.state.hover.hoverStartTimestamp = 0 }, filterResize: function () { return N.isOldIE() }, interceptResize: function (n) { var e = N.getWindowSize(), t = N.getScreenSize(), r = !1; return null === e || null === W.state.lastSizes.window || W.state.lastSizes.window.width === e.width && W.state.lastSizes.window.height === e.height || (W.state.lastSizes.window = e, r = !0), null === t || null === W.state.lastSizes.screen || W.state.lastSizes.screen.width === t.width && W.state.lastSizes.screen.height === t.height || (W.state.lastSizes.screen = t, r = !0), M.devicePixelRatio !== W.state.lastSizes.dpr && (M.devicePixelRatio > W.state.lastSizes.dpr ? n.setExtraInfo(n.ZOOM, W.zoomType.IN) : n.setExtraInfo(n.ZOOM, W.zoomType.OUT), W.state.lastSizes.dpr = M.devicePixelRatio), n.value = W.state.lastSizes, r }, interceptMouseOver: function (n) { return !1 }, interceptClickStart: function (n) { if (W.botDetector.isActive() && W.isMouseEvent(n.type) && W.botDetector.notifyMouseAction(n.domEvent), W.isTouchEvent(n.type) && (W.touchDetected = !0), E.recordHovers && W.saveHoverEvent(), W.state.clickStart = W.createClickDetailsObject(n), n.setExtraInfo(ue.prototype.COORDINATE_ATTR, W.state.clickStart), !_.isUndefined(n.element)) { var e = N.getElementXYCoordinates(n.element); e && n.setExtraInfo(ue.prototype.SYNC_COORDINATE, e) } return N.isHybrid() && n.addHybridActionDataItem("start", { x: W.state.clickStart.x, y: W.state.clickStart.y }), !0 }, interceptClickEnd: function (n) { W.botDetector.isActive() && W.isMouseEvent(n.type) && W.botDetector.notifyMouseAction(n.domEvent); var e = { start: W.state.clickStart, end: W.createClickDetailsObject(n) }; if (!(_.isNumber(e.start.x) && _.isNumber(e.start.y))) return N.log("Dragging event with no captured click start."), !1; var t = Math.abs(e.end.x - e.start.x) > E.minDragPixels || Math.abs(e.end.y - e.start.y) > E.minDragPixels; if (t) { n.type = "drag", e.duration = e.start.timestamp ? n.timestamp - e.start.timestamp : -1, n.value = e; var r = N.getElementXYCoordinates(e.start.elementObj); r && n.setExtraInfo(ue.prototype.SYNC_COORDINATE, r), N.isHybrid() && (n.addHybridActionDataItem("start", { x: e.start.x, y: e.start.y }), n.addHybridActionDataItem("end", { x: e.end.x, y: e.end.y })) } return W.state.clickStart = {}, t }, interceptError: function (n) { return n.value && 0 < n.value.length }, interceptUnload: function (n) { N.time("unload"), N.log("Unloading..."), W.state.unloading = !0, W.segmentManager.onUnload(); var e = N.currentTimestamp(); W.page.hasTimingAPI || (sessionStorage["gb.lastReferrer"] = q.encodeNumber(e) + "_" + N.Base64.encode(W.page.urlWithoutHash)); var t = e - W.page.initializationTimestamp; return n.setExtraInfo(n.FOCUS_TIME_ATTR, t), n.setExtraInfo(n.SCROLL_REACH, Math.round(W.state.maxScrollReach)), W.debugHelper.visitUnloadEvent(n), N.timeEnd("unload"), n.timestamp = e, !0 }, updateScrollReach: function () { W.state.maxScrollReach = Math.max(W.state.maxScrollReach, N.getCurrentScrollReach()) }, interceptScroll: function (n) { return "#document" === n.element.nodeName && W.updateScrollReach(), !0 }, filterScrollElements: function (n, e) { return !(null != n && "MARQUEE" !== n.nodeName) }, interceptMouseMove: function (n) { return n.lastSingleMoveTimestamp = n.timestamp, n.setExtraInfo(n.FOCUS_TIME_ATTR, 0), !0 }, createClickDetailsObject: function (n) { var e = N.getCoordinate(n.domEvent); return e.elementObj = n.element, e.el = n.selectorExpression, e.timestamp = n.timestamp, e }, shouldListenToKeyEvents: function () { return E.recordEnterForInputs || W.recordAutoCompleteRelatedChars() }, recordAutoCompleteRelatedChars: function () { return void 0 === W.acCharsSupport && (W.acCharsSupport = E.recordTypingAll || E.supportNativeAutoComplete || E.recordTypingForAttrs && 0 < E.recordTypingForAttrs.length || E.recordTypingForClasses && 0 < E.recordTypingForClasses.length || E.recordTypingForIDs && 0 < E.recordTypingForIDs.length), W.acCharsSupport }, resolveKeyData: function (n) { var e = n.domEvent, t = n.element.value, r = n.element, i = e.keyCode || e.charCode; n.value = { unicode: i }; var o = B.isCensored(r); return "keypress" === n.type ? 13 !== i && 8 !== i && ("0" !== e.charCode && (o ? n.value = { unicode: 42 } : _.isUndefined(t) || null === t || (n.value.content = t + String.fromCharCode(i)), !0)) : "keydown" === n.type && (38 === i || 40 === i || 13 === i ? (o || (n.value.content = n.element.value), !0) : 8 === i && !_.isUndefined(t) && null !== t && !o && (n.value.content = 0 < t.length ? t.substring(0, t.length - 1) : "", !0)) }, interceptKeyboard: function (n) { var e = n.element; if (!(e && ("INPUT" === e.nodeName || "BUTTON" === e.nodeName))) return !1; var t, r = 13 === (n.domEvent.keyCode || n.domEvent.charCode); if (n.shouldEncodeValue = !1, r && E.recordEnterForInputs) return W.resolveKeyData(n); if (E.supportNativeAutoComplete && (e.hasAttribute("autocomplete") || e.hasAttribute("aria-autocomplete") && "none" !== e.getAttribute("aria-autocomplete") || e.hasAttribute("class") && _.contains(e.getAttribute("class"), "autocomplete"))) return W.resolveKeyData(n); if (E.recordTypingAll) return W.resolveKeyData(n); if (E.recordTypingForAttrs && 0 < E.recordTypingForAttrs.length) for (t = 0; t < E.recordTypingForAttrs.length; t++)if (e.hasAttribute(E.recordTypingForAttrs[t])) return W.resolveKeyData(n); if (e.hasAttribute("class") && E.recordTypingForClasses && 0 < E.recordTypingForClasses.length) for (t = 0; t < E.recordTypingForClasses.length; t++)if (_.contains(e.getAttribute("class"), E.recordTypingForClasses[t])) return W.resolveKeyData(n); var i = N.getElementId(e); if (i && E.recordTypingForIDs && 0 < E.recordTypingForIDs.length) for (t = 0; t < E.recordTypingForIDs.length; t++)if (i === E.recordTypingForIDs[t]) return W.resolveKeyData(n); return !1 }, recordAjaxResource: function (n) { W.addResource("ajax", n.url, n.timestamp) }, addResource: function (n, e, t) { var r = new oe(n, e, t); return W.reports.resources.push(r), S.emit("timingResource", r), r }, saveEvent: function (n) { if (!W.blackoutManager.isUnderBlackout() && !this.state.stopped) { var e = W.renameEventType(n); if (W.addEvent(n), V.setRegisteredDebugInfoOnEvent(n), E.debugMode && (n.report || E.traceMode)) { var t = n.type === e ? n.type : n.type + "(" + e + ")", r = !_.isUndefined(n.selectorExpression) && n.selectorExpression !== O.encoding.rootSelector && "#document" !== n.selectorExpression; W.shouldLog(n.type) && N.log("saving event: " + t + (r ? " -> " + n.selectorExpression : "") + W.eventValueToString(n) + (n.report ? "" : " [not reported]"), n) } n.report && (W.pendingPageEventsEmitted ? S.emit("saveEvent", n) : W.pendingPageEvents.push(n)) } }, shouldLog: function (n) { return "mousemove" === n ? !E.suppressMouseMovesDebug || E.mmDebug : "scroll" !== n || E.scrollDebug }, renameEventType: function (n) { var e = n.type; return _.isUndefined(n.binding) || _.isUndefined(n.binding.logicalName) || "drag" === n.type || (n.type = n.binding.logicalName), e }, eventValueToString: function (n) { var e = " {V=" + (n.value || "NONE"); if (n.extraInfo) for (var t in n.extraInfo) n.extraInfo.hasOwnProperty(t) && (e = e + "," + t + "=" + n.extraInfo[t]); return null === n.getDebugInfo() || _.isUndefined(n.getDebugInfo()) || (e = e + ",DI-" + n.getDebugInfo().code), e += "}" }, saveDocumentLoadEvent: function (n) { var e = W.createEventObject("document", n, null); e.value = W.page, e.binding = { valueEncoding: q.encodePageDetails }, e.shouldEncodeValue = !1, W.page.title = W.getPageTitle(), W.page.title && e.setExtraInfo(ue.prototype.VISUAL_NAME, W.page.title), e.setExtraInfo(ue.prototype.WINDOW_DEPTH, mn.tryGetCurrentDepth(M)), e.setExtraInfo(ue.prototype.HISTORY_LENGTH, history.length), E.mobileHybridId && e.setExtraInfo(ue.prototype.MOBILE_HYBRID_ID, E.mobileHybridId), E.debounceScrolls && e.setExtraInfo(ue.prototype.SCROLL_DEBOUNCED, !0), W.documentEvent = e; var t = function () { W.saveEvent(e), S.emit("event:document") }; this.debugHelper.visitLoadEvent(e); W.documentEventHook ? W.documentEventHook(e, t) : t() }, savePageUpdate: function () { var n = W.createEventObject("pageUpdate", N.currentTimestamp(), null); W.saveEvent(n) }, onConsoleError: function (n) { var e = W.createEventObject("error", N.currentTimestamp(), null); e.value = n.join(" "), e.shouldEncodeValue = !0, W.saveEvent(e) }, saveTitleChanged: function () { var n = W.createEventObject("titleChanged", N.currentTimestamp(), null); n.value = k.title, n.shouldEncodeValue = !0, W.saveEvent(n) }, saveSegmentChangedEvent: function (n) { var e = W.createEventObject("segmentChanged", N.currentTimestamp(), null); e.value = n, e.shouldEncodeValue = !1, e.binding = { valueEncoding: q.encodeSegmentChanged }, W.saveEvent(e), W.plugins.domRecordingPlugin && W.plugins.domRecordingPlugin.isStarted() && setTimeout(function () { W.savePageUpdate() }, 0) }, saveLastSegmentEvent: function (n) { var e = W.createEventObject("lastSegment", N.currentTimestamp(), null); e.value = n, e.shouldEncodeValue = !1, e.binding = { valueEncoding: q.encodeSegmentChanged }, W.saveEvent(e) }, savePageSnapshotEvent: function (n) { var e = W.useCurrentTimeForPagesnapshot ? N.currentTimestamp() : W.page.initializationTimestamp, t = W.createEventObject("pageSnapshot", e, null); t.value = n, t.binding = { valueEncoding: q.encodePageSnapshotData }, t.shouldEncodeValue = !1, W.saveEvent(t) }, saveAjaxRequestEvent: function (n) { var e = W.createEventObject("ajaxRequest", n.startedAt || N.currentTimestamp(), null); n.ajaxUrls = W.ajaxUrls, e.value = n, e.element = n.lastFocusedElement, e.selectorExpression = F.getSelectorExpression(n.lastFocusedElement) || O.encoding.rootSelector, e.binding = { valueEncoding: q.encodeAjaxRequest }, e.shouldEncodeValue = !1, W.saveEvent(e) }, saveClsDebugErrorEvent: function (n, e, t) { var r = W.formatClsDebugMessage(n, e, t); if (0 !== r.length) { var i = W.createEventObject("clsdebug", N.currentTimestamp(), null); i.value = r, W.saveEvent(i) } }, formatClsDebugMessage: function (n, e, t) { if (W.state.clsDebugCounter >= E.clsDebugMaxReports) return ""; W.state.clsDebugCounter++; var r = e ? e.stack ? e.stack : e.name + ": " + e.message : ""; return "CLS Error in " + n + " " + (t ? "{" + t + "} " : "") + (0 < (r = N.truncateStr(r, E.clsDebugCharsLimit, !0)).length ? ": " + r : "") }, eventSaver: function (t, r) { return function (n) { var e = W.createEventObject(t, N.currentTimestamp(), null); e.value = n, e.binding = { valueEncoding: r }, e.shouldEncodeValue = !1, W.saveEvent(e) } }, saveValidationError: function (n) { var e = W.createEventObject("formValidationError", N.currentTimestamp(), null); e.element = n.element, e.value = n.message, e.selectorExpression = n.selector, W.saveEvent(e) }, saveHoverEvent: function () { var n = W.createEventObject("hover", W.state.hover.hoverStartTimestamp, null); 0 !== W.state.hover.hoverElementList.length ? (E.mhDebug && N.log("saving " + W.state.hover.hoverElementList.length + " hovers"), n.value = W.state.hover.hoverElementList, W.cleanHoverElements(), n.binding = { valueEncoding: q.encodeHoverEvent }, n.shouldEncodeValue = !1, W.saveEvent(n)) : E.mhDebug && N.log("no hovers to report") }, saveCustomEvent: function (n) { var e = W.createEventObject("custom", N.currentTimestamp(), null); e.value = n, !_.isUndefined(n.domEl) && N.isDOMElement(n.domEl) && (e.element = n.domEl, e.selectorExpression = F.getSelectorExpression(n.domEl) || O.encoding.rootSelector), e.binding = { valueEncoding: q.encodeKeyValue }, e.shouldEncodeValue = !1, W.saveEvent(e) }, saveThirdPartyMapEvent: function (n) { var e = W.createEventObject("thirdpartymap", N.currentTimestamp(), null); e.value = n.value, e.binding = { valueEncoding: q.encodeKVMap }, n.type && e.setExtraInfo(ue.prototype.TP_INTEGRATION_TYPE, n.type), n.element && (e.element = n.element, e.selectorExpression = F.getSelectorExpression(n.element) || O.encoding.rootSelector), e.shouldEncodeValue = !1, W.saveEvent(e) }, saveResourceDataEvent: function (n) { var e = W.createEventObject("resourceContent", N.currentTimestamp(), null); e.value = n, e.binding = { valueEncoding: q.encodeResourceContent }, e.shouldEncodeValue = !1, W.saveEvent(e) }, saveCorsDeniedDataEvent: function (n) { var e = W.createEventObject("corsDeniedResource", N.currentTimestamp(), null); e.value = n, W.saveEvent(e) }, saveClientAttributeEvent: function (n) { var e = W.createEventObject("clientAttribute", N.currentTimestamp(), null); e.value = n, e.binding = { valueEncoding: q.encodeKeyValue }, e.shouldEncodeValue = !1, W.saveEvent(e) }, savePerformanceDataEvent: function (n) { var e = W.createEventObject("waterfall", N.currentTimestamp(), null); e.value = n, e.binding = { valueEncoding: q.encodeWaterfallTiming }, e.shouldEncodeValue = !1, W.saveEvent(e) }, initializePageDetails: function () { N.time("initializePageDetails"); var n = W.page; n.initializationTimestamp = N.currentTimestamp(), n.id = N.uuid(), n.frame = M.self != top, n.frame && (n.referrerWithoutHash = N.getReferrerUrlWithoutHash()); var e = N.getLocationUrlSplitByHash(); n.url = e.url, n.urlWithoutHash = e.withoutHash, n.hash = e.hash, n.hasTouch = N.hasTouch(), n.hasTimingAPI = N.hasTimingAPI(), n.title = W.getPageTitle(), N.timeEnd("initializePageDetails") }, getPageTitle: function () { return N.truncateStr(k.title, E.titleCharsLimit, !0) }, resolvePageLoadTime: function (n) { if (n.hasTimingAPI) W.acquirePerformanceTiming(); else { var e = sessionStorage["gb.lastReferrer"]; if (e) { var t = k.referrer.replace(/#.*/, ""), r = e.split("_"), i = N.Base64.decode(r[1]); if (t === i) { var o = parseInt(r[0], 36); n.timing.total = n.loadTimestamp - o, W.saveTimingEvent({ page: n.timing }) } else N.log("Referrer does not match referrer stored in timing cookie: " + t + " != " + i) } } }, saveTimingEvent: function (n) { var e = W.createEventObject("timing", N.currentTimestamp(), M.document); e.value = n, e.binding = { valueEncoding: q.encodeTimings }, W.page.title && e.setExtraInfo(ue.prototype.VISUAL_NAME, W.page.title), W.saveEvent(e) }, savePerformanceEvent: function (n) { var e = W.createEventObject("performance", N.currentTimestamp(), M.document); M.performance && M.performance.timing && (e.value = { perf: M.performance, browserTime: n }, e.binding = { valueEncoding: q.encodePerformanceTimings }, W.page.title && e.setExtraInfo(ue.prototype.VISUAL_NAME, W.page.title), e.shouldEncodeValue = !1, W.saveEvent(e)) }, acquirePerformanceTiming: function () { if (0 === M.performance.timing.loadEventEnd) M.setTimeout(W.acquirePerformanceTiming, 300); else { var n = N.currentTimestamp() - W.page.initializationTimestamp; W.savePerformanceEvent(n) } }, setClientCookies: function () { var n = function (n, e, t) { var r, i; if (t.visitorIdByQueryParam || t.sessionIdByQueryParam) { var o = N.parseQuery(n.location.search.substring(1)); r = o[t.sessionIdByQueryParam], i = o[t.visitorIdByQueryParam] } var a, u, c, s, f, l, d, v, h = (s = c = u = !1, (a = i) ? a !== e.get(O.cookies.visitor) && (N.log("using provided visitor ID value: " + a), s = c = !0) : (a = e.get(O.cookies.visitor)) || (c = u = !0, a = N.uuid()), c && (e.set(O.cookies.visitor, a, N.dateFromNow(15768e7)), N.log("set cookie with visitor ID: " + a)), { isNew: u, visitorId: a, corsReset: s }), p = (f = h.isNew, v = d = !1, (l = r) ? l !== e.get(O.cookies.session) && (N.log("using provided session ID value: " + l), v = d = !0) : (l = e.get(O.cookies.session)) || (l = N.uuid() + ":" + (f ? "0" : "1"), d = !0), d && (e.set(O.cookies.session, l), N.log("Set cookie with session ID: " + l)), { sessionId: l, corsReset: v }); return { sessionId: p.sessionId, visitorId: h.visitorId, corsReset: p.corsReset || h.corsReset } }(k, U, E); L.isCorsReporting() && n.corsReset && void 0 !== rn && rn.forceCorsReset(), this.visitorId = n.visitorId, this.sessionId = n.sessionId, S.emit("api:updateFields") }, registerPlugin: function (n, e) { W.plugins[n] = e }, removeEventBinding: function (n) { for (var e = -1, t = 0; t < W.bindings.registered.length; t++) { var r = W.bindings.registered[t]; r.type === n && (N.removeEventHandler(r.el, n, r.handler), e = t) } 0 <= e && W.bindings.registered.splice(e, 1) }, removeBindings: function () { _.forEach(W.bindings.registered, function (n) { N.removeEventHandler(n.el, n.type, n.handler) }), W.bindings.registered = [], W.bindings.unsupportedEventTypes = [], N.log("Cleared detector bindings.") }, getEncoder: function () { return q }, supportModeOn: function (n) { n = n || !1, W.applySupportMode(), n && P.set("supportMode", !0) }, isSupportModeSession: function () { return void 0 !== U.get(O.cookies.supportMode) || P.get("supportMode") }, checkSupportModeSession: function () { W.isSupportModeSession() && W.applySupportMode() }, applySupportMode: function () { E.reportAllOnUnload = !1 }, asStoppable: function () { var e = this; return { isStopped: function (n) { return n && (e.state.stopped = "true" === P.get("stopped")), e.state.stopped }, start: function () { return !!e.state.stopped && (e.state.stopped = !1, P.remove("stopped"), !0) }, stop: function () { return !e.state.stopped && (e.state.stopped = !0, S.emit("recordingStopped"), P.set("stopped", "true"), !0) } } } }; oe.prototype.toString = function () { return this.url }, ae.prototype.toString = function () { return "(" + this.x + "," + this.y + ")" }; var G = { inMemoryMovesCounter: 0, notifyEventsFlush: function () { G.inMemoryMovesCounter = 0 }, hasDomUpdate: function (n) { return n.domSnapshot && n.domSnapshot.domChanges }, diluteEvents: function (n, e) { var t = _.last(n); if (!_.isUndefined(t)) { if ("resize" === e.type) return "resize" === t.type && G.removeEventToReport(n, t), !0; if ("scroll" === e.type) { if ("scroll" === t.type || W.page.hasTouch && "drag" === t.type) return e.timestamp - t.timestamp > E.minStallingScrollTime || (e.selectorExpression = t.selectorExpression, G.removeEventToReport(n, t), E.scrollDebug && N.trace("Diluted " + t.type + " event:", t)), !0; if ("mousemove" === t.type && 1 === t.value.length && 2 <= n.length) { var r = n[n.length - 2]; if ("scroll" === r.type) { if (e.timestamp - r.timestamp > E.minStallingScrollTime) return !0; e.selectorExpression = r.selectorExpression, G.removeEventToReport(n, t), G.removeEventToReport(n, r), E.scrollDebug && N.trace("Diluted scroll & mousemove event (mousewheel rolling)"), G.inMemoryMovesCounter-- } } return !0 } if ("mousemove" === e.type && "mousemove" === t.type) { var i = E.reportByPost ? 3e3 : E.mmMaxMovesInEventWithTimes, o = E.reportByPost ? 3e3 : E.mmMaxMovesInEventNoTimes; return E.mmRecordTimes && t.value.length >= i || !E.mmRecordTimes && t.value.length >= o ? (E.mmDebug && N.log("Too much moves in an event: " + t.value.length + ". Starting a new move event."), G.inMemoryMovesCounter++ , !0) : !_.isUndefined(E.mmMinStallingMoveTime) && e.timestamp - t.lastSingleMoveTimestamp > E.mmMinStallingMoveTime ? (E.mmDebug && N.log("Identified mouse move stalling: " + (e.timestamp - t.lastSingleMoveTimestamp) + " ms. Starting a new move event."), G.inMemoryMovesCounter++ , !0) : G.checkExceededInMemoryMoves() ? (E.mmDebug && N.log("Exceeded in memory mouse moves (" + E.mmMaxInMemoryMoves + ") ignoring..."), !1) : (G.removeEventToReport(n, t), G.diluteMoveEvents(t, e) && G.inMemoryMovesCounter++ , !0) } } return "mousemove" === e.type && G.inMemoryMovesCounter++ , !0 }, removeEventToReport: function (n, e) { G.hasDomUpdate(e) || n.splice(_.indexOf(n, e), 1) }, checkExceededInMemoryMoves: function () { var n = E.reportByPost ? 3e3 : E.mmMaxInMemoryMoves; return G.inMemoryMovesCounter >= n }, diluteMoveEvents: function (n, e) { var t = _.last(n.value), r = e.value[0], i = e.timestamp - n.lastSingleMoveTimestamp, o = n.getExtraInfo(n.FOCUS_TIME_ATTR); return Math.abs(t.x - r.x) > E.mmDiluteMinPixels || Math.abs(t.y - r.y) > E.mmDiluteMinPixels ? (o += r.t = i, e.setExtraInfo(e.FOCUS_TIME_ATTR, o), e.timestamp = n.timestamp, n.value.push(r), e.value = n.value, E.mmDebug && N.log("updated mousemove value" + e.value), !0) : (e.setExtraInfo(e.FOCUS_TIME_ATTR, o), e.timestamp = n.timestamp, e.value = n.value, e.lastSingleMoveTimestamp = n.lastSingleMoveTimestamp, E.mmDebug && N.log("Diluting mousemove less than " + E.mmDiluteMinPixels + " pixels: " + r), !1) }, truncateEventsForUnload: function (n) { for (var e = [], t = E.mmMaxMovesWithUnload, r = 0, i = !1, o = 0; o < n.length; o++) { var a = n[o]; if ("mousemove" === a.type) { if (r >= E.mmMaxMovesWithUnload) { N.trace(E.mmMaxMovesWithUnload + " moves limit exceeded. dropping mousemove event from unload report... (" + r + " moves dropped)"), i = !0; continue } var u = a.value.length, c = G.truncateMouseMoveEvent(a, t - r); r += c, c < u && (i = !0) } "unload" === a.type && i && a.setExtraInfo(a.MOVES_TRUNCATED, !0), e.push(a) } return e }, truncateMouseMoveEvent: function (n, e) { var t = n.value.length; return t < e ? t : (N.trace("truncating mousemove on unload (" + t + " > " + e + " moves)"), n.value = n.value.slice(0, e), e) } }; W.checkElementChangebility = function (n) { var e = n.nodeName, t = n.type, r = !1, i = !1; switch (e) { case "SELECT": i = !0; break; case "TEXTAREA": r = !0; break; case "INPUT": if (null === t) break; switch (t) { case "checkbox": case "radio": i = !0; break; case "text": case "password": case "number": case "file": case "url": case "search": case "email": case "date": case "time": case "tel": case "range": case "month": case "week": case "datetime": case "datetime-local": case "color": r = !0 } }return { isTypable: r, isSelectable: i } }, W.isTypableElement = function (n) { return W.checkElementChangebility(n).isTypable }, W.isSelectableElement = function (n) { return W.checkElementChangebility(n).isSelectable }, W.isChangebleElement = function (n) { return W.isTypableElement(n) || W.isSelectableElement(n) }, void 0 !== W && function (n, o) { n = n || {}; var a = N.immutableSet("password", "text", "number", "file", "url", "search", "email", "date", "time", "tel", "range", "month", "week", "datetime", "datetime-local", "color", "radio"); n.extractElementValue = function (n, e) { var t = e.nodeName; if ("INPUT" === t) { var r = e.type; if (a[r]) return o.censor(e); if ("checkbox" === r) return e.checked ? "true" : "false" } else { if ("TEXTAREA" === t) return o.censor(e); if ("SELECT" === t) { var i = e.options; if (!_.isUndefined(i) && "number" == typeof i.length && 0 < i.length) { if (!_.isUndefined(e.multiple) && e.multiple) return "[" + function (n) { for (var e = [], t = 0; t < n.length; t++) { var r = n[t]; r.selected && e.push(o.censor(r, !0)) } return e }(i).join(",") + "]"; if (!_.isUndefined(e.selectedIndex) && !_.isUndefined(i[e.selectedIndex])) return o.censor(i[e.selectedIndex], !0) } } } }, n.extractElementSource = function (n, e) { var t = e.src || e.href; return _.isUndefined(t) || null == t ? void 0 : t }, n.extractLocationHash = function (n, e) { return N.getLocationUrlSplitByHash().hash }, n.extractScrollValue = function (n, e) { if ("#document" === e.nodeName) { var t = N.getScrollTopLeft(); return new ae(t.left, t.top) } return new ae(e.scrollLeft, e.scrollTop) }, n.extractMouseMoveValue = function (n, e) { return [N.getCoordinate(n)] }, n.extractErrorValue = function (n, e) { var t = ""; return "string" == typeof n.message && (t += n.message), "string" == typeof n.url ? t += "; URL: " + n.url : "string" == typeof n.filename && (t += "; FILE: " + n.filename), "number" == typeof n.lineno && (t += "; L: " + n.lineno), "number" == typeof n.colno && (t += "; C: " + n.colno), t } }(W, B), ue.prototype = { toString: function () { return this.type }, setExtraInfo: function (n, e) { _.isUndefined(e) ? N.log("Failed setting value for extra info attribute: " + n + ". Value is undefined") : (_.isUndefined(this.extraInfo) && (this.extraInfo = {}), this.extraInfo[n] = e) }, getExtraInfo: function (n) { if (_.isUndefined(this.extraInfo)) return null; var e = this.extraInfo[n]; return void 0 === e ? null : e }, setDebugInfo: function (n) { _.isUndefined(this.debugInfo) && (this.debugInfo = {}), this.debugInfo = n }, getDebugInfo: function () { return this.debugInfo }, getSubPage: function () { return this.subPage }, addHybridActionDataItem: function (n, e) { _.isUndefined(e) ? N.log("Failed setting value for hybrid action data item: " + n + ". Value is undefined") : (_.isUndefined(this.hybridActionData) && (this.hybridActionData = {}), this.hybridActionData[n] = e) }, getdHybridActionData: function () { return this.hybridActionData }, ofSameSegment: function (n) { return this.referrer === n.referrer && this.subPage === n.subPage } }, ue.prototype.FOCUS_TIME_ATTR = "focusTime", ue.prototype.AUTO_COMPLETE_ATTR = "autoComplete", ue.prototype.VISUAL_NAME = "visualName", ue.prototype.WINDOW_DEPTH = "windowDepth", ue.prototype.CONTAINER_ID = "containerId", ue.prototype.PARENT_PAGE_ID = "parentPageId", ue.prototype.HISTORY_LENGTH = "historyLen", ue.prototype.TIME_SINCE_LAST_EVENT = "timeSinceLastIdle", ue.prototype.COORDINATE_ATTR = "coordinate", ue.prototype.SCROLL_REACH = "scrollReach", ue.prototype.MOVES_TRUNCATED = "truncated", ue.prototype.LOST_EVENTS_NUM = "lostEvents", ue.prototype.TP_INTEGRATION_TYPE = "tpIntegrationType", ue.prototype.EXTERNAL_ID = "externalId", ue.prototype.SYNC_COORDINATE = "syncCoordinates", ue.prototype.ZOOM = "zoom", ue.prototype.MOBILE_HYBRID_ID = "mobileHybridId", ue.prototype.DETECTOR_CONFIG_ID = "detectorCfg", ue.prototype.AUTO_MASKING = "autoMasking", ue.prototype.SCROLL_DEBOUNCED = "scrollDebounced", ue.prototype.extraInfoAttrs = [{ name: ue.prototype.FOCUS_TIME_ATTR, encodeName: "ft", encodeFunc: q.encodeNumber, encodeCode: O.dictionary.encodeEncodingType("cd_number") }, { name: ue.prototype.AUTO_COMPLETE_ATTR, encodeName: "ac", encodeFunc: q.encodeBoolean, encodeCode: O.dictionary.encodeEncodingType("cd_boolean") }, { name: ue.prototype.VISUAL_NAME, encodeName: "vn", encodeFunc: q.encodeString, encodeCode: O.dictionary.encodeEncodingType("cd_string") }, { name: ue.prototype.WINDOW_DEPTH, encodeName: ue.prototype.WINDOW_DEPTH, encodeFunc: q.encodeNumber, encodeCode: O.dictionary.encodeEncodingType("cd_number") }, { name: ue.prototype.CONTAINER_ID, encodeName: ue.prototype.CONTAINER_ID, encodeFunc: q.encodeString, encodeCode: O.dictionary.encodeEncodingType("cd_string") }, { name: ue.prototype.PARENT_PAGE_ID, encodeName: ue.prototype.PARENT_PAGE_ID, encodeFunc: q.encodeString, encodeCode: O.dictionary.encodeEncodingType("cd_string") }, { name: ue.prototype.HISTORY_LENGTH, encodeName: ue.prototype.HISTORY_LENGTH, encodeFunc: q.encodeNumber, encodeCode: O.dictionary.encodeEncodingType("cd_number") }, { name: ue.prototype.TIME_SINCE_LAST_EVENT, encodeName: "tl", encodeFunc: q.encodeNumber, encodeCode: O.dictionary.encodeEncodingType("cd_number") }, { name: ue.prototype.COORDINATE_ATTR, encodeName: "co", encodeFunc: q.encodeCoordinate64, encodeCode: O.dictionary.encodeEncodingType("cd_coordinate") }, { name: ue.prototype.SCROLL_REACH, encodeName: "sr", encodeFunc: q.encodeNumber, encodeCode: O.dictionary.encodeEncodingType("cd_number") }, { name: ue.prototype.MOVES_TRUNCATED, encodeName: "tr", encodeFunc: q.encodeBoolean, encodeCode: O.dictionary.encodeEncodingType("cd_boolean") }, { name: ue.prototype.LOST_EVENTS_NUM, encodeName: "le", encodeFunc: q.encodeNumber, encodeCode: O.dictionary.encodeEncodingType("cd_number") }, { name: ue.prototype.TP_INTEGRATION_TYPE, encodeName: "tp", encodeFunc: q.encodeString, encodeCode: O.dictionary.encodeEncodingType("cd_string") }, { name: ue.prototype.EXTERNAL_ID, encodeName: "ei", encodeFunc: q.encodeString, encodeCode: O.dictionary.encodeEncodingType("cd_string") }, { name: ue.prototype.SYNC_COORDINATE, encodeName: "sy", encodeFunc: q.encodeCoordinate64, encodeCode: O.dictionary.encodeEncodingType("cd_coordinate") }, { name: ue.prototype.ZOOM, encodeName: "zo", encodeFunc: q.encodeNumber, encodeCode: O.dictionary.encodeEncodingType("cd_number") }, { name: ue.prototype.MOBILE_HYBRID_ID, encodeName: ue.prototype.MOBILE_HYBRID_ID, encodeFunc: q.encodeString, encodeCode: O.dictionary.encodeEncodingType("cd_string") }, { name: ue.prototype.DETECTOR_CONFIG_ID, encodeName: ue.prototype.DETECTOR_CONFIG_ID, encodeFunc: q.encodeString, encodeCode: O.dictionary.encodeEncodingType("cd_string") }, { name: ue.prototype.AUTO_MASKING, encodeName: ue.prototype.AUTO_MASKING, encodeFunc: q.encodeBoolean, encodeCode: O.dictionary.encodeEncodingType("cd_boolean") }, { name: ue.prototype.SCROLL_DEBOUNCED, encodeName: ue.prototype.SCROLL_DEBOUNCED, encodeFunc: q.encodeBoolean, encodeCode: O.dictionary.encodeEncodingType("cd_boolean") }], void 0 !== W && W.registerPlugin("thirdPartyMapInterceptor", new function (n, o, r) { r = r || []; var a = function () { var n, e = !1, t = {}; for (n = 0; n < r.length; n++)0 < r[n].uriContainsTokens.length && 0 < r[n].queryKeys.length && (t[r[n].tagName] = { uriContainsTokens: r[n].uriContainsTokens, queryKeys: N.immutableSet.apply(null, r[n].queryKeys) }, e = !0); return e ? t : D }(), e = !!a, u = 0; function t(n) { var e = N.extractElementFromEvent(n); if (e && a[e.tagName]) { var t = e.src || e.href || "", r = t.split("?")[1]; if (r && function (n, e) { if (!n) return !1; for (var t = 0; t < e.length; t++)if (0 <= n.indexOf(e[t])) return !0; return !1 }(t, a[e.tagName].uriContainsTokens)) { var i = function (n, e) { for (var t, r, i = {}, o = n.split("&"), a = !1, u = 0; u < o.length; u++)if (2 === (t = o[u].split("=")).length) try { if (!e[r = decodeURIComponent(t[0])]) continue; i[r] = decodeURIComponent(t[1]), a = !0 } catch (n) { N.log("failed parsing 3rd-party query string key-value pair: " + o[u], n) } return a ? i : null }(r, a[e.tagName].queryKeys); i && (u++ , N.trace("intercepted third party parameters map for url: " + t), o.emit("thirdPartyMap", i)) } } } this.initialize = function () { e && (N.log("3rd party map interception has started."), N.addEventHandler(n, "load", t, !0)) }, this.isActive = function () { return e }, this.getInterceptedCount = function () { return u } }(k, S, [{ tagName: "IMG", uriContainsTokens: E.reportImageURLContainList || [], queryKeys: E.reportImageKeyList || [] }, { tagName: "SCRIPT", uriContainsTokens: E.reportScriptURLContainList || [], queryKeys: E.reportScriptKeyList || [] }])); var J, K = function () { var u = N.immutableSet.apply(null, E.SCIntegrationKeyList || []); function i() { try { if (this.src && function (n, e) { if (!n) return !1; for (var t = 0; t < e.length; t++)if (0 <= n.indexOf(e[t])) return !0; return !1 }(this.src, E.SCIntegrationURLsContainList)) { N.trace("Image thirdparty intercepted: " + this.src); var n = function (n) { for (var e, t, r = {}, i = n.split("&"), o = !1, a = 0; a < i.length; a++)if (2 === (e = i[a].split("=")).length) try { if (t = decodeURIComponent(e[0]), !u[t]) continue; r[t] = decodeURIComponent(e[1]), o = !0 } catch (n) { N.log("failed parsing 3rd-party query string key-value pair: " + i[a], n) } return o ? r : null }((this.src || this.href || "").split("?")[1]); if (n) { var e = new ce(n); S.emit("3rdpartymap:scReport", e) } } } catch (n) { N.log("Error while checking image " + this.src + " for SC integration: " + n.message, n) } } function t() { var r = M.Image; M.Image = function (n, e) { var t = new r(n, e); try { t.addEventListener("load", i) } catch (n) { N.log("Failed intercepting Image constructor for SC integration. " + n.message, n) } return t }; var t = M.document.createElement; M.document.createElement = function () { var n = t.apply(M.document, [].slice.call(arguments)); if ("string" == typeof arguments[0] && "img" === arguments[0].toLowerCase()) try { n.addEventListener("load", i) } catch (n) { N.log("failed intercepting native createElement method. " + e.message, e) } return n } } return { initialize: function (n) { return !(!E.SCIntegration || void 0 === E.SCIntegrationURLsContainList || void 0 === E.SCIntegrationKeyList || 0 === E.SCIntegrationKeyList.length) && (n.on("init:preloaded", t), N.log("Intercepting SiteCatalyst reports."), !0) } } }(); if (ce.prototype.toString = function () { return this.type + ": " + this.data }, W.registerPlugin("SCIntegration", K), void 0 !== W && function (n, e, t) { n = n || {}; var r, o, a, u, c = (t || {}).visualName, i = (t || {}).visualNameDebug || !1, s = function (n) { return void 0 === r && (r = e()), !!r && r.isDomMasked(n, an.SELF_OR_ANY_PARENT, on.TEXT) }, f = (o = t.noIdSelectorsForClassNames || [], a = t.noIdSelectorsForIDs || [], u = t.noIdSelectorsForAttrs || [], function (n) { if (0 === o.length && 0 === a.length && 0 === u.length) return !0; var e, t = n.getAttribute("id"); if (t) for (e = 0; e < a.length; e++) { var r = a[e]; if (r && 0 <= t.indexOf(r)) return !1 } var i = N.getClassList(n); for (e = 0; e < o.length; e++)if (0 <= _.indexOf(i, o[e])) return !1; for (e = 0; e < u; e++)if (n.hasAttribute(u[e])) return !1; return !0 }); n.extractVisualName = function (n) { var e = null; if (!n || !N.isElement(n)) return e; if (_.contains(c.filterNamingByTagName, n.tagName.toLocaleLowerCase())) return e; var t = ""; return (e = N.getAttributeForElement(n, c.CLS_NAME_ATTR)) && (t = "by cls_vname"), !e && c.by.title && (e = N.getAttributeForElement(n, "title")) && (t = "by title"), !e && c.by.alt && (e = N.getAttributeForElement(n, "alt")) && (t = "by alt"), !e && c.by.ariaLabel && (e = N.getAttributeForElement(n, "aria-label")) && (t = "by aria-label"), !e && c.by.inlineText && (e = function (n) { var e = n.tagName.toLocaleLowerCase(); if ("td" === e) return null; var t = N.getAttributeForElement(n, "class"); if (t && _.contains(c.filterInlineTextByClassName, t)) return null; var r, i = null; if (("span" === e || "div" === e) && 1 === n.childElementCount && (r = n.firstElementChild) && "a" === r.tagName.toLocaleLowerCase() && 0 === r.childElementCount) { var o = r.innerText; o && (o = N.trim(o)), i = o } if (!i && _.contains(c.filterInlineTextByTagName, e)) { var a = n.parentElement ? n.parentElement.tagName.toLocaleLowerCase() : ""; if ("a" !== a && "button" !== a) return null } if (i || 0 !== n.childElementCount || (i = n.innerText) && (i = N.trim(i)), i || 1 === n.childElementCount && 0 === (r = n.firstElementChild).childElementCount && (i = r.innerText) && (i = N.trim(i)), i) try { s(n) && (i = x.censorValueOf(i)) } catch (n) { i = "" } return i || null }(n)) && (t = "by #text"), !e && c.by.placeholder && (e = N.getAttributeForElement(n, "placeholder")) && (t = "by placeholder"), e || !c.by.inputConsts && !c.by.inputButtonsValue || (e = function (n) { var e; if ("input" === n.tagName.toLocaleLowerCase()) { var t = n.type.toLocaleLowerCase(); if ("button" !== t && "submit" !== t && "reset" !== t || !c.by.inputButtonsValue || (e = n.value), !e && c.by.inputConsts) switch (t) { case "password": e = "Password"; break; case "button": case "submit": case "image": e = "Submit"; break; case "file": e = "Choose File"; break; case "reset": e = "Reset" } } return e && (e = N.trim(e)), e || null }(n)) && (t = "by input specific"), !e && c.by.name && (e = N.getAttributeForElement(n, "name")) && (t = "by name"), !e && c.by.id && f(n) && (e = N.getAttributeForElement(n, "id")) && (t = "by id"), !e && c.by.parent && (e = function (n) { if (!_.contains(c.elementListToCheckParent, n.tagName.toLocaleLowerCase())) return null; var e = null, t = n.parentElement; return !t || "a" !== t.tagName.toLocaleLowerCase() && "button" !== t.tagName.toLocaleLowerCase() || (e = N.getAttributeForElement(t, "title") || N.getAttributeForElement(t, "alt") || N.getAttributeForElement(t, "aria-label") || N.getAttributeForElement(t, "name") || N.getAttributeForElement(t, "id")), e || null }(n)) && (t = "by parent"), !e && c.by.child && (e = function (n) { if (!_.contains(c.elementListToCheckChild, n.tagName.toLocaleLowerCase())) return null; var e; if (1 === n.childElementCount) { var t = n.firstElementChild; e = N.getAttributeForElement(t, "title") || N.getAttributeForElement(t, "alt") || N.getAttributeForElement(t, "aria-label") || N.getAttributeForElement(t, "name") || N.getAttributeForElement(t, "id") } return e || null }(n)) && (t = "by child"), e && e.length > c.chatLimit && (e = e.substr(0, c.chatLimit).concat("...")), i && N.trace("VISUAL NAME: (on " + n.tagName + " " + (n.type ? n.type : "") + ") " + t + " - " + e), e } }(W, function () { return W.plugins.domRecordingPlugin ? W.plugins.domRecordingPlugin.getDomMasker() : null }, E), new function (n, t, e, r, i, o) { var a; function u(n) { if (n) for (var e in n) "hash" !== e && (o[e] = n[e]) } if (n.detectorScript && n.detectorScript.src && o.configPath) { !function () { var n, e = t.get("js.conf"); if (e) try { n = r.decode(e), a = n.hash, u(n) } catch (n) { N.log("failed parsing JSON of external configuration: " + n.message, n) } }(); var c = N.extractOrigin(n.detectorScript.src); e(N.joinPath(c, o.configPath), function (n) { var e; try { e = JSON.parse(n) } catch (n) { return void N.log("Failed parsing external configuration JSON: " + n.message, n) } void 0 !== a && void 0 !== e.hash && a === e.hash || (t.set("js.conf", r.encode(e)), u(e), a = e.hash) }, function (n) { i.emit("clsDebug", n) }) } }(O, new re(M.localStorage, { keysPrefix: O.Storage.UnboundKeyPrefix }), function (t, r, i) { try { var o = H.createXMLHTTPObject(!0); o || i("Failed creating XHR object for fetching external configuration"), o.onreadystatechange = function () { if (4 === o.readyState) if (200 === o.status) { var n = o.getResponseHeader("Content-Type"); n && -1 !== n.indexOf("application/json") && r(o.response) } else { var e = "Failed getting external configuration for url : " + t + " status:" + o.status + "  " + o.statusText; i(e) } }, o.open("GET", t, !0), o.onprogress = function () { }, o.ontimeout = function () { }, o.onerror = function () { }, setTimeout(function () { try { o.send() } catch (n) { N.log("Failed sending request to url " + t + ": " + n.message, n) } }, 0) } catch (n) { console.log("Failed getting external configuration for url: " + t + ": " + n.message, n), i(n.message) } }, new Be(N.Base64), S, E), se.extractTLD = function (n) { var e = n.split("."); return e.shift(), 0 < e.length ? e.join(".") : n }, fe.cfgBackwardComp = function (n) { var e = !1; if (void 0 === n.ajaxRecordMatadata && void 0 !== n.recordAjaxRequest && (n.ajaxRecordMetadata = "" + n.recordAjaxRequest, e = !0), void 0 === n.ajaxRecordResponseBody) { var t = []; n.ajaxCaptureFQDNOnly && t.push("fqdn"), n.ajaxCaptureResponseContentWhenUrlMatches && t.push("uriMatches(" + n.ajaxCaptureResponseContentWhenUrlMatches + ")"), void 0 !== n.ajaxCaptureResponseOnStatusGreater && -1 !== n.ajaxCaptureResponseOnStatusGreater && t.push("statusGte(" + n.ajaxCaptureResponseOnStatusGreater + ")"), 0 < t.length && (n.ajaxRecordResponseBody = t.join(","), e = !0) } return void 0 === n.ajaxRecordResponseHeaders && void 0 !== n.ajaxCaptureResponseHeaders && (n.ajaxRecordResponseHeaders = "" + n.ajaxCaptureResponseHeaders, e = !0), e }, fe.fixHeaders = function (n, e) { var t = n.replace(/content-encoding:\sgzip/gi, "X-Glassbox-Orig-Content-Encoding: zip").replace(/transfer-encoding:\schunked/gi, "X-Glassbox-Orig-Transfer-Encoding: chunked"); return e ? t.replace(/content-length:/gi, "X-Glassbox-Orig-Content-Length:") + "Content-Length: " + e + "\r\n" : t }, fe.hasGzipContentEncoding = function (n) { return null !== /content-encoding:\sgzip/gi.exec(n) }, fe.isClsOwnAjax = function (n) { return n.cls_own }, fe.captureContent = function (n, e) { var t = null; return "" === n.responseType || "text" === n.responseType ? t = n.responseText : "json" === n.responseType && (t = JSON.stringify(n.response)), t }, fe.supportAjaxOnProgressEvents = function () { return "onloadend" in new XMLHttpRequest }, fe.safeEncodeURI = function (e) { try { return e === decodeURI(e) ? encodeURI(e) : e } catch (n) { return encodeURI(e) } }, le.prototype.toString = function () { return this.method + " " + this.url + (this.status ? " " + this.status : "") }, void 0 !== W && void 0 !== E && E.interceptAjax) O.detectorScript && O.detectorScript.src && (J = N.extractHostname(O.detectorScript.src)), W.registerPlugin("ajaxInterceptor", new fe(M, S, k.location.host, J, E, ["adrum", "dynatrace", "appdynamics.com", "tealeaf", "/retail/discountinternet/portal/coex.asmx/keepalive", "oauth/cc"])); de.READY_COOKIE = "_cls_ready", de.CORS_READY_KEY = "cors_ready", de.CORS_COOKIES = [O.cookies.session, O.cookies.visitor], de.STATE = { INIT: 0, HELPING: 1, READY: 2, GAVE_UP: 3 }; var Q, Y, $, Z, nn, en, tn, rn = (Q = L.isCorsReporting(), $ = new te((Y = E).reportAddUriParams, U), Z = Q && !Y.reportDisableCors ? new de(P, U, Y.reportURI, Y.reportCorsTakeNativeCookies) : D, nn = !0, en = function (n) { nn = n }, tn = function (e, t, r, i, o) { e = e || "", o = o || !1; var a = H.createXMLHTTPObject(!1, e); if (!a) return N.log("Failed creating an XMLHttpRequest object"), void en(!0); a.onreadystatechange = function () { if (4 === a.readyState) if (200 === a.status) { en(!0); var n = a.getResponseHeader("Content-Type"); n && -1 !== n.indexOf("application/json") && S.emit("handleGatewayResponse", a.response) } else Y.postRetry && !o ? (N.log("Failed POST data (" + t + "): " + a.status + "  " + a.statusText + " ...retrying..."), tn(e, t, r, i, !0)) : (N.log("Failed " + (o ? "again " : "") + "POST data (" + t + "): " + a.status + "  " + a.statusText + " . aborting. "), a.abort(), en(!0)) }; try { a.open("POST", r, !0), a.onprogress = function () { }, a.ontimeout = function () { }, a.onerror = function () { }, a.withCredentials = i, W.plugins.reporter && W.plugins.reporter.beaconEncoder.visitXhr(a), setTimeout(function () { try { a.send(e) } catch (n) { N.log("Failed sending (in) POST request (" + t + ") to url " + r + ": " + n.message, n), en(!0) } }, 0) } catch (n) { N.log("Failed sending POST request (" + t + ") to url " + r + ": " + n.message, n), en(!0) } }, { name: "POST", config: { maxReportSize: Y.maxPostReportSize, maxReports: -1 }, gainLockToReport: function () { var n = nn; return n && en(!1), n }, freeLock: function () { en(!0) }, flushEvents: function (e, t, n) { var r; n && (r = n.pid, delete n.pid); var i = function (n, e, t) { var r = $.apply(Y.reportURI, n, e); if (t) { var i, o = []; for (i in t) o.push(i + "=" + t[i]); 0 < o.length && (r += (-1 === r.indexOf("?") ? "?" : "&") + o.join("&")) } return r }(t, r, n); Z ? Z.help(H.createXMLHTTPObject, function (n) { tn(e, t, i, n) }) : tn(e, t, i) }, forceCorsReset: function () { Z && Z.reset() } }); ve.loadAndClearReports = function (n) { var e = n[ve.KEY_NAME]; if (delete n[ve.KEY_NAME], e) { var t, r = JSON.parse(e); for (t = 0; t < r.length; t++)r[t].encoding === ve.ENCODING_BASE64 && (r[t].e = ve.toBytes(N.Base64.atob(r[t].e))), delete r[t].encoding; return r } return D }, ve.toBytes = function (n) { var e, t = new Uint8Array(new ArrayBuffer(n.length)); for (e = 0; e < t.length; e++)t[e] = n.charCodeAt(e); return t }, ve.KEY_NAME = "_cls_rpt", ve.ENCODING_BASE64 = "b64", void 0 !== W && W.registerPlugin("reporter", new function (t, r, S, A, e, f) { var l, d, i, o = [], v = 0, h = -1, a = 0, u = 0, c = 0, p = { count: 0, flushedBytes: 0, estimatedBytes: { expected: 0, actual: 0 }, encodingErrors: [] }; function s(n) { C(), f.reportCreateSubSessionCookie && (U.set(O.cookies.sub_session, N.uuid()), n.cookie = k.cookie), h = n.seq } function m() { N.log("recording stopped, clearing event buffer. pending:", o.length), o = [] } function g() { try { var n, e = ve.loadAndClearReports(M.sessionStorage); if (e) for (N.log("about to send " + e.length + " storage pending report(s)."), n = 0; n < e.length; n++)l.flushEvents(e[n].e, e[n].sn, { pid: e[n].pid, storage: "true" }) } catch (n) { N.log("error: could not send pending storage reports. message:", n.message) } } function y() { g(); var n = f.reportByPost ? f.reportPostInterval : f.reportInterval; n && !i && (i = setInterval(x, n), N.log("Beacon: events will be reported in intervals of " + n + " ms.")) } function E(n) { G.diluteEvents(o, n) && e(n) && o.push(n), a = u = N.currentTimestamp() } function w(n) { f.reportAllOnUnload && x(!0) } function b(n) { N.log("Beacon: unloading page, " + o.length + " events to report."), f.reportToStorageAfterUnload && (void 0 !== ve && void 0 !== M.sessionStorage ? (N.log("switching to StorageReporter, following 'unload' event"), l = new ve(M.sessionStorage, d)) : N.log("error: either StorageReporter or window.sessionStorage is undefined, cannot switch to storage reporting.")), 0 < o.length && (f.reportAllOnUnload || !f.truncateEventsWithUnload || f.reportByPost || (o = G.truncateEventsForUnload(o)), R(!0)) } function C() { x(!0) } function x(n) { try { if (n && 0 < o.length) return void R(); if (o.length > c) return f.reportAllOnUnload ? void (c = o.length) : function (n, e) { for (var t = e; t < n.length; t++)if (!n[t].dependent) return !1; return !0 }(o, c) ? void (c = o.length) : void R(); 0 < f.idleEventTimeInterval && N.currentTimestamp() - a >= f.idleEventTimeInterval && N.currentTimestamp() - u < f.maxTimeForIdleEvent && (e = a, t.emit("reporter:idle", { idleBaseTime: u, latestEventTime: e }), a = N.currentTimestamp()) } catch (n) { N.log("ERROR: while reporting queued events. Exception: ", n.stack ? n.stack : n.message) } var e } function R(n) { if (l.gainLockToReport() || n) { var e = o; o = []; try { !function (n, e) { e = e || !1; var t, r = l.config.maxReports; if (!f.reportByPost && e && (r = f.maxReportsWithUnload), e && f.domOmitAfterUnload) for (t = 0; t < n.length; t++)delete n[t].domSnapshot; !function (n, e, t) { var r, i = function () { c++; var n = -1 !== t && t <= c; return n }, o = null; -1 !== t && 1 < n.length && "unload" === n[n.length - 1].type && (o = n.pop()); for (var a, u, c = 0, s = [], f = "", l = 0, d = n[0].type, v = A(), h = 0; h < n.length; h++) { r = n[h], u = v.track(r); var p = r.type, m = d === p, g = _.isUndefined(r.selectorExpression) || null == r.selectorExpression ? O.encoding.rootSelector : r.selectorExpression, y = g; if (O.repeatingElementSelector && !_.isUndefined(O.repeatingElementSelector) && (g === O.encoding.rootSelector ? f = "" : (g === f && (y = O.repeatingElementSelector), f = g)), a = T(r, y)) if (_.contains(O.nobelEventTypes, r.type)) 0 < s.length && I(s, v.getLast()), I([a], v.getCurrent()), s = [], l = 0, f = "", d = p; else { var E = !(0 !== s.length && !m && (_.contains(O.socialNobelEventTypes, r.type) || _.contains(O.socialNobelEventTypes, d))), w = a.length + (0 === s.length ? 0 : O.encoding.delimiters.events.length), b = -1 === e || S.estimateBeaconSize(l + w) < e; if (u && b && E) l += w, s.push(a); else { if (0 < s.length) { if (i()) { if (null !== o) { var C = n.length - h; N.log("Reached max number of reports allowed (" + t + "). Lost " + C + " events."), o.setExtraInfo(o.LOST_EVENTS_NUM, C), a = S.encodeEvent(o), s.push(a), I(s, v.getLast(), l) } return } I(s, v.getLast(), l), s = [], l = 0 } y === O.repeatingElementSelector && (a = T(r, g)), -1 !== e && S.estimateBeaconSize(a.length) > e ? (I([a], v.getCurrent()), f = "") : (s.push(a), l += a.length) } d = p } } if (0 < s.length) { if (null !== o) { var x = S.encodeEvent(o); s.push(x) } I(s, v.getCurrent(), l) } }(n, l.config.maxReportSize, r) }(e, n) } catch (n) { N.log("ERROR: while reporting events. Exception: ", n.stack ? n.stack : n.message), l.freeLock() } c = 0, G.notifyEventsFlush() } else N.log("reporter not ready yet. postponing " + o.length + " events reports.") } function T(e, n) { try { return S.encodeEvent(e, n) } catch (n) { N.log("ERROR: while encoding event: " + e.type + " . Exception: ", n.stack ? n.stack : n.message), p.encodingErrors.push(n.message) } } function I(n, e, t) { v++; var r, i, o, a, u, c, s = (r = e.referrer, i = e.subPage, o = n, a = v, S.encodeBeacon(O.beaconVersion, a, f.reportIncludeReferrer ? r : D, d, i, -1 !== h ? h : D, o)); l.flushEvents(s, v), u = s.length, c = t, p.count++ , p.flushedBytes += u, c && (p.estimatedBytes.actual += u, p.estimatedBytes.expected += c, p.estimationRatio = p.estimatedBytes.expected / p.estimatedBytes.actual), N.trace("Beacon[" + v + " payload-len:" + s.length + "]: " + l.name + " reported " + n.length + " events" + (0 < e.subPage.length ? " [on " + e.subPage + "]" : ""), n) } this.initialize = function (n, e) { if (!_.isUndefined(f.reportURI) && 0 !== f.reportURI.length) return N.log("Reporting using: " + (f.reportByPost ? "POST" : "GET")), N.log("Report Encoding: " + S.name), N.log("Report Compression: " + (f.reportCompress ? "ENABLED" : "DISABLED") + " supported by encoder:" + S.supportsCompression), l = r(), d = e.page.id, a = u = N.currentTimestamp(), c = 0, t.on("init:loaded", y), t.on("saveEvent", E), t.on("event:document", w), t.on("event:unload", b), t.on("reportImmediately", C), t.on("pageSnapshot:report", s), t.on("recordingStopped", m), !0; console.log("ERROR[EyeView-1401]: Detector script is missing configuration for 'reportURI'. Please add it.") }, this.sendStoragePendingReports = g, this.beaconEncoder = S, this.stats = function () { return p } }(S, function () { return "undefined" == typeof httpgetReporter ? rn : E.reportByPost || E.domRecordEnabled ? rn : httpgetReporter }, function (n, e, t) { if ("json" === t.reportEncoding) return new ee(_, O, N, eventEncodingUtils, j, { reportDebugInfo: t.reportDebugInfo, compress: t.reportCompress, domCompress: t.domCompress, corsSafelisted: e && t.reportCorsForceSafelistedHeaders }); var r = /SamsungBrowser\/7/gi.test(n.userAgent); function i(n) { return "%" + n.charCodeAt(0).toString(16).toUpperCase() } return new ne(_, O, N, eventEncodingUtils, j, { reportDebugInfo: t.reportDebugInfo, domCompress: t.domCompress, base64UriEncoder: r ? function (n) { return n.replace(/\+|=|\//gi, i) } : encodeURIComponent }) }(navigator, L.isCorsReporting(), E), function () { return W.segmentManager.createSegmentTracker() }, E.domRecordEnabled ? function (e, t) { var r = !1, i = -1, o = N.immutableSet.apply(null, O.snapshotApplicableEventType), a = N.immutableSet("pageUpdate", "mousedown", "touchstart", "drag", "keydown", "unload"); function u() { return e.plugins.domRecordingPlugin } return function (n) { return -1 !== t.domExpireSnapshotAfter && "pageSnapshot" !== n.type && -1 !== i && n.timestamp - i > t.domExpireSnapshotAfter && (u().reset(), e.useCurrentTimeForPagesnapshot = !0), (r = r || a[n.type]) && o[n.type] && (n.domSnapshot = u().getDomSnapshot()), "pageSnapshot" !== n.type && (i = n.timestamp), !("pageUpdate" === n.type && !n.domSnapshot) && !u().getDomMasker().isDomMasked(n.element, an.SELF_OR_ANY_PARENT, on.OMIT) } }(W, E) : function () { return !0 }, E)), he.prototype.isAttributeMasked = function (n, e) { return !(!this._maskedAttributesTags[n.tagName] || !this._maskedAttributes[e]) }, he.prototype.isDomMasked = function (n, e) { var t, r, i = Array.prototype.slice.call(arguments, 2); for (t = 0; t < i.length; t++)if ((r = this._selectorsByMaskingType[i[t].name]) && e.follow(n, r)) return !0; return !1 }, he.prototype.domMaskNode = function (n) { var e, t, r, i, o, a = Array.prototype.slice.call(arguments, 1); for (e = 0; e < a.length; e++)if (i = a[e], o = this._selectorsByMaskingType[i.name]) for (r = [], n.nodeType === Node.ELEMENT_NODE && he.elementMatches.call(n, o) && r.push(n), "function" == typeof n.querySelectorAll && (r = Array.prototype.concat.apply(r, n.querySelectorAll(o))), t = 0; t < r.length; t++)i.apply(r[t], this) }, he.prototype.domMaskNodeForce = function (n) { var e, t = Array.prototype.slice.call(arguments, 1); for (e = 0; e < t.length; e++)t[e].apply(n, this) }; var on = { TEXT: { name: "TEXT", apply: function (n) { he.maskTextContent(he.textNodesOf(n)) } }, ATTRIBUTE: { name: "ATTRIBUTE", apply: function (n, e) { var t; if (e._maskedAttributesTags[n.tagName]) for (t in e._maskedAttributes) if (e._maskedAttributes.hasOwnProperty(t)) { var r = n.getAttribute(t); r && n.setAttribute(t, x.censorValueOf(r)) } } }, VALUE_ATTRIBUTE: { name: "VALUE_ATTRIBUTE", apply: function (n) { if (N.isEditableInput(n)) { var e = n.getAttribute("value"); e && n.setAttribute("value", x.censorValueOf(e)) } } }, OMIT: { name: "OMIT", apply: function (n) { n.parentNode && n.parentNode.removeChild(n) } } }, an = { SELF: { follow: function (n, e) { return !(n.nodeType !== Node.ELEMENT_NODE || !he.elementMatches.call(n, e)) } }, SELF_OR_ANY_PARENT: { follow: function (n, e) { for (var t = n; t && t.nodeType === Node.ELEMENT_NODE;) { if (he.elementMatches.call(t, e)) return !0; t = t.parentNode } return !1 } }, SELF_OR_ANY_CHILD: { follow: function (n, e) { return !(n.nodeType !== Node.ELEMENT_NODE || !he.elementMatches.call(n, e)) || "function" == typeof n.querySelectorAll && 0 < n.querySelectorAll(e).length } } }; he.textNodesOf = function (n) { if (n.nodeType === Node.TEXT_NODE) return [n]; for (var e, t = [], r = n.ownerDocument.createTreeWalker(n, NodeFilter.SHOW_TEXT, null, !1); e = r.nextNode();)t.push(e); return t }, he.maskTextContent = function (n) { var e, t, r, i; for (e = 0; e < n.length; e++)n[e].textContent && n[e].textContent.trim() && (t = n[e].textContent.trim(), r = x.censorValueOf(t), t.length !== n[e].textContent.length && (i = n[e].textContent.indexOf(t), r = n[e].textContent.substring(0, i) + r + n[e].textContent.substring(i + t.length)), n[e].textContent = r) }, he.prepareWildCardSelector = function (n, e) { return "" === n[0] ? "[" + e + "$='" + n[1] + "']" : "" === n[1] ? "[" + e + "^='" + n[0] + "']" : "[" + e + "^='" + n[0] + "'][" + e + "$='" + n[1] + "']" }, he.elementMatches = Element.prototype.matches || Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector || function (n) { for (var e = (this.document || this.ownerDocument).querySelectorAll(n), t = e.length; 0 <= --t && e.item(t) !== this;); return -1 < t }, pe.prototype.maskCookie = function (n) { if (!n || !this._cookieMaskSet) return n; var e, t, r, i, o, a = n.split(";"), u = []; for (e = 0; e < a.length; e++)-1 !== (r = (t = a[e]).indexOf("=")) ? (i = t.substring(0, r).trim(), o = t.substring(r + 1), u.push(i + "=" + (o && this._cookieMaskSet.hasOwnProperty(i) ? x.censorValueOf(o) : o))) : u.push(t); return u.join("; ") }; var un, cn, sn, fn, ln, dn, vn, hn, pn, mn = (un = M, cn = void 0 !== E && E.iframesDebugEnabled, sn = un.top !== un, { MAX_DEPTH_THRESHOLD: 20, tryGetCurrentDepth: function (n) { var e = 0, t = n; try { for (; t.parent != t && e <= this.MAX_DEPTH_THRESHOLD;)t = t.parent, e++ } catch (n) { return N.log("could not retrieve current window's depth (a CORS issue?). error:" + n), -1 } return e > this.MAX_DEPTH_THRESHOLD ? (N.log("nested iframe level calculation exceeded maximal threshold (" + this.MAX_DEPTH_THRESHOLD + ")."), -1) : e }, isCrossOriginFrame: function (n, e) { try { if (!n.contentWindow) return !0; var t = n.getAttribute("src"); if ("about:blank" === t) return !1; if (!t) return !1; var r = N.extractOrigin(t); return !!r && e !== r } catch (n) { return !0 } }, isEmpty: function (n) { return !n.contentDocument || !n.contentDocument.body.hasChildNodes() }, logDebug: function () { var n = Array.prototype.slice.call(arguments); return "string" == typeof n[0] && (n[0] = "[frame.debug] " + (sn ? "FRAME (" + un.location.href + ")" : "TOP") + "  " + n[0]), cn ? console.log.apply(console, n) : N.log.apply(N, n) } }), gn = { hidden: function (n) { return !(!n || !n.style || "none" !== n.style.display) } }; if (void 0 !== W && E.iframesRecordEnabled) { var yn = (vn = { attributeName: "gb_cid" }, hn = 100, pn = function () { return "" + hn++ }, function (n) { var e = n.getAttribute(vn.attributeName); return e || (e = pn(), n.setAttribute(vn.attributeName, e)), e }); W.registerPlugin("iframes", (fn = new ye(M, E.iframesParentOrigin), ln = new ge(M), dn = new we(function () { return W.plugins.domRecordingPlugin }, function () { return W.plugins.reporter }, W.savePageUpdate.bind(W)), new xe(M, S, new be(k, S), O.detectorScript ? new me(k, S, E, O.detectorScript, n, yn, { skipHidden: E.iframesSkipHidden }) : D, new Ee(M, fn, ln, dn, { handshakePredicatingAttribute: "gb_cid" }), new Ce(k, W.page, fn, ln, yn, { mscTimeout: E.iframesHandshakeTimeout }), function (n, e) { var t, r, i; function o() { i[e.containerIdKey] && t.setExtraInfo(e.containerIdKey, i[e.containerIdKey]), i[e.parentPageIdKey] && t.setExtraInfo(e.parentPageIdKey, i[e.parentPageIdKey]), r() } return e = e || { containerIdKey: "containerId", parentPageIdKey: "pageId" }, n.documentEventHook = function (n, e) { t = n, r = e, i && o() }, function (n, e) { i = { parentPageId: n, containerId: e }, t && r && o() } }(W, { parentPageIdKey: ue.prototype.PARENT_PAGE_ID, containerIdKey: ue.prototype.CONTAINER_ID }), { autoInject: E.iframesAutoInject, storageOnUnload: E.reportToStorageAfterUnload }))) } !function (n, e) { (("undefined" !== typeof N ? N : {}) || M || this).pako = function o(a, u, c) { function s(t, n) { if (!u[t]) { if (!a[t]) { var e = "function" == typeof require && require; if (!n && e) return e(t, !0); if (f) return f(t, !0); var r = new Error("Cannot find module '" + t + "'"); throw r.code = "MODULE_NOT_FOUND", r } var i = u[t] = { exports: {} }; a[t][0].call(i.exports, function (n) { var e = a[t][1][n]; return s(e || n) }, i, i.exports, o, a, u, c) } return u[t].exports } for (var f = "function" == typeof require && require, n = 0; n < c.length; n++)s(c[n]); return s }({ 1: [function (n, e, t) { "use strict"; var a = n("./zlib/deflate"), u = n("./utils/common"), c = n("./utils/strings"), i = n("./zlib/messages"), o = n("./zlib/zstream"), s = Object.prototype.toString, f = 0, l = -1, d = 0, v = 8; function h(n) { if (!(this instanceof h)) return new h(n); this.options = u.assign({ level: l, method: v, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: d, to: "" }, n || {}); var e = this.options; e.raw && 0 < e.windowBits ? e.windowBits = -e.windowBits : e.gzip && 0 < e.windowBits && e.windowBits < 16 && (e.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new o, this.strm.avail_out = 0; var t = a.deflateInit2(this.strm, e.level, e.method, e.windowBits, e.memLevel, e.strategy); if (t !== f) throw new Error(i[t]); if (e.header && a.deflateSetHeader(this.strm, e.header), e.dictionary) { var r; if (r = "string" == typeof e.dictionary ? c.string2buf(e.dictionary) : "[object ArrayBuffer]" === s.call(e.dictionary) ? new Uint8Array(e.dictionary) : e.dictionary, (t = a.deflateSetDictionary(this.strm, r)) !== f) throw new Error(i[t]); this._dict_set = !0 } } function r(n, e) { var t = new h(e); if (t.push(n, !0), t.err) throw t.msg || i[t.err]; return t.result } h.prototype.push = function (n, e) { var t, r, i = this.strm, o = this.options.chunkSize; if (this.ended) return !1; r = e === ~~e ? e : !0 === e ? 4 : 0, "string" == typeof n ? i.input = c.string2buf(n) : "[object ArrayBuffer]" === s.call(n) ? i.input = new Uint8Array(n) : i.input = n, i.next_in = 0, i.avail_in = i.input.length; do { if (0 === i.avail_out && (i.output = new u.Buf8(o), i.next_out = 0, i.avail_out = o), 1 !== (t = a.deflate(i, r)) && t !== f) return this.onEnd(t), !(this.ended = !0); 0 !== i.avail_out && (0 !== i.avail_in || 4 !== r && 2 !== r) || ("string" === this.options.to ? this.onData(c.buf2binstring(u.shrinkBuf(i.output, i.next_out))) : this.onData(u.shrinkBuf(i.output, i.next_out))) } while ((0 < i.avail_in || 0 === i.avail_out) && 1 !== t); return 4 === r ? (t = a.deflateEnd(this.strm), this.onEnd(t), this.ended = !0, t === f) : 2 !== r || (this.onEnd(f), !(i.avail_out = 0)) }, h.prototype.onData = function (n) { this.chunks.push(n) }, h.prototype.onEnd = function (n) { n === f && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = u.flattenChunks(this.chunks)), this.chunks = [], this.err = n, this.msg = this.strm.msg }, t.Deflate = h, t.deflate = r, t.deflateRaw = function (n, e) { return (e = e || {}).raw = !0, r(n, e) }, t.gzip = function (n, e) { return (e = e || {}).gzip = !0, r(n, e) } }, { "./utils/common": 2, "./utils/strings": 3, "./zlib/deflate": 6, "./zlib/messages": 7, "./zlib/zstream": 9 }], 2: [function (n, e, t) { "use strict"; var r = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array; t.assign = function (n) { for (var e = Array.prototype.slice.call(arguments, 1); e.length;) { var t = e.shift(); if (t) { if ("object" != typeof t) throw new TypeError(t + "must be non-object"); for (var r in t) t.hasOwnProperty(r) && (n[r] = t[r]) } } return n }, t.shrinkBuf = function (n, e) { return n.length === e ? n : n.subarray ? n.subarray(0, e) : (n.length = e, n) }; var i = { arraySet: function (n, e, t, r, i) { if (e.subarray && n.subarray) n.set(e.subarray(t, t + r), i); else for (var o = 0; o < r; o++)n[i + o] = e[t + o] }, flattenChunks: function (n) { var e, t, r, i, o, a; for (e = r = 0, t = n.length; e < t; e++)r += n[e].length; for (a = new Uint8Array(r), e = i = 0, t = n.length; e < t; e++)o = n[e], a.set(o, i), i += o.length; return a } }, o = { arraySet: function (n, e, t, r, i) { for (var o = 0; o < r; o++)n[i + o] = e[t + o] }, flattenChunks: function (n) { return [].concat.apply([], n) } }; t.setTyped = function (n) { n ? (t.Buf8 = Uint8Array, t.Buf16 = Uint16Array, t.Buf32 = Int32Array, t.assign(t, i)) : (t.Buf8 = Array, t.Buf16 = Array, t.Buf32 = Array, t.assign(t, o)) }, t.setTyped(r) }, {}], 3: [function (n, e, t) { "use strict"; var c = n("./common"), i = !0, o = !0; try { String.fromCharCode.apply(null, [0]) } catch (n) { i = !1 } try { String.fromCharCode.apply(null, new Uint8Array(1)) } catch (n) { o = !1 } for (var s = new c.Buf8(256), r = 0; r < 256; r++)s[r] = 252 <= r ? 6 : 248 <= r ? 5 : 240 <= r ? 4 : 224 <= r ? 3 : 192 <= r ? 2 : 1; function f(n, e) { if (e < 65537 && (n.subarray && o || !n.subarray && i)) return String.fromCharCode.apply(null, c.shrinkBuf(n, e)); for (var t = "", r = 0; r < e; r++)t += String.fromCharCode(n[r]); return t } s[254] = s[254] = 1, t.string2buf = function (n) { var e, t, r, i, o, a = n.length, u = 0; for (i = 0; i < a; i++)55296 == (64512 & (t = n.charCodeAt(i))) && i + 1 < a && 56320 == (64512 & (r = n.charCodeAt(i + 1))) && (t = 65536 + (t - 55296 << 10) + (r - 56320), i++), u += t < 128 ? 1 : t < 2048 ? 2 : t < 65536 ? 3 : 4; for (e = new c.Buf8(u), i = o = 0; o < u; i++)55296 == (64512 & (t = n.charCodeAt(i))) && i + 1 < a && 56320 == (64512 & (r = n.charCodeAt(i + 1))) && (t = 65536 + (t - 55296 << 10) + (r - 56320), i++), t < 128 ? e[o++] = t : (t < 2048 ? e[o++] = 192 | t >>> 6 : (t < 65536 ? e[o++] = 224 | t >>> 12 : (e[o++] = 240 | t >>> 18, e[o++] = 128 | t >>> 12 & 63), e[o++] = 128 | t >>> 6 & 63), e[o++] = 128 | 63 & t); return e }, t.buf2binstring = function (n) { return f(n, n.length) }, t.binstring2buf = function (n) { for (var e = new c.Buf8(n.length), t = 0, r = e.length; t < r; t++)e[t] = n.charCodeAt(t); return e }, t.buf2string = function (n, e) { var t, r, i, o, a = e || n.length, u = new Array(2 * a); for (t = r = 0; t < a;)if ((i = n[t++]) < 128) u[r++] = i; else if (4 < (o = s[i])) u[r++] = 65533, t += o - 1; else { for (i &= 2 === o ? 31 : 3 === o ? 15 : 7; 1 < o && t < a;)i = i << 6 | 63 & n[t++], o--; 1 < o ? u[r++] = 65533 : i < 65536 ? u[r++] = i : (i -= 65536, u[r++] = 55296 | i >> 10 & 1023, u[r++] = 56320 | 1023 & i) } return f(u, r) }, t.utf8border = function (n, e) { var t; for ((e = e || n.length) > n.length && (e = n.length), t = e - 1; 0 <= t && 128 == (192 & n[t]);)t--; return t < 0 ? e : 0 === t ? e : t + s[n[t]] > e ? t : e } }, { "./common": 2 }], 4: [function (n, e, t) { "use strict"; e.exports = function (n, e, t, r) { for (var i = 65535 & n | 0, o = n >>> 16 & 65535 | 0, a = 0; 0 !== t;) { for (t -= a = 2e3 < t ? 2e3 : t; i = i + e[r++] | 0, o = o + i | 0, --a;); i %= 65521, o %= 65521 } return i | o << 16 | 0 } }, {}], 5: [function (n, e, t) { "use strict"; var u = function () { for (var n, e = [], t = 0; t < 256; t++) { n = t; for (var r = 0; r < 8; r++)n = 1 & n ? 3988292384 ^ n >>> 1 : n >>> 1; e[t] = n } return e }(); e.exports = function (n, e, t, r) { var i = u, o = r + t; n ^= -1; for (var a = r; a < o; a++)n = n >>> 8 ^ i[255 & (n ^ e[a])]; return -1 ^ n } }, {}], 6: [function (n, e, t) { "use strict"; var s, l = n("../utils/common"), f = n("./trees"), d = n("./adler32"), v = n("./crc32"), r = n("./messages"), h = 0, p = 4, m = 0, g = -2, c = -1, y = 4, i = 2, E = 8, w = 9, o = 286, a = 30, u = 19, b = 2 * o + 1, C = 15, x = 3, S = 258, A = S + x + 1, R = 42, T = 113, I = 1, M = 2, k = 3, D = 4; function O(n, e) { return n.msg = r[e], e } function _(n) { return (n << 1) - (4 < n ? 9 : 0) } function N(n) { for (var e = n.length; 0 <= --e;)n[e] = 0 } function L(n) { var e = n.state, t = e.pending; t > n.avail_out && (t = n.avail_out), 0 !== t && (l.arraySet(n.output, e.pending_buf, e.pending_out, t, n.next_out), n.next_out += t, e.pending_out += t, n.total_out += t, n.avail_out -= t, e.pending -= t, 0 === e.pending && (e.pending_out = 0)) } function U(n, e) { f._tr_flush_block(n, 0 <= n.block_start ? n.block_start : -1, n.strstart - n.block_start, e), n.block_start = n.strstart, L(n.strm) } function P(n, e) { n.pending_buf[n.pending++] = e } function F(n, e) { n.pending_buf[n.pending++] = e >>> 8 & 255, n.pending_buf[n.pending++] = 255 & e } function j(n, e, t, r) { var i = n.avail_in; return r < i && (i = r), 0 === i ? 0 : (n.avail_in -= i, l.arraySet(e, n.input, n.next_in, i, t), 1 === n.state.wrap ? n.adler = d(n.adler, e, i, t) : 2 === n.state.wrap && (n.adler = v(n.adler, e, i, t)), n.next_in += i, n.total_in += i, i) } function B(n, e) { var t, r, i = n.max_chain_length, o = n.strstart, a = n.prev_length, u = n.nice_match, c = n.strstart > n.w_size - A ? n.strstart - (n.w_size - A) : 0, s = n.window, f = n.w_mask, l = n.prev, d = n.strstart + S, v = s[o + a - 1], h = s[o + a]; n.prev_length >= n.good_match && (i >>= 2), u > n.lookahead && (u = n.lookahead); do { if (s[(t = e) + a] === h && s[t + a - 1] === v && s[t] === s[o] && s[++t] === s[o + 1]) { o += 2, t++; do { } while (s[++o] === s[++t] && s[++o] === s[++t] && s[++o] === s[++t] && s[++o] === s[++t] && s[++o] === s[++t] && s[++o] === s[++t] && s[++o] === s[++t] && s[++o] === s[++t] && o < d); if (r = S - (d - o), o = d - S, a < r) { if (n.match_start = e, u <= (a = r)) break; v = s[o + a - 1], h = s[o + a] } } } while ((e = l[e & f]) > c && 0 != --i); return a <= n.lookahead ? a : n.lookahead } function H(n) { var e, t, r, i, o, a = n.w_size; do { if (i = n.window_size - n.lookahead - n.strstart, n.strstart >= a + (a - A)) { for (l.arraySet(n.window, n.window, a, a, 0), n.match_start -= a, n.strstart -= a, n.block_start -= a, t = n.hash_size, e = t; r = n.head[--e], n.head[e] = a <= r ? r - a : 0, --t;); for (e = t = a; r = n.prev[--e], n.prev[e] = a <= r ? r - a : 0, --t;); i += a } if (0 === n.strm.avail_in) break; if (t = j(n.strm, n.window, n.strstart + n.lookahead, i), n.lookahead += t, n.lookahead + n.insert >= x) for (o = n.strstart - n.insert, n.ins_h = n.window[o], n.ins_h = (n.ins_h << n.hash_shift ^ n.window[o + 1]) & n.hash_mask; n.insert && (n.ins_h = (n.ins_h << n.hash_shift ^ n.window[o + x - 1]) & n.hash_mask, n.prev[o & n.w_mask] = n.head[n.ins_h], n.head[n.ins_h] = o, o++ , n.insert-- , !(n.lookahead + n.insert < x));); } while (n.lookahead < A && 0 !== n.strm.avail_in) } function q(n, e) { for (var t, r; ;) { if (n.lookahead < A) { if (H(n), n.lookahead < A && e === h) return I; if (0 === n.lookahead) break } if (t = 0, n.lookahead >= x && (n.ins_h = (n.ins_h << n.hash_shift ^ n.window[n.strstart + x - 1]) & n.hash_mask, t = n.prev[n.strstart & n.w_mask] = n.head[n.ins_h], n.head[n.ins_h] = n.strstart), 0 !== t && n.strstart - t <= n.w_size - A && (n.match_length = B(n, t)), n.match_length >= x) if (r = f._tr_tally(n, n.strstart - n.match_start, n.match_length - x), n.lookahead -= n.match_length, n.match_length <= n.max_lazy_match && n.lookahead >= x) { for (n.match_length--; n.strstart++ , n.ins_h = (n.ins_h << n.hash_shift ^ n.window[n.strstart + x - 1]) & n.hash_mask, t = n.prev[n.strstart & n.w_mask] = n.head[n.ins_h], n.head[n.ins_h] = n.strstart, 0 != --n.match_length;); n.strstart++ } else n.strstart += n.match_length, n.match_length = 0, n.ins_h = n.window[n.strstart], n.ins_h = (n.ins_h << n.hash_shift ^ n.window[n.strstart + 1]) & n.hash_mask; else r = f._tr_tally(n, 0, n.window[n.strstart]), n.lookahead-- , n.strstart++; if (r && (U(n, !1), 0 === n.strm.avail_out)) return I } return n.insert = n.strstart < x - 1 ? n.strstart : x - 1, e === p ? (U(n, !0), 0 === n.strm.avail_out ? k : D) : n.last_lit && (U(n, !1), 0 === n.strm.avail_out) ? I : M } function V(n, e) { for (var t, r, i; ;) { if (n.lookahead < A) { if (H(n), n.lookahead < A && e === h) return I; if (0 === n.lookahead) break } if (t = 0, n.lookahead >= x && (n.ins_h = (n.ins_h << n.hash_shift ^ n.window[n.strstart + x - 1]) & n.hash_mask, t = n.prev[n.strstart & n.w_mask] = n.head[n.ins_h], n.head[n.ins_h] = n.strstart), n.prev_length = n.match_length, n.prev_match = n.match_start, n.match_length = x - 1, 0 !== t && n.prev_length < n.max_lazy_match && n.strstart - t <= n.w_size - A && (n.match_length = B(n, t), n.match_length <= 5 && (1 === n.strategy || n.match_length === x && 4096 < n.strstart - n.match_start) && (n.match_length = x - 1)), n.prev_length >= x && n.match_length <= n.prev_length) { for (i = n.strstart + n.lookahead - x, r = f._tr_tally(n, n.strstart - 1 - n.prev_match, n.prev_length - x), n.lookahead -= n.prev_length - 1, n.prev_length -= 2; ++n.strstart <= i && (n.ins_h = (n.ins_h << n.hash_shift ^ n.window[n.strstart + x - 1]) & n.hash_mask, t = n.prev[n.strstart & n.w_mask] = n.head[n.ins_h], n.head[n.ins_h] = n.strstart), 0 != --n.prev_length;); if (n.match_available = 0, n.match_length = x - 1, n.strstart++ , r && (U(n, !1), 0 === n.strm.avail_out)) return I } else if (n.match_available) { if ((r = f._tr_tally(n, 0, n.window[n.strstart - 1])) && U(n, !1), n.strstart++ , n.lookahead-- , 0 === n.strm.avail_out) return I } else n.match_available = 1, n.strstart++ , n.lookahead-- } return n.match_available && (r = f._tr_tally(n, 0, n.window[n.strstart - 1]), n.match_available = 0), n.insert = n.strstart < x - 1 ? n.strstart : x - 1, e === p ? (U(n, !0), 0 === n.strm.avail_out ? k : D) : n.last_lit && (U(n, !1), 0 === n.strm.avail_out) ? I : M } function z(n, e, t, r, i) { this.good_length = n, this.max_lazy = e, this.nice_length = t, this.max_chain = r, this.func = i } function X() { this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = E, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new l.Buf16(2 * b), this.dyn_dtree = new l.Buf16(2 * (2 * a + 1)), this.bl_tree = new l.Buf16(2 * (2 * u + 1)), N(this.dyn_ltree), N(this.dyn_dtree), N(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new l.Buf16(C + 1), this.heap = new l.Buf16(2 * o + 1), N(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new l.Buf16(2 * o + 1), N(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0 } function W(n) { var e; return n && n.state ? (n.total_in = n.total_out = 0, n.data_type = i, (e = n.state).pending = 0, e.pending_out = 0, e.wrap < 0 && (e.wrap = -e.wrap), e.status = e.wrap ? R : T, n.adler = 2 === e.wrap ? 0 : 1, e.last_flush = h, f._tr_init(e), m) : O(n, g) } function G(n) { var e, t = W(n); return t === m && ((e = n.state).window_size = 2 * e.w_size, N(e.head), e.max_lazy_match = s[e.level].max_lazy, e.good_match = s[e.level].good_length, e.nice_match = s[e.level].nice_length, e.max_chain_length = s[e.level].max_chain, e.strstart = 0, e.block_start = 0, e.lookahead = 0, e.insert = 0, e.match_length = e.prev_length = x - 1, e.match_available = 0, e.ins_h = 0), t } function J(n, e, t, r, i, o) { if (!n) return g; var a = 1; if (e === c && (e = 6), r < 0 ? (a = 0, r = -r) : 15 < r && (a = 2, r -= 16), i < 1 || w < i || t !== E || r < 8 || 15 < r || e < 0 || 9 < e || o < 0 || y < o) return O(n, g); 8 === r && (r = 9); var u = new X; return (n.state = u).strm = n, u.wrap = a, u.gzhead = null, u.w_bits = r, u.w_size = 1 << u.w_bits, u.w_mask = u.w_size - 1, u.hash_bits = i + 7, u.hash_size = 1 << u.hash_bits, u.hash_mask = u.hash_size - 1, u.hash_shift = ~~((u.hash_bits + x - 1) / x), u.window = new l.Buf8(2 * u.w_size), u.head = new l.Buf16(u.hash_size), u.prev = new l.Buf16(u.w_size), u.lit_bufsize = 1 << i + 6, u.pending_buf_size = 4 * u.lit_bufsize, u.pending_buf = new l.Buf8(u.pending_buf_size), u.d_buf = 1 * u.lit_bufsize, u.l_buf = 3 * u.lit_bufsize, u.level = e, u.strategy = o, u.method = t, G(n) } s = [new z(0, 0, 0, 0, function (n, e) { var t = 65535; for (t > n.pending_buf_size - 5 && (t = n.pending_buf_size - 5); ;) { if (n.lookahead <= 1) { if (H(n), 0 === n.lookahead && e === h) return I; if (0 === n.lookahead) break } n.strstart += n.lookahead, n.lookahead = 0; var r = n.block_start + t; if ((0 === n.strstart || n.strstart >= r) && (n.lookahead = n.strstart - r, n.strstart = r, U(n, !1), 0 === n.strm.avail_out)) return I; if (n.strstart - n.block_start >= n.w_size - A && (U(n, !1), 0 === n.strm.avail_out)) return I } return n.insert = 0, e === p ? (U(n, !0), 0 === n.strm.avail_out ? k : D) : (n.strstart > n.block_start && (U(n, !1), n.strm.avail_out), I) }), new z(4, 4, 8, 4, q), new z(4, 5, 16, 8, q), new z(4, 6, 32, 32, q), new z(4, 4, 16, 16, V), new z(8, 16, 32, 32, V), new z(8, 16, 128, 128, V), new z(8, 32, 128, 256, V), new z(32, 128, 258, 1024, V), new z(32, 258, 258, 4096, V)], t.deflateInit = function (n, e) { return J(n, e, E, 15, 8, 0) }, t.deflateInit2 = J, t.deflateReset = G, t.deflateResetKeep = W, t.deflateSetHeader = function (n, e) { return n && n.state ? 2 !== n.state.wrap ? g : (n.state.gzhead = e, m) : g }, t.deflate = function (n, e) { var t, r, i, o; if (!n || !n.state || 5 < e || e < 0) return n ? O(n, g) : g; if (r = n.state, !n.output || !n.input && 0 !== n.avail_in || 666 === r.status && e !== p) return O(n, 0 === n.avail_out ? -5 : g); if (r.strm = n, t = r.last_flush, r.last_flush = e, r.status === R) if (2 === r.wrap) n.adler = 0, P(r, 31), P(r, 139), P(r, 8), r.gzhead ? (P(r, (r.gzhead.text ? 1 : 0) + (r.gzhead.hcrc ? 2 : 0) + (r.gzhead.extra ? 4 : 0) + (r.gzhead.name ? 8 : 0) + (r.gzhead.comment ? 16 : 0)), P(r, 255 & r.gzhead.time), P(r, r.gzhead.time >> 8 & 255), P(r, r.gzhead.time >> 16 & 255), P(r, r.gzhead.time >> 24 & 255), P(r, 9 === r.level ? 2 : 2 <= r.strategy || r.level < 2 ? 4 : 0), P(r, 255 & r.gzhead.os), r.gzhead.extra && r.gzhead.extra.length && (P(r, 255 & r.gzhead.extra.length), P(r, r.gzhead.extra.length >> 8 & 255)), r.gzhead.hcrc && (n.adler = v(n.adler, r.pending_buf, r.pending, 0)), r.gzindex = 0, r.status = 69) : (P(r, 0), P(r, 0), P(r, 0), P(r, 0), P(r, 0), P(r, 9 === r.level ? 2 : 2 <= r.strategy || r.level < 2 ? 4 : 0), P(r, 3), r.status = T); else { var a = E + (r.w_bits - 8 << 4) << 8, u = -1; u = 2 <= r.strategy || r.level < 2 ? 0 : r.level < 6 ? 1 : 6 === r.level ? 2 : 3, a |= u << 6, 0 !== r.strstart && (a |= 32), a += 31 - a % 31, r.status = T, F(r, a), 0 !== r.strstart && (F(r, n.adler >>> 16), F(r, 65535 & n.adler)), n.adler = 1 } if (69 === r.status) if (r.gzhead.extra) { for (i = r.pending; r.gzindex < (65535 & r.gzhead.extra.length) && (r.pending !== r.pending_buf_size || (r.gzhead.hcrc && r.pending > i && (n.adler = v(n.adler, r.pending_buf, r.pending - i, i)), L(n), i = r.pending, r.pending !== r.pending_buf_size));)P(r, 255 & r.gzhead.extra[r.gzindex]), r.gzindex++; r.gzhead.hcrc && r.pending > i && (n.adler = v(n.adler, r.pending_buf, r.pending - i, i)), r.gzindex === r.gzhead.extra.length && (r.gzindex = 0, r.status = 73) } else r.status = 73; if (73 === r.status) if (r.gzhead.name) { i = r.pending; do { if (r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > i && (n.adler = v(n.adler, r.pending_buf, r.pending - i, i)), L(n), i = r.pending, r.pending === r.pending_buf_size)) { o = 1; break } o = r.gzindex < r.gzhead.name.length ? 255 & r.gzhead.name.charCodeAt(r.gzindex++) : 0, P(r, o) } while (0 !== o); r.gzhead.hcrc && r.pending > i && (n.adler = v(n.adler, r.pending_buf, r.pending - i, i)), 0 === o && (r.gzindex = 0, r.status = 91) } else r.status = 91; if (91 === r.status) if (r.gzhead.comment) { i = r.pending; do { if (r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > i && (n.adler = v(n.adler, r.pending_buf, r.pending - i, i)), L(n), i = r.pending, r.pending === r.pending_buf_size)) { o = 1; break } o = r.gzindex < r.gzhead.comment.length ? 255 & r.gzhead.comment.charCodeAt(r.gzindex++) : 0, P(r, o) } while (0 !== o); r.gzhead.hcrc && r.pending > i && (n.adler = v(n.adler, r.pending_buf, r.pending - i, i)), 0 === o && (r.status = 103) } else r.status = 103; if (103 === r.status && (r.gzhead.hcrc ? (r.pending + 2 > r.pending_buf_size && L(n), r.pending + 2 <= r.pending_buf_size && (P(r, 255 & n.adler), P(r, n.adler >> 8 & 255), n.adler = 0, r.status = T)) : r.status = T), 0 !== r.pending) { if (L(n), 0 === n.avail_out) return r.last_flush = -1, m } else if (0 === n.avail_in && _(e) <= _(t) && e !== p) return O(n, -5); if (666 === r.status && 0 !== n.avail_in) return O(n, -5); if (0 !== n.avail_in || 0 !== r.lookahead || e !== h && 666 !== r.status) { var c = 2 === r.strategy ? function (n, e) { for (var t; ;) { if (0 === n.lookahead && (H(n), 0 === n.lookahead)) { if (e === h) return I; break } if (n.match_length = 0, t = f._tr_tally(n, 0, n.window[n.strstart]), n.lookahead-- , n.strstart++ , t && (U(n, !1), 0 === n.strm.avail_out)) return I } return n.insert = 0, e === p ? (U(n, !0), 0 === n.strm.avail_out ? k : D) : n.last_lit && (U(n, !1), 0 === n.strm.avail_out) ? I : M }(r, e) : 3 === r.strategy ? function (n, e) { for (var t, r, i, o, a = n.window; ;) { if (n.lookahead <= S) { if (H(n), n.lookahead <= S && e === h) return I; if (0 === n.lookahead) break } if (n.match_length = 0, n.lookahead >= x && 0 < n.strstart && (i = n.strstart - 1, (r = a[i]) === a[++i] && r === a[++i] && r === a[++i])) { o = n.strstart + S; do { } while (r === a[++i] && r === a[++i] && r === a[++i] && r === a[++i] && r === a[++i] && r === a[++i] && r === a[++i] && r === a[++i] && i < o); n.match_length = S - (o - i), n.match_length > n.lookahead && (n.match_length = n.lookahead) } if (n.match_length >= x ? (t = f._tr_tally(n, 1, n.match_length - x), n.lookahead -= n.match_length, n.strstart += n.match_length, n.match_length = 0) : (t = f._tr_tally(n, 0, n.window[n.strstart]), n.lookahead-- , n.strstart++), t && (U(n, !1), 0 === n.strm.avail_out)) return I } return n.insert = 0, e === p ? (U(n, !0), 0 === n.strm.avail_out ? k : D) : n.last_lit && (U(n, !1), 0 === n.strm.avail_out) ? I : M }(r, e) : s[r.level].func(r, e); if (c !== k && c !== D || (r.status = 666), c === I || c === k) return 0 === n.avail_out && (r.last_flush = -1), m; if (c === M && (1 === e ? f._tr_align(r) : 5 !== e && (f._tr_stored_block(r, 0, 0, !1), 3 === e && (N(r.head), 0 === r.lookahead && (r.strstart = 0, r.block_start = 0, r.insert = 0))), L(n), 0 === n.avail_out)) return r.last_flush = -1, m } return e !== p ? m : r.wrap <= 0 ? 1 : (2 === r.wrap ? (P(r, 255 & n.adler), P(r, n.adler >> 8 & 255), P(r, n.adler >> 16 & 255), P(r, n.adler >> 24 & 255), P(r, 255 & n.total_in), P(r, n.total_in >> 8 & 255), P(r, n.total_in >> 16 & 255), P(r, n.total_in >> 24 & 255)) : (F(r, n.adler >>> 16), F(r, 65535 & n.adler)), L(n), 0 < r.wrap && (r.wrap = -r.wrap), 0 !== r.pending ? m : 1) }, t.deflateEnd = function (n) { var e; return n && n.state ? (e = n.state.status) !== R && 69 !== e && 73 !== e && 91 !== e && 103 !== e && e !== T && 666 !== e ? O(n, g) : (n.state = null, e === T ? O(n, -3) : m) : g }, t.deflateSetDictionary = function (n, e) { var t, r, i, o, a, u, c, s, f = e.length; if (!n || !n.state) return g; if (t = n.state, 2 === (o = t.wrap) || 1 === o && t.status !== R || t.lookahead) return g; for (1 === o && (n.adler = d(n.adler, e, f, 0)), t.wrap = 0, f >= t.w_size && (0 === o && (N(t.head), t.strstart = 0, t.block_start = 0, t.insert = 0), s = new l.Buf8(t.w_size), l.arraySet(s, e, f - t.w_size, t.w_size, 0), e = s, f = t.w_size), a = n.avail_in, u = n.next_in, c = n.input, n.avail_in = f, n.next_in = 0, n.input = e, H(t); t.lookahead >= x;) { for (r = t.strstart, i = t.lookahead - (x - 1); t.ins_h = (t.ins_h << t.hash_shift ^ t.window[r + x - 1]) & t.hash_mask, t.prev[r & t.w_mask] = t.head[t.ins_h], t.head[t.ins_h] = r, r++ , --i;); t.strstart = r, t.lookahead = x - 1, H(t) } return t.strstart += t.lookahead, t.block_start = t.strstart, t.insert = t.lookahead, t.lookahead = 0, t.match_length = t.prev_length = x - 1, t.match_available = 0, n.next_in = u, n.input = c, n.avail_in = a, t.wrap = o, m }, t.deflateInfo = "pako deflate (from Nodeca project)" }, { "../utils/common": 2, "./adler32": 4, "./crc32": 5, "./messages": 7, "./trees": 8 }], 7: [function (n, e, t) { "use strict"; e.exports = { 2: "need dictionary", 1: "stream end", 0: "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" } }, {}], 8: [function (n, e, t) { "use strict"; var c = n("../utils/common"), u = 0, s = 1; function r(n) { for (var e = n.length; 0 <= --e;)n[e] = 0 } var f = 0, a = 29, l = 256, d = l + 1 + a, v = 30, h = 19, m = 2 * d + 1, g = 15, i = 16, p = 7, y = 256, E = 16, w = 17, b = 18, C = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0], x = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13], S = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7], A = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], R = new Array(2 * (d + 2)); r(R); var T = new Array(2 * v); r(T); var I = new Array(512); r(I); var M = new Array(256); r(M); var k = new Array(a); r(k); var D, O, _, N = new Array(v); function L(n, e, t, r, i) { this.static_tree = n, this.extra_bits = e, this.extra_base = t, this.elems = r, this.max_length = i, this.has_stree = n && n.length } function o(n, e) { this.dyn_tree = n, this.max_code = 0, this.stat_desc = e } function U(n) { return n < 256 ? I[n] : I[256 + (n >>> 7)] } function P(n, e) { n.pending_buf[n.pending++] = 255 & e, n.pending_buf[n.pending++] = e >>> 8 & 255 } function F(n, e, t) { n.bi_valid > i - t ? (n.bi_buf |= e << n.bi_valid & 65535, P(n, n.bi_buf), n.bi_buf = e >> i - n.bi_valid, n.bi_valid += t - i) : (n.bi_buf |= e << n.bi_valid & 65535, n.bi_valid += t) } function j(n, e, t) { F(n, t[2 * e], t[2 * e + 1]) } function B(n, e) { for (var t = 0; t |= 1 & n, n >>>= 1, t <<= 1, 0 < --e;); return t >>> 1 } function H(n, e, t) { var r, i, o = new Array(g + 1), a = 0; for (r = 1; r <= g; r++)o[r] = a = a + t[r - 1] << 1; for (i = 0; i <= e; i++) { var u = n[2 * i + 1]; 0 !== u && (n[2 * i] = B(o[u]++, u)) } } function q(n) { var e; for (e = 0; e < d; e++)n.dyn_ltree[2 * e] = 0; for (e = 0; e < v; e++)n.dyn_dtree[2 * e] = 0; for (e = 0; e < h; e++)n.bl_tree[2 * e] = 0; n.dyn_ltree[2 * y] = 1, n.opt_len = n.static_len = 0, n.last_lit = n.matches = 0 } function V(n) { 8 < n.bi_valid ? P(n, n.bi_buf) : 0 < n.bi_valid && (n.pending_buf[n.pending++] = n.bi_buf), n.bi_buf = 0, n.bi_valid = 0 } function z(n, e, t, r) { var i = 2 * e, o = 2 * t; return n[i] < n[o] || n[i] === n[o] && r[e] <= r[t] } function X(n, e, t) { for (var r = n.heap[t], i = t << 1; i <= n.heap_len && (i < n.heap_len && z(e, n.heap[i + 1], n.heap[i], n.depth) && i++ , !z(e, r, n.heap[i], n.depth));)n.heap[t] = n.heap[i], t = i, i <<= 1; n.heap[t] = r } function W(n, e, t) { var r, i, o, a, u = 0; if (0 !== n.last_lit) for (; r = n.pending_buf[n.d_buf + 2 * u] << 8 | n.pending_buf[n.d_buf + 2 * u + 1], i = n.pending_buf[n.l_buf + u], u++ , 0 === r ? j(n, i, e) : (o = M[i], j(n, o + l + 1, e), 0 !== (a = C[o]) && (i -= k[o], F(n, i, a)), o = U(--r), j(n, o, t), 0 !== (a = x[o]) && (r -= N[o], F(n, r, a))), u < n.last_lit;); j(n, y, e) } function G(n, e) { var t, r, i, o = e.dyn_tree, a = e.stat_desc.static_tree, u = e.stat_desc.has_stree, c = e.stat_desc.elems, s = -1; for (n.heap_len = 0, n.heap_max = m, t = 0; t < c; t++)0 !== o[2 * t] ? (n.heap[++n.heap_len] = s = t, n.depth[t] = 0) : o[2 * t + 1] = 0; for (; n.heap_len < 2;)i = n.heap[++n.heap_len] = s < 2 ? ++s : 0, o[2 * i] = 1, n.depth[i] = 0, n.opt_len-- , u && (n.static_len -= a[2 * i + 1]); for (e.max_code = s, t = n.heap_len >> 1; 1 <= t; t--)X(n, o, t); for (i = c; t = n.heap[1], n.heap[1] = n.heap[n.heap_len--], X(n, o, 1), r = n.heap[1], n.heap[--n.heap_max] = t, n.heap[--n.heap_max] = r, o[2 * i] = o[2 * t] + o[2 * r], n.depth[i] = (n.depth[t] >= n.depth[r] ? n.depth[t] : n.depth[r]) + 1, o[2 * t + 1] = o[2 * r + 1] = i, n.heap[1] = i++ , X(n, o, 1), 2 <= n.heap_len;); n.heap[--n.heap_max] = n.heap[1], function (n, e) { var t, r, i, o, a, u, c = e.dyn_tree, s = e.max_code, f = e.stat_desc.static_tree, l = e.stat_desc.has_stree, d = e.stat_desc.extra_bits, v = e.stat_desc.extra_base, h = e.stat_desc.max_length, p = 0; for (o = 0; o <= g; o++)n.bl_count[o] = 0; for (c[2 * n.heap[n.heap_max] + 1] = 0, t = n.heap_max + 1; t < m; t++)r = n.heap[t], o = c[2 * c[2 * r + 1] + 1] + 1, h < o && (o = h, p++), c[2 * r + 1] = o, s < r || (n.bl_count[o]++ , a = 0, v <= r && (a = d[r - v]), u = c[2 * r], n.opt_len += u * (o + a), l && (n.static_len += u * (f[2 * r + 1] + a))); if (0 !== p) { do { for (o = h - 1; 0 === n.bl_count[o];)o--; n.bl_count[o]-- , n.bl_count[o + 1] += 2, n.bl_count[h]-- , p -= 2 } while (0 < p); for (o = h; 0 !== o; o--)for (r = n.bl_count[o]; 0 !== r;)i = n.heap[--t], s < i || (c[2 * i + 1] !== o && (n.opt_len += (o - c[2 * i + 1]) * c[2 * i], c[2 * i + 1] = o), r--) } }(n, e), H(o, s, n.bl_count) } function J(n, e, t) { var r, i, o = -1, a = e[1], u = 0, c = 7, s = 4; for (0 === a && (c = 138, s = 3), e[2 * (t + 1) + 1] = 65535, r = 0; r <= t; r++)i = a, a = e[2 * (r + 1) + 1], ++u < c && i === a || (u < s ? n.bl_tree[2 * i] += u : 0 !== i ? (i !== o && n.bl_tree[2 * i]++ , n.bl_tree[2 * E]++) : u <= 10 ? n.bl_tree[2 * w]++ : n.bl_tree[2 * b]++ , o = i, (u = 0) === a ? (c = 138, s = 3) : i === a ? (c = 6, s = 3) : (c = 7, s = 4)) } function K(n, e, t) { var r, i, o = -1, a = e[1], u = 0, c = 7, s = 4; for (0 === a && (c = 138, s = 3), r = 0; r <= t; r++)if (i = a, a = e[2 * (r + 1) + 1], !(++u < c && i === a)) { if (u < s) for (; j(n, i, n.bl_tree), 0 != --u;); else 0 !== i ? (i !== o && (j(n, i, n.bl_tree), u--), j(n, E, n.bl_tree), F(n, u - 3, 2)) : u <= 10 ? (j(n, w, n.bl_tree), F(n, u - 3, 3)) : (j(n, b, n.bl_tree), F(n, u - 11, 7)); o = i, (u = 0) === a ? (c = 138, s = 3) : i === a ? (c = 6, s = 3) : (c = 7, s = 4) } } r(N); var Q = !1; function Y(n, e, t, r) { var i, o, a, u; F(n, (f << 1) + (r ? 1 : 0), 3), o = e, a = t, u = !0, V(i = n), u && (P(i, a), P(i, ~a)), c.arraySet(i.pending_buf, i.window, o, a, i.pending), i.pending += a } t._tr_init = function (n) { Q || (function () { var n, e, t, r, i, o = new Array(g + 1); for (r = t = 0; r < a - 1; r++)for (k[r] = t, n = 0; n < 1 << C[r]; n++)M[t++] = r; for (M[t - 1] = r, r = i = 0; r < 16; r++)for (N[r] = i, n = 0; n < 1 << x[r]; n++)I[i++] = r; for (i >>= 7; r < v; r++)for (N[r] = i << 7, n = 0; n < 1 << x[r] - 7; n++)I[256 + i++] = r; for (e = 0; e <= g; e++)o[e] = 0; for (n = 0; n <= 143;)R[2 * n + 1] = 8, n++ , o[8]++; for (; n <= 255;)R[2 * n + 1] = 9, n++ , o[9]++; for (; n <= 279;)R[2 * n + 1] = 7, n++ , o[7]++; for (; n <= 287;)R[2 * n + 1] = 8, n++ , o[8]++; for (H(R, d + 1, o), n = 0; n < v; n++)T[2 * n + 1] = 5, T[2 * n] = B(n, 5); D = new L(R, C, l + 1, d, g), O = new L(T, x, 0, v, g), _ = new L(new Array(0), S, 0, h, p) }(), Q = !0), n.l_desc = new o(n.dyn_ltree, D), n.d_desc = new o(n.dyn_dtree, O), n.bl_desc = new o(n.bl_tree, _), n.bi_buf = 0, n.bi_valid = 0, q(n) }, t._tr_stored_block = Y, t._tr_flush_block = function (n, e, t, r) { var i, o, a = 0; 0 < n.level ? (2 === n.strm.data_type && (n.strm.data_type = function (n) { var e, t = 4093624447; for (e = 0; e <= 31; e++ , t >>>= 1)if (1 & t && 0 !== n.dyn_ltree[2 * e]) return u; if (0 !== n.dyn_ltree[18] || 0 !== n.dyn_ltree[20] || 0 !== n.dyn_ltree[26]) return s; for (e = 32; e < l; e++)if (0 !== n.dyn_ltree[2 * e]) return s; return u }(n)), G(n, n.l_desc), G(n, n.d_desc), a = function (n) { var e; for (J(n, n.dyn_ltree, n.l_desc.max_code), J(n, n.dyn_dtree, n.d_desc.max_code), G(n, n.bl_desc), e = h - 1; 3 <= e && 0 === n.bl_tree[2 * A[e] + 1]; e--); return n.opt_len += 3 * (e + 1) + 5 + 5 + 4, e }(n), i = n.opt_len + 3 + 7 >>> 3, (o = n.static_len + 3 + 7 >>> 3) <= i && (i = o)) : i = o = t + 5, t + 4 <= i && -1 !== e ? Y(n, e, t, r) : 4 === n.strategy || o === i ? (F(n, 2 + (r ? 1 : 0), 3), W(n, R, T)) : (F(n, 4 + (r ? 1 : 0), 3), function (n, e, t, r) { var i; for (F(n, e - 257, 5), F(n, t - 1, 5), F(n, r - 4, 4), i = 0; i < r; i++)F(n, n.bl_tree[2 * A[i] + 1], 3); K(n, n.dyn_ltree, e - 1), K(n, n.dyn_dtree, t - 1) }(n, n.l_desc.max_code + 1, n.d_desc.max_code + 1, a + 1), W(n, n.dyn_ltree, n.dyn_dtree)), q(n), r && V(n) }, t._tr_tally = function (n, e, t) { return n.pending_buf[n.d_buf + 2 * n.last_lit] = e >>> 8 & 255, n.pending_buf[n.d_buf + 2 * n.last_lit + 1] = 255 & e, n.pending_buf[n.l_buf + n.last_lit] = 255 & t, n.last_lit++ , 0 === e ? n.dyn_ltree[2 * t]++ : (n.matches++ , e-- , n.dyn_ltree[2 * (M[t] + l + 1)]++ , n.dyn_dtree[2 * U(e)]++), n.last_lit === n.lit_bufsize - 1 }, t._tr_align = function (n) { var e; F(n, 2, 3), j(n, y, R), 16 === (e = n).bi_valid ? (P(e, e.bi_buf), e.bi_buf = 0, e.bi_valid = 0) : 8 <= e.bi_valid && (e.pending_buf[e.pending++] = 255 & e.bi_buf, e.bi_buf >>= 8, e.bi_valid -= 8) } }, { "../utils/common": 2 }], 9: [function (n, e, t) { "use strict"; e.exports = function () { this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0 } }, {}] }, {}, [1])(1) }(), Ae.IGNORABLE_TAGS = N.immutableSet("NOSCRIPT", "SCRIPT"), Te.GB_ID_ATTRIBUTE_NAME = "gbid", De.DefaultOptions = { addHeader: !(Oe.prototype.toString = function () { return "seq:" + this.seq + "referrer" + this.referrer + "charset:" + this.charset + "cookie-len" + (this.cookie ? this.cookie.length : 0) + (20 < this.html.length ? "html length: " + this.html.length : "html: " + this.html) }) }, De.CLS_COMMENT_PREFIX = " CLS_DISABLED ", De.CLS_HEADER_PREFIX = " GlassBox synthetic page ", De.HTML_SCHEMA_PREFIX = "<!DOCTYPE HTML>\n", De.AttributeUpdaters = { value: function (n, e) { n.setAttribute("value", e ? e.censor(n) : n.value) }, checked: function (n) { n.checked && n.setAttribute("checked", "") }, selectedIndex: function (n) { var e = n.selectedIndex, t = n.getElementsByTagName("option"); t[e] && t[e].setAttribute("selected", "") } }, Le.prototype.selector = function () { return void 0 === this._resolvedSelector && (this._resolvedSelector = this.nodeCache.selectorFor(this.element, this._useId)), this._resolvedSelector }, Le.prototype.invalidateId = function () { this._useId = !1, this._resolvedSelector = D }, Pe.propertyForElement = function (n) { if ("SELECT" === n.tagName) return "selectedIndex"; if ("TEXTAREA" === n.tagName) return "value"; if ("INPUT" === n.tagName) { var e = n.getAttribute("type") && n.getAttribute("type").toLowerCase(); return !e || "checkbox" !== e && "radio" !== e ? "value" : "checked" } return D }, Pe.defaultValue = function (n, e) { if ("checked" === e) return n.hasAttribute("checked"); if ("selectedIndex" === e) { var t = n.querySelector("option[selected]"); return t ? t.index : null !== n.querySelector("option") ? 0 : -1 } var r = n.getAttribute(e); return r || "value" !== e ? r : "" }; var En, wn, bn, Cn, xn, Sn, An, Rn, Tn, In, Mn, kn, Dn = (En = new Te(function (n, e) { if ("HTML" === n.tagName) return "html"; var t = F.getSelectorExpression(n, !1, { useId: e, identifyingAttribute: E.domIdentifyingAttribute }); return null === t && n === k.body && (t = "BODY"), t }, E.domAssignGlassboxId), wn = new he({ valueMaskingMode: E.maskingMode, valueMaskIds: E.maskList, valueMaskClasses: E.maskClassList, domMaskIds: E.domMaskContentById, domMaskClasses: E.domMaskContentByClass, domOmitIds: E.domMaskOmitById, domOmitClasses: E.domMaskOmitByClass, domMaskedAttributes: E.domMaskedAttributes, domMaskAttributesTags: E.domMaskAttributesByTag, domMaskSimpleSelector: E.domMaskSimpleSelector }, qn()), bn = B, Cn = new function (n) { var e = n.implementation.createHTMLDocument("clonner-doc"); this.cloneNode = function (n) { return e.importNode(n, !0) } }(k), xn = new Se(!E.domKeepComments, ["iframe", "script", "noscript"], null, E.domKeepScriptMatching), Sn = new Se(!E.domKeepComments, ["script", "noscript"], { input: E.domIgnoredFormElements }, E.domKeepScriptMatching), An = function (n, e) { var t; for (t = 0; t < e.length; t++)if (-1 !== n.indexOf(e[t])) return !0; return !1 }(k.location.href, E.domPartialWhenLocationContains || []), Rn = function (n, e) { W.saveClsDebugErrorEvent("domPlugin", e, n) }, function (t, r, i, o, a) { var u = !!r; a = a || {}, Rn = Rn || function () { }; var c = !1, s = !1, f = !1, l = 0, d = 0, n = 0, e = function () { f = s = !1, l = 0 }, v = function () { e(), h() }, h = function () { if (!f && !s) try { En.introduceDocument(k), u && r.start(); var n = ((e = o.take(d)) && (d++ , t.emit("pageSnapshot:save", e), t.emit("pageSnapshot:report", e)), e); n ? (t.emit("domTrackingStarted"), i.start(), s = !0, N.log("reporting full page snapshot and starting DOM mutations tracking. snapshotData:" + n)) : 3 <= ++l ? (Rn("pageSnapshotError(3)", o.lastError), N.log("DOM recording is aborted: failed to retrieve page snapshot after 3 attempts."), f = !0) : N.log("could not take page snapshot (is it too early?) attempt " + l + " of 3") } catch (n) { Rn("startingError", n), N.log("error during DOM recording plugin starting. error: " + n) } var e; return s }, p = function (n) { if (!c) return D; var e; for (e = 0; e < a.ajaxTriggers.length; e++)if (-1 !== n.url.indexOf(a.ajaxTriggers[e])) return N.log("new dom-based page trigger by ajax. trigger uri:" + n.url), void v() }, m = function (n) { if (!c) return D; -1 !== a.triggers.indexOf(n.selectorExpression) && (N.log("new dom-based page trigger was clicked. selector:" + n.selectorExpression), v()) }, g = function () { u && (r.start(), !c || s || f || void 0 === a.onLoadTimeoutReport || -1 === a.onLoadTimeoutReport || setTimeout(h, a.onLoadTimeoutReport)) }, y = function () { ++n % a.updateOnWsCount == 0 && (N.log("dispatching DOM update event. ws messages:" + n), t.emit("pageUpdate")) }; return { initialize: function (n) { return E.domRecordEnabled ? (n.on("event:mousedown", m), n.on("ajax:send", p), n.on("init:loaded", g), u || N.log("WARNING: DOM changes are not tracked. DOM Observer is not supported by the browser."), -1 !== a.updateOnWsCount && new Re(M, y), a.compressionEnabled && N.log("DOM snapshots compression ENABLED."), An && N.log("DOM snapshots partial mode ENABLED (by location)."), c = !0) : (N.log("DOM recording is disabled."), !1) }, getDomSnapshot: function () { return c ? f ? D : h() && u ? i.getSnapshot() : D : D }, ensureStarted: h, isSemiDomActivated: function () { return !u }, isStarted: function () { return s }, reset: e, getObserverType: function () { return r.getName() }, getDomMasker: function () { return wn }, getNodeCache: function () { return En } } }(S, ((kn = new Ie(M, S, k, Ae)).supported() ? !E.domIE11ForceMutationObserver && kn.n() && (kn = new Me(S, k, Ae)) : kn = E.semiDomEnabled ? D : new Me(S, k, Ae), kn), new Ne({ usingGlassboxIds: E.domAssignGlassboxId, usingHashedTokens: E.domHashTokens }, (In = E.domHashTokens ? je(1e4) : function (n) { return N.DOMElement2Str(n) }, Mn = [{ name: "DOM-mutations", tracker: new Ue(S, En), providers: An ? [] : function (c, s, a, f, l, n) { l = l || function () { return !1 }; var e = function (n, e) { var t = n.attributes ? Object.keys(n.attributes) : []; if (t && 0 < t.length && !l(n.element)) { var r, i, o = {}; for (r = 0; r < t.length; r++)i = n.element.getAttribute(t[r]), "INPUT" === n.element.tagName && "value" === t[r] ? i = "password" === n.element.getAttribute("type") ? x.censorValueOf(i) : a.censor(n.element) : f.isAttributeMasked(n.element, t[r]) && (i = x.censorValueOf(i)), o[t[r]] = { value: i, ordinal: n.attributes[t[r]] }; N.ensureProperty(e, "domChanges", n.selector()).attributes = o } }, t = function (n, e) { if (void 0 !== n.characterDataChild) { var t = N.indexOfNode(n.element.childNodes, n.characterDataChild); if (0 <= t) { var r = n.characterDataChild; if (l(r)) return; f && f.isDomMasked(n.element, an.SELF_OR_ANY_PARENT, on.TEXT) && (r = c.cloneNode(n.characterDataChild), f.domMaskNodeForce(r, on.TEXT)), N.ensureProperty(e, "domChanges", n.selector()).characterData = { value: r.textContent, child: t } } } }, r = function (n, e) { if (void 0 !== n.childListOrdinal) { if (f.isDomMasked(n.element, an.SELF_OR_ANY_PARENT, on.OMIT)) return; var t, r, i, o = [], a = !1, u = f.isDomMasked(n.element, an.SELF_OR_ANY_PARENT, on.TEXT); for (t = 0; t < n.element.childNodes.length; t++)r = n.element.childNodes.item(t), l(r) || f.isDomMasked(r, an.SELF, on.OMIT) || (u ? (r = c.cloneNode(r), f.domMaskNodeForce(r, on.TEXT)) : (a = !1, f.isDomMasked(r, an.SELF_OR_ANY_CHILD, on.OMIT) && (r = c.cloneNode(r), f.domMaskNode(r, on.OMIT), a = !0), f.isDomMasked(r, an.SELF_OR_ANY_CHILD, on.TEXT, on.VALUE_ATTRIBUTE, on.ATTRIBUTE) && (a || (r = c.cloneNode(r)), f.domMaskNode(r, on.TEXT, on.VALUE_ATTRIBUTE, on.ATTRIBUTE))), (i = s(r)) && o.push(i)); N.ensureProperty(e, "domChanges", n.selector()).children = { ordinal: n.childListOrdinal, childList: o } } }; return { all: function () { return [e, t, r] } } }(Cn, In, bn, wn, Ae).all() }, { name: "property", tracker: new Pe(k, En, E.domIgnoredFormElements), providers: _e(bn, { ignoredFormElement: E.domIgnoredFormElements }).all() }], E.domRecordCssRules && Mn.push({ name: "css", tracker: new Fe(M, En), providers: (Tn = function (n, e) { n.rules && 0 < n.rules.length && (N.ensureProperty(e, "cssRuleChanges").rules = n.rules) }, { all: function () { return [Tn] } }).all() }), Mn)), new De(k, Cn, bn, wn, new pe({ cookieMask: E.maskCookies }), xn, Sn, { domRecordCssRules: E.domRecordCssRules }), { triggers: E.domNewPageTriggers, ajaxTriggers: E.domNewPageAjaxTriggers, onLoadTimeoutReport: E.domStartAfter, updateOnWsCount: E.domUpdateEveryWsMsgIn, compressionEnabled: E.domCompress })); void 0 !== W && W.registerPlugin("domRecordingPlugin", Dn); var On, _n, Nn, Ln = (On = k, _n = void 0 !== E && E.scrollDebug, { scroll: function (n, e) { return Nn = function (a, u, c, s) { var f, l, d = 0, v = 0; function h() { l && (v++ , l(), l = null, s && console.log("SCROLL DEBUG: bounced invocation #" + v)) } return { debouncedHandler: function (n) { var e, t, r, i, o; clearTimeout(f), l = c.bind(this, n), (o = (i = n.target) === a ? a.documentElement : i)._gb_scrollInfo || (o._gb_scrollInfo = { lastScrollTop: o.scrollTop, lastVDelta: 0 }), t = (e = o).scrollTop - e._gb_scrollInfo.lastScrollTop, r = t * e._gb_scrollInfo.lastVDelta < 0, e._gb_scrollInfo.lastVDelta = t, e._gb_scrollInfo.lastScrollTop = e.scrollTop, r ? h() : (f = setTimeout(h, u), d++ , s && d % 20 == 0 && console.log("SCROLL DEBUG: de-bouncer - called:", v, " of total:", d)) }, bounce: h } }(On, e, n, _n) }, bounceAll: function (n) { Nn && "scroll" !== n && Nn.bounce() } }); if (M.performance && void 0 !== M.performance.getEntriesByType && void 0 !== M.MutationObserver && W.registerPlugin("resourceRecorderPlugin", new function (n, e, t) { var r, i, o = {}; if (E.resourcesRecordEnabled && void 0 !== n.XMLHttpRequest) { var a = new qe(n, new re(n.localStorage, { keysPrefix: O.Storage.UnboundKeyPrefix }), He, e, t, (r = E.resourcesRecordAllowCors, i = E.resourceIgnoreWhenUrlContains, function (n) { if (!N.startsWith(n, "http") || !r && N.extractOrigin(n) !== M.location.origin) return !0; for (var e = 0; e < i.length; e++)if (-1 !== n.indexOf(i[e])) return !0; return !1 }), { electProbability: E.resourcesRecordChance, electAmount: E.resourcesRecordCount, maxPendingResources: 5, resourceRecordCssOnly: E.resourceRecordCssOnly }, o); e.on("init:loaded", function () { setTimeout(a.fetchResources.bind(a), 5e3) }), e.on("event:unload", a.electResources.bind(a)) } if (E.resourceTimingRecordEnabled && Hn(E.resourceTimingRecordEnabledByChance, P, "performanceRecord")) { var u = new Ve(n, S, [{ type: "resource", properties: ["name", "startTime", "requestStart", "responseStart", "responseEnd", "duration", "decodedBodySize", "async"], filterBy: "initiatorType", validFilterValues: N.immutableSet("link", "css", "font", "img", "input", "script") }]); e.on("init:loaded", u.reportMeasurements.bind(u)) } this.initialize = function () { }, this.startRecordingAll = function () { a ? (console.log("Entering full resources recording mode."), a.recordAllResources()) : console.log("Please allow resource recording first.") }, this.stopRecordingAll = function () { a ? (console.log("Exiting full resources recording mode."), a.stopRecordAllResources()) : console.log("Please allow resource recording first.") }, this.stats = function () { return o } }(M, S, new Be(N.Base64))), E.reportValidationErrors && W.registerPlugin("formValidationPlugin", new function (n, t, r, i) { t.on("init:loaded", function () { if ("undefined" != typeof jQuery && void 0 !== jQuery.validator) new Xe(t, F).intercept(); else { var e = new ze(n, t, F, { domFormValidationClassErrors: i.domFormValidationClassErrors }); t.on("event:mousedown", function (n) { setTimeout(e.intercept.bind(e, n.element), r) }) } }), this.initialize = function () { } }(M, S, 500, { domFormValidationClassErrors: E.domFormValidationClassErrors })), E.clientAttributesEnabled && void 0 !== W) { var Un = W.plugins.domRecordingPlugin && W.plugins.domRecordingPlugin.getDomMasker(); Un || (Un = { isDomMasked: function () { return !1 } }), W.registerPlugin("attributePlugin", new function (n, e) { n.on("newRemoteConfig", function (n) { n.attributeRules && e.processRules(n.attributeRules) }), this.initialize = function () { }, this.stats = function () { return e.getStats() } }(S, new function (f, l, i, o, a, d) { var v = {}, h = [], u = ["name", "pageUrl", "selector", "accessorMethod", "accessor", "maxLength"], p = { masked: 0, reported: 0, configured: 0, configurationLastUpdatedAt: 0, badRules: 0, evalRoundsCount: 0, evalDurationTotalMsc: 0, evalDurationAverageMsc: 0 }; function r(n) { for (var e = 0; e < u.length; e++)if (!n[u[e]]) return; if (a[n.accessorMethod] && o.isValidSelector(n.selector) && "number" == typeof n.maxLength) { var t, r = n.pageUrl; n.pageHash && (r += "#" + n.pageHash); try { t = new RegExp("^" + r.split("*").join(".*") + "$") } catch (n) { return void N.log("Exception occurred during parsing regular expression. Error: " + n.message, n) } return new i(n, o, a, t) } } function c(n, e) { try { for (var t, r, i, o, a = f.location.href, u = {}, c = 0; c < h.length; c++)if (i = Date.now(), t = h[c].evaluate(n, a, e, u), o = Date.now(), p.evalDurationTotalMsc += o - i, p.evalRoundsCount++ , p.evalDurationAverageMsc = p.evalDurationTotalMsc / p.evalRoundsCount, r = h[c].getRuleName(), t && t.val && v[r] !== t.val) { if (t.isMasked()) p.masked++; else { var s = Math.min(h[c].getRuleMaxLength(), d.clientAttributeMaxLength); l.emit("clientAttribute", { name: r, val: t.val.substring(0, s) }), p.reported++ } v[r] = t.val } } catch (n) { N.log("Exception occurred during rule evaluation. Error: " + n.message, n) } } l.on("domMutation", function (n) { var e = "characterData" === n.type, t = !e && "attribute" === n.type, r = e ? n.target.parentElement : n.target; e || "childList" !== n.type || (e = 1 === n.addedNodes.length && n.addedNodes[0].nodeType === Node.TEXT_NODE); c(r, e || t) }), this.processRules = function (n) { v = {}, p.configurationLastUpdatedAt = N.currentTimestamp(), function (n) { for (var e, t = 0; t < n.length; t++)(e = r(n[t])) && h.push(e); p.configured = n.length, p.badRules = n.length - h.length }(n), c(f.document, !1) }, this.getStats = function () { return p } }(M, S, We, function (n) { var r = n.createElement("div"), s = Element.prototype.matches || Element.prototype.msMatchesSelector, o = function (o) { function a(n) { return n.replace(/^[\s>]*|[\s>]*$/gi, "") } return function (n) { for (var e, t = [], r = 0, i = o.exec(n); null !== i;)i.index && (e = a(n.substring(r, i.index))) && t.push({ selector: e, eqIndex: -1 }), t.push({ selector: a(i[1]), eqIndex: parseInt(i[2]) }), r = i.index + i[0].length, i = o.exec(n); return r < n.length && (e = a(n.substring(r))) && t.push({ selector: e, eqIndex: -1 }), t } }(/([^>]*):eq\((\d+)\)/gi); function f(n, e, t, r, i) { if ("function" != typeof n.querySelector) return []; if (-1 !== e.eqIndex) { if (1 === r) { var o = n.querySelectorAll(e.selector); return o[e.eqIndex] ? [o[e.eqIndex]] : [] } var a, u = 0; for (a = 0; a < n.children.length; a++)if (s.call(n.children[a], e.selector) && u++ === e.eqIndex) return [n.children[a]]; return [] } if (i && t) { var c = n.querySelector(e.selector); return c ? [c] : [] } return Array.prototype.slice.call(n.querySelectorAll(e.selector)) } function a(n, e, t) { for (var r, i, o, a, u = e.length, c = [n]; 0 < e.length;) { for (r = e.shift(), o = [], i = 0; i < c.length; i++) { if (a = f(c[i], r, t, u, 0 === e.length), t && 0 === r.length && 0 < a.length) return [a[0]]; o.push.apply(o, a) } c = o } return c } return { querySelector: function (n, e) { return a(n, o(e), !0)[0] || null }, querySelectorAll: function (n, e) { return a(n, o(e), !1) }, matches: function (n, e) { var t, r, i = o(e); return 1 === i.length && -1 === i[0].eqIndex ? s && s.call(n, e) : -1 !== (t = n.ownerDocument, r = e, a(t, o(r), !1)).indexOf(n) }, isValidSelector: function (n) { if (!n) return !1; try { var e, t = o(n); for (e = 0; e < t.length; e++)f(r, t[0], !0, t.length, !0); return 0 < t.length } catch (n) { return !1 } } } }(M.document), function (n, e, t) { var r = N.immutableSet.apply(null, t.domMaskedAttributes), i = N.immutableSet.apply(null, t.domMaskAttributesByTag); function o() { return !("value" !== this.accessor || !n.isDomMasked(this.elem, an.SELF, on.ATTRIBUTE)) || !!n.isDomMasked(this.elem, an.SELF_OR_ANY_PARENT, on.OMIT) || !(!r[this.accessor] || !i[this.elem.tagName.toLowerCase()]) } function a() { return !!(e && "value" === this.accessor && e.isCensored(this.elem) || ("innerText" === this.accessor || "textContent" === this.accessor) && (n.isDomMasked(this.elem, an.SELF_OR_ANY_CHILD, on.TEXT) || n.isDomMasked(this.elem, an.SELF_OR_ANY_PARENT, on.TEXT)) || "innerHTML" === this.accessor && (n.isDomMasked(this.elem, an.SELF_OR_ANY_CHILD, on.TEXT, on.ATTRIBUTE) || n.isDomMasked(this.elem, an.SELF_OR_ANY_PARENT, on.TEXT, on.ATTRIBUTE)) || "outerHTML" === this.accessor && (n.isDomMasked(this.elem, an.SELF_OR_ANY_CHILD, on.TEXT, on.ATTRIBUTE) || n.isDomMasked(this.elem, an.SELF_OR_ANY_PARENT, on.TEXT, on.ATTRIBUTE)) || n.isDomMasked(this.elem, an.SELF_OR_ANY_PARENT, on.OMIT)) } function u() { return !!n.isDomMasked(this.elem, an.SELF_OR_ANY_PARENT, on.OMIT) } return { attribute: function (n, e) { return { accessor: e, elem: n, val: n.getAttribute && n.getAttribute(e), isMasked: o } }, property: function (n, e) { return { accessor: e, elem: n, val: "" + (n[e] || ""), isMasked: a } }, constant: function (n, e) { return { elem: n, val: e, isMasked: u } } } }(Un, B, { domMaskedAttributes: E.domMaskedAttributes, domMaskAttributesByTag: E.domMaskAttributesByTag }), { clientAttributeMaxLength: E.clientAttributeMaxLength }))) } We.prototype.matchPattern = function (n) { return this._urlRegexp.test(n) }, We.prototype.getRuleName = function () { return this._rule.name }, We.prototype.getRuleMaxLength = function () { return this._rule.maxLength }, We.prototype.evaluate = function (n, e, t, r) { if (this.matchPattern(e)) { var i = r[this._rule.selector]; if (i || (t ? this._elementResolver.matches(n, this._rule.selector) && (i = n) : i = this._elementResolver.querySelector(n, this._rule.selector)), i) return r[this._rule.selector] = i, this._accessors[this._rule.accessorMethod](i, this._rule.accessor) } }, void 0 !== W && W.registerPlugin("gatewayPlugin", new function (n, i) { n.on("handleGatewayResponse", function (n) { var e; try { e = JSON.parse(n) } catch (n) { return void N.log("Failed parsing JSON of response: " + n.message, n) } var t = e.appId; for (var r in e) i[r] && i[r].handle(e[r], t) }), this.initialize = function () { } }(S, { configuration: new function (t, r, i) { var o; t.on("init:loaded", function () { (o = function () { var n, e = i.get("app.conf"); if (e) try { n = r.decode(e) } catch (n) { N.log("Failed parsing JSON for configuration: " + n.message, n) } return n }() || {}).configuration && t.emit("newRemoteConfig", o.configuration) }), this.handle = function (n, e) { o && (o.configuration && o.configuration.hash !== n.hash || o.appId !== e) && (i.set("app.conf", r.encode({ configuration: n, appId: e })), o.configuration = n, o.appId = e, n && t.emit("newRemoteConfig", n)) } }(S, new Be(N.Base64), new re(M.localStorage, { keysPrefix: O.Storage.BoundKeyPrefix })), commands: new function () { this.handle = function (n, e) { } } })), M[n] = function (t, n, i, e) { var r = ["config", "sessionId", "visitorId", "page", "plugins", "blackoutManager", "version"]; function o(n) { var e; for (e = 0; e < r.length; e++)t.hasOwnProperty(r[e]) && (n[r[e]] = t[r[e]]); return n } var a = N.shallowExtend(e ? t : {}, { triggerCustomEvent: function (e, t, r) { try { if (!e || "string" != typeof e) return void N.log("bad argument: 'eventName' is expected to be non empty string."); i.emit("customEvent", { name: "" + e, val: "" + t, domEl: r }) } catch (n) { N.log("triggerCustomEvent: error while triggering event with name=" + e + " value=" + t + " domElement=" + r, n.stack ? n.stack : n.message) } }, isRecording: function () { return !(n && n.isStopped()) }, startRecording: function () { n && n.start() && N.log("Events recording resumed.") }, stopRecording: function () { n && n.stop() && N.log("Events recording for current session stopped.") } }); return i.on("api:updateFields", function () { o(a) }), o(a) }(W, W.asStoppable(), S, E.debugMode), (M.Zone && M.Zone.root && "function" == typeof M.Zone.root.wrap ? M.Zone.root.wrap(W.initialize) : W.initialize).call(W, t) } function Pn(n) { n.debugMode = !1, n.traceMode = !1, n.suppressMouseMovesDebug = !0, n.reportByPost = !1, n.reportPreferSendBeaconAPI = !1, n.reportDisableCors = !1, n.timingMode = !1, n.useIdSelectors = !0, n.noIdSelectorsForClassNames = ["skull_list"], n.noIdSelectorsForIDs = [], n.noIdSelectorsForAttrs = [], n.useNameInFormSelectors = !1, n.preferNamesInFormSelectors = !1, n.reportValidationErrors = !0, n.domFormValidationClassErrors = [], n.supportNativeAutoComplete = !1, n.recordEnterForInputs = !0, n.recordTypingAll = !1, n.recordTypingForAttrs = ["bs-typeahead"], n.recordTypingForClasses = ["tt-input"], n.recordTypingForIDs = [], n.ignorableElementIds = ["cls_logger", "cls_logger_tab"], n.idleEventTimeInterval = -1, n.maxTimeForIdleEvent = 42e4, n.validationValueForRenderTime = 2e4, n.titleCharsLimit = 150, n.recordAjaxCallsAnyway = !1, n.ajaxDebug = !1, n.ajaxHashRecurrentUrls = !0, n.ajaxCaptureResponseHeaders = !1, n.ajaxCaptureFQDNOnly = !1, n.ajaxCaptureResponseContentWhenUrlMatches = "", n.ajaxCaptureResponseOnStatusGreater = -1, n.reportVisualNames = !0, n.visualNameDebug = !1, n.visualName = { chatLimit: 40, CLS_NAME_ATTR: "cls_vname", filterNamingByTagName: ["script", "style"], by: { title: !0, alt: !0, ariaLabel: !0, inlineText: !0, placeholder: !0, inputConsts: !0, inputButtonsValue: !0, name: !0, id: !0, parent: !0, child: !0 }, elementListToCheckParent: ["img", "span", "div"], elementListToCheckChild: ["button"], filterInlineTextByTagName: ["div", "span", "td"], filterInlineTextByClassName: [] }, n.encryptionMode = O.ValueEncryptionMode.BlackList, n.encryptionList = [], n.encryptionClassList = [], n.maskingMode = O.ValueMaskingMode.BlackList, n.maskList = [], n.maskClassList = [], n.maskCookies = [], n.cookieAssignFQDN = !1, n.recordErrors = !0, n.recordConsoleErrors = !0, n.minDragPixels = 10, n.botDetection = !1, n.reportDebugInfo = !0, n.DOMBeaconImg = !1, n.reportAllOnUnload = !1, n.maxReportsWithUnload = 4, n.truncateEventsWithUnload = !0, n.recordScrolls = !1, n.dependentScroll = !0, n.minStallingScrollTime = 3e3, n.scrollDebug = !1, n.recordMouseMoves = !1, n.mmRecordTimes = !1, n.mmDiluteMinPixels = 20, n.mmMaxMovesWithUnload = 100, n.mmMaxMovesInEventNoTimes = 180, n.mmMaxMovesInEventWithTimes = 130, n.mmMinStallingMoveTime = 1e4, n.mmMaxInMemoryMoves = 600, n.mmDebug = !1, n.SCIntegration = !1, n.SCIntegrationURLsContainList = [], n.SCIntegrationKeyList = ["pageName", "v25", "v11", "v39"], n.externalIdAttr = "id", n.recordHovers = !1, n.mhDeepLevel = 2, n.mhMaxListSize = 10, n.mhMaxInMemeoryHovers = 100, n.mhDebug = !1, n.reportHybrid = !1, n.domRecordEnabled = !1, n.reportAllResourcesLoad = !1, n.ignoreReportResourcesByTagNames = [], n.reportExternalResources = !1, n.reportScriptURLContainList = [], n.reportScriptKeyList = [], n.reportImageURLContainList = [], n.reportImageKeyList = [], n.clsDebug = !0, n.clsDebugCharsLimit = 1e3, n.clsDebugMaxReports = 5, n.reportEncoding = "formUrl", n.reportCompress = !1, n.reportAddUriParams = ["clsjsv", "_cls_s", "_cls_v", "pid", "sn"], n.reportToStorageAfterUnload = !0, n.duplicateIdCheck = !1, n.blackoutWhenLocationContains = [], n.reportCorsForceSafelistedHeaders = !0, n.reportCorsTakeNativeCookies = [], n.reportIncludeReferrer = !0, n.reportCreateSubSessionCookie = !1, n.sessionIdByQueryParam = "_cls_s", n.visitorIdByQueryParam = "_cls_v", n.sendStateInfo = !0, n.debounceScrolls = 500, n.encryptionKeyId = "key1", n.encryptionTimeout = 150 } function Fn(n) { n.maxReportSize = 1900, n.reportInterval = 3e3, n.reportByPost = !0, n.maxPostReportSize = 15e4, n.reportPostInterval = 1e4, n.postRetry = !1, n.interceptAjax = !0, n.ajaxHashRecurrentUrls = !1, n.ajaxRecordMetadata = "always", n.domNewPageTriggers = [], n.domNewPageAjaxTriggers = [], n.domStartAfter = 1e4, n.domExpireSnapshotAfter = 114e4, n.domUpdateEveryWsMsgIn = -1, n.domCompress = !0, n.domRecordCssRules = !0, n.domRecordEnabled = !0, n.resourcesRecordEnabled = !1, n.resourceRecordCssOnly = !0, n.resourcesRecordCount = 1, n.resourcesRecordChance = .5, n.resourcesRecordAllowCors = !0, n.resourceIgnoreWhenUrlContains = [], n.resourceTimingRecordEnabled = !1, n.resourceTimingRecordEnabledByChance = .01, n.clientAttributesEnabled = !1, n.clientAttributeMaxLength = 30, n.semiDomEnabled = !0, n.domIgnoredFormElements = ["__VIEWSTATE"], n.domMaskContentById = [], n.domMaskOmitByClass = [], n.domMaskOmitById = [], n.domMaskContentByClass = [], n.domMaskedAttributes = [], n.domMaskAttributesByTag = [], n.domMaskSimpleSelector = [], n.domPartialWhenLocationContains = [], n.domKeepComments = !1, n.domOmitAfterUnload = !1, n.domAssignGlassboxId = !1, n.domIE11ForceMutationObserver = !1, n.iframesRecordEnabled = !0, n.iframesDebugEnabled = !1, n.iframesAutoInject = !1, n.iframesHandshakeTimeout = 2e3, n.iframesSkipHidden = !0 } function jn() { var a = []; this.add = function (n, e, t, r, i, o) { this[i.toLowerCase()] = { type: n, nullable: e, parser: t, name: i, required: o, validator: r }, o && a.push(i) }, this.requiredFieldsMask = function () { for (var n = {}, e = 0; e < a.length; e++)n[a[e]] = !0; return n } } function Bn() { this.errors = [], this.warnings = [] } function Hn(n, e, t) { if (void 0 === n) return !1; var r, i = e.get(t + ".bychance.enabled"); return e.get(t + ".bychance.prev_th") !== "" + n && (i = null), null === i ? (r = Math.random() < n, e.set(t + ".bychance.enabled", r), e.set(t + ".bychance.prev_th", n)) : r = "true" === i, r } function qn() { return { validateSelector: function (e) { try { return k.querySelector(e), !0 } catch (n) { return this.printErrorMsg("selector not valid"), void 0 !== W && setTimeout(function () { W.saveClsDebugErrorEvent("maskingConfiguration", D, e) }, 0), !1 } }, printErrorMsg: function (n) { console.error("[EyeView-403]: Error while processing configuration. Sensitive data might be recorded, verify detector masking/encryption configuration. Error cause: " + n) } } } function Vn(n) { var e = n.msCrypto, a = n.msCrypto.subtle; this.executeEncryptionFlow = function (n, e, t, r) { var i, o; (i = a.importKey("spki", n, { name: "RSA-OAEP", hash: { name: "SHA-1" } }, !1, ["encrypt"])).onerror = function (n) { r(n.message) }, i.oncomplete = function (n) { (o = a.encrypt({ name: "RSA-OAEP", hash: { name: "SHA-1" } }, n.target.result, e)).onerror = function (n) { r(n.message) }, o.oncomplete = function (n) { var e = n.target.result; t(e) } } }, this.getRandomValues = function (n) { return e.getRandomValues(n) } } function zn(n) { var e = n.crypto, i = e.subtle || e.webkitSubtle; this.executeEncryptionFlow = function (n, e, t, r) { i.importKey("spki", n, { name: "RSA-OAEP", hash: "SHA-1" }, !1, ["encrypt"]).then(function (n) { i.encrypt({ name: "RSA-OAEP" }, n, e).then(function (n) { t(n) }).catch(function (n) { r(n.message) }) }).catch(function (n) { r(n.message) }) }, this.getRandomValues = function (n) { return e.getRandomValues(n) } } function Xn(n, e, t, r, a, i) { function o() { return !1 } function u(n, e, t) { for (var r, i = [], o = 0; o < n.length; o++)if (1 === (i = n[o].split("*")).length) e.push(n[o]); else if (2 === i.length) try { r = new RegExp("(^|\\s)" + i.join(".*") + "($|\\s)"), t.push(r) } catch (n) { a.printErrorMsg("exception when creating a regular expression") } else a.printErrorMsg("more than one wildcard in string") } this._censorValueOf = n.censorValueOf, this._isAvailable = n.isAvailable, this._hasFallback = n.hasFallback, this._envCensorMode = e, this._censorAttribute = t, this._valueCensorIdsWithoutwildcards = [], this._valueCensorClassesWithoutwildcards = [], this._regexpValueCensorIds = [], this._regexpValueCensorClasses = [], this._options = r || {}, this._options.valueCensorIds && u(this._options.valueCensorIds, this._valueCensorIdsWithoutwildcards, this._regexpValueCensorIds), this._options.valueCensorClasses && u(this._options.valueCensorClasses, this._valueCensorClassesWithoutwildcards, this._regexpValueCensorClasses), this._options.autoCensorPredicate = this._options.autoCensorPredicate || o, this._autoCensorCallback = i || o } function Wn() { this.readyState = XMLHttpRequest.UNSENT, this.status = D, this._url = D, this._contentType = D, this.cls_own = !0 } function Gn() { this.readyState = XMLHttpRequest.UNSENT, this.status = D, this.xdr = new XDomainRequest, this.xdr.onprogress = function () { }, this.xdr.ontimeout = function () { }; var n = this; this.xdr.onload = function () { n.status = 200, n.readyState = XMLHttpRequest.DONE, n.onreadystatechange && n.onreadystatechange() }, this.xdr.onerror = function () { n.status = 400, n.readyState = XMLHttpRequest.DONE, n.onreadystatechange && n.onreadystatechange() } } function Jn(n) { this.size = 0, this.limit = n, this._keymap = {} } function Kn(e, v, t) { var h = [], p = []; var n, m = (n = e.location || e.document.location, function () { return n.href }); function r() { var n = m() || "", e = h.length; if (0 === e) return h.push(n), !1; if (h[e - 1] === n) return !1; var t = h[h.length - 1], r = g(t), i = g(n), o = Kn.UrlType.FUlL_URL; 2 === r.length && 2 === i.length && r[0] === i[0] && (o = Kn.UrlType.HASH_ONLY); var a = null; 2 <= e && h[e - 2] === n ? (h.pop(), p.push(t), a = Kn.DirectionType.BACK) : 0 < p.length && p[p.length - 1] === n ? (p.pop(), h.push(n), a = Kn.DirectionType.FORWARD) : (h.push(n), p = []); var u, c, s, f, l = o === Kn.UrlType.FUlL_URL ? n : i[1], d = o === Kn.UrlType.FUlL_URL ? t : r[1]; return u = a, c = o, s = d, f = l, v.emit("navigation", { direction: u, urlType: c, fromUrl: s, toUrl: f }), !0 } function g(n) { var e = (n || "").split("#"); return [e[0], e[1] || ""] } function i(e) { if ("function" == typeof t[e]) { var n = t[e]; t[e] = function () { try { 3 <= arguments.length && setTimeout(function () { r() }, 0) } catch (n) { N.log("error while intercepting history." + e + " method. error:" + n) } return n.apply(t, [].slice.call(arguments)) } } } try { i("pushState"), i("replaceState") } catch (n) { N.log("failed hooking native history manipulation methods.", n) } v.on("init:loaded", function () { var n = void 0 !== e.onpopstate ? "popstate" : "hashchange"; N.addEventHandler(e, n, function () { r() }), r() }), this.printHistory = function () { var n; for (n = 0; n < h.length; n++)console.log("  - " + n + " : " + h[n]) } } function Qn(n, t, r) { var i = r ? function (n) { var e; for (e = 0; e < r.length; e++)if (-1 !== n.indexOf(r[e])) return !0; return !1 } : Qn.ALWAYS_FALSE, o = !1; function e(n) { if (i(n) !== o) { var e = !o; N.log((e ? "ENTERING" : "LEAVING") + " recording blackout for new location:" + n), t.emit(e ? Qn.EVENTS.BlackoutEnter : Qn.EVENTS.BlackoutLeave, n), o = e } } this.isUnderBlackout = function () { return o }, t.on("init:loaded", function () { e(n.location.href) }), t.on("navigation", function () { e(n.location.href) }) } function Yn(n, e, t, r) { this.severity = n, this.code = e, this.count = t, r && (this.msg = r) } function $n(r, t) { this.compressionRatio = $n.INITIAL_COMPRESSION_FACTOR, t || (t = { compress: !0, forceBase64: !0 }); var e = t.compress || t.forceBase64 ? 1.33 : 1, i = 1, o = function (n, e) { return (n ? "1" : "0") + (e ? "1" : "0") }; this.newPayload = function () { return new Zn }, this.encode = t.compress ? function (n) { if (0 == n._updates.length) return ""; var e = N.arrayToJsonSafe(n._updates), t = N.Base64.bytesToBase64(r.compress(e)); return function (n) { this.compressionRatio = Math.max(n, $n.MINIMAL_COMPRESSION_FACTOR) }(t.length / e.length), o(!0, !0) + t } : function (n) { if (0 == n._updates.length) return ""; var e = N.arrayToJsonSafe(n._updates); return o(!1, t.forceBase64) + (t.forceBase64 ? N.Base64.toBase64(e) : e) }, this.refForEvent = function (n) { return "" + i++ + N.hashcode(n.type + n.timestamp) }, this.estimatedDomUpdateSize = function (n) { return (n ? JSON.stringify(n).length : 0) * e * (t.compress ? this.compressionRatio : 1) } } function Zn() { this._updates = [] } function ne(l, d, v, h, p, m) { m || (m = {}); var g = m.base64UriEncoder || encodeURIComponent, y = new $n(h, { forceBase64: !0, compress: m.domCompress }); this.name = "FORM-URL", this.supportsCompression = !1, this.isCompressing = function () { return !1 }, this.visitXhr = function (n) { n.setRequestHeader("Content-Type", "application/x-www-form-urlencoded") }, this.encodeSnapshotHtml = function (n) { return m.domCompress ? { encoded: v.Base64.bytesToBase64(h.compress(n)), plain: !1, compressed: !0 } : { encoded: v.Base64.encode(n), plain: !1, compressed: !1 } }, this.estimateBeaconSize = function (n) { return n }, this.encodeEvent = function (n, e) { var t, r = d.encoding.delimiters.eventParts, i = h.encodeTimestamp(n), o = h.encodeEventType(n.type), a = l.isUndefined(n.binding) || l.isUndefined(n.binding.valueEncoding) ? n.value : n.binding.valueEncoding(n.value); void 0 === e && (e = l.isUndefined(n.selectorExpression) || null == n.selectorExpression ? d.encoding.rootSelector : n.selectorExpression); var u = i + r + o + r + e; if (l.isString(a) && 0 < a.length) { p.stringIsEncrypted(a) ? n.shouldEncodeValue = !1 : t = n.shouldEncodeValue ? d.encoding.valueEncodedPrefix : d.encoding.valueNotEncodedPrefix; var c = n.shouldEncodeValue ? v.Base64.encode(a) : a; u += t ? r + t + c : r + c } else u += r + "-"; l.isUndefined(n.extraInfo) ? u += r + "-" : u += r + h.encodeExtraInfo(n); m.reportDebugInfo && !l.isUndefined(n.debugInfo) ? u += r + h.encodeDebugInfo(n) : u += r + "-"; var s = ""; n.domSnapshot && (s = y.refForEvent(n), u += r + d.encoding.domSnapshotRefPrefix + s), v.trace("encoding (" + n.type + ") " + (l.contains(["webSocketFrame", "resourceContent", "pageSnapshot"], n.type) ? i + r + o + r + "{event string is too long}" : u) + (0 < n.getSubPage().length ? " [on " + n.getSubPage() + "]" : "")); var f = { event: encodeURIComponent(u), domUpdate: n.domSnapshot, domUpdateRef: s }; return f.length = f.event.length + y.estimatedDomUpdateSize(n.domSnapshot), f }, this.encodeBeacon = function (n, e, t, r, i, o, a) { var u, c = [], s = y.newPayload(); for (u = 0; u < a.length; u++)c.push(a[u].event), a[u].domUpdate && s.add(a[u].domUpdate, a[u].domUpdateRef); var f = "v=" + n + (void 0 !== t ? "&r=" + encodeURIComponent(t) : "") + "&sn=" + e + "&p=" + r + (void 0 !== i ? "&sp=" + encodeURIComponent(i) : "") + (void 0 !== o ? "&pssn=" + o : "") + "&e=" + c.join(d.encoding.delimiters.events) + "&dom=" + g(y.encode(s)), l = p.getKeyInfo(); return l && (f += "&key=" + encodeURIComponent(l)), f } } function ee(a, u, h, p, m, g) { g || (g = {}); var y = .25, E = new $n(p, { forceBase64: !1, compress: !g.compress && g.domCompress }); this.name = "JSON", this.supportsCompression = !0, this.isCompressing = function () { return !0 }, this.visitXhr = function (n) { g.corsSafelisted ? n.setRequestHeader("Content-Type", "text/plain" + (g.compress ? "; charset=" + ee.COMPRESSED_INDICATION_CHARSET : "")) : (n.setRequestHeader("Content-Type", "application/json"), g.compress && n.setRequestHeader("Content-Encoding", "gzip")) }, this.encodeSnapshotHtml = function (n) { return !g.compress && g.domCompress ? { encoded: h.Base64.bytesToBase64(p.compress(n)), plain: !1, compressed: !0 } : { encoded: n, plain: !0, compressed: !1 } }, this.estimateBeaconSize = function (n) { return g.compress ? n * y : n }, this.encodeEvent = function (n, e) { var t, r = { timestamp: p.encodeTimestamp(n), type: "" + p.encodeEventType(n.type) }; void 0 === e && (e = a.isUndefined(n.selectorExpression) || null == n.selectorExpression ? u.encoding.rootSelector : n.selectorExpression), r.selector = e; var i = a.isUndefined(n.binding) || a.isUndefined(n.binding.valueEncoding) ? n.value : n.binding.valueEncoding(n.value); a.isString(i) && 0 < i.length ? (m.stringIsEncrypted(i) ? n.shouldEncodeValue = !1 : t = n.shouldEncodeValue ? u.encoding.valueEncodedPrefix : u.encoding.valueNotEncodedPrefix, i = n.shouldEncodeValue ? h.Base64.encode(i) : i, r.value = t ? t + i : i) : r.value = "-", a.isUndefined(n.extraInfo) ? r.extraInfo = "-" : r.extraInfo = p.encodeExtraInfo(n), g.reportDebugInfo && !a.isUndefined(n.debugInfo) ? r.debugInfo = p.encodeDebugInfo(n) : r.debugInfo = "-"; var o = ""; return n.domSnapshot ? (o = E.refForEvent(n), r.domSnapshot = u.encoding.domSnapshotRefPrefix + o) : r.domSnapshot = "-", h.trace("json encoding (" + n.type + ") " + r.timestamp + ";" + r.type + " {event string is too long}" + (0 < n.getSubPage().length ? " [on " + n.getSubPage() + "]" : "")), function (n) { var e, t = 0; for (e in n.event) "string" == typeof n.event[e] && (t += e.length + n.event[e].length + 6); return n.length = t + 2 + E.estimatedDomUpdateSize(n.domUpdate), n }({ event: r, domUpdate: n.domSnapshot, domUpdateRef: o }) }, this.encodeBeacon = function (n, e, t, r, i, o, a) { var u, c = [], s = E.newPayload(); for (u = 0; u < a.length; u++)c.push(a[u].event), a[u].domUpdate && s.add(a[u].domUpdate, a[u].domUpdateRef); var f = { ver: n, sn: e, pageId: r, events: c, dom: E.encode(s) }, l = m.getKeyInfo(); l && (f.key = l), t && (f.referrer = t), void 0 !== i && 0 < i.length && (f.subPage = i), void 0 !== o && (f.pssn = o); var d = JSON.stringify(f); if (g.compress) { var v = p.compress(d); return y = Math.max(v.length / d.length, ee.MINIMAL_COMPRESSION_FACTOR), h.log("applying json compression. before:" + d.length + " after:" + v.length + " (ratio:" + y + ")"), v } return d } } function te(n, o) { var e, r = N.immutableSet.apply(null, n); function a(n, e) { return n + "=" + e } function t(n, e, t) { t && r[e] && n.push(a(e, t)) } if (n && 0 !== n.length) { function u(n) { var e = []; return t(e, "clsjsv", encodeURIComponent(W.version)), t(e, "_cls_s", o.get(O.cookies.session)), t(e, "_cls_v", o.get(O.cookies.visitor)), t(e, "pid", n), e.join("&") } var c = function () { return e || (e = u(W.page.id)), e }, s = r.sn, f = r.ref, l = r._cls_subs; this.apply = function (n, e, t) { var r = t ? u(t) : c(); if (!(r || s || l || f)) return n; var i = []; return f && i.push("ref=" + encodeURIComponent(te.currentRef())), r && i.push(r), l && o.get(O.cookies.sub_session) && i.push(a("_cls_subs", o.get(O.cookies.sub_session))), s && e && i.push(a("sn", e)), 0 < i.length ? n + (-1 !== n.indexOf("?") ? "&" : "?") + i.join("&") : n } } else this.apply = function (n, e, t) { return n } } function re(t, e) { function r(n) { return e.keysPrefix + n } t = t || {}, this.get = function (n) { try { return t[r(n)] } catch (n) { return D } }, this.set = function (n, e) { try { return t[r(n)] = e } catch (n) { return D } }, this.remove = function (n) { try { return delete t[r(n)] } catch (n) { return D } } } function ie() { this.current = null, this.last = null } function oe(n, e, t) { this.url = e, this.timestamp = t, this.type = n } function ae(n, e) { this.x = n, this.y = e } function ue(n, e, t, r) { this.pageId = r, this.timestamp = e, this.type = n, this.element = t, this.report = !0, this.shouldEncodeValue = !0, this.dependent = !1, this.subPage = M.location.hash, this.referrer = N.stripHash(M.location.href) } function ce(n) { this.value = n } function se(t) { var r = se.extractTLD(t), o = { always: function () { return function () { return !0 } }, never: function () { return function () { return !1 } }, fqdn: function () { return function (n) { var e = N.extractHostname(n.interception.url); return !e || e === t } }, tld: function () { return function (n) { var e = N.extractHostname(n.interception.url); return !e || se.extractTLD(e) === r } }, statusgte: function (n) { if (!n) throw new SyntaxError("illegal ajax predicate format: missing expected argument 'status'."); var e = parseInt(n); return function (n) { return n.status >= e } }, urimatches: function (n) { if (!n) throw new SyntaxError("illegal ajax predicate format: missing expected argument 'pattern'."); var e = new RegExp(n); return function (n) { return null !== e.exec(n.interception.url) } }, and: function (n) { if (!n) throw new SyntaxError("illegal ajax predicate format: missing expected argument 'inner arguments'."); var t = e(n); return function (n) { var e; for (e = 0; e < t.length; e++)if (!t[e](n)) return !1; return !0 } }, or: function (n) { if (!n) throw new SyntaxError("illegal ajax predicate format: missing expected argument 'inner arguments'."); var t = e(n); return function (n) { var e; for (e = 0; e < t.length; e++)if (t[e](n)) return !0; return !1 } } }; function a(n) { var e = n.indexOf("("); if (-1 < e) { var t, r = -1, i = 1; for (t = e + 1; t < n.length; t++)if ("(" === n.charAt(t) && i++ , ")" === n.charAt(t) && 0 == --i) { r = t; break } if (-1 === r) throw new SyntaxError("illegal ajax predicate format: missing argument closing ')'"); return [N.trim(n.substring(0, e).toLowerCase()), N.trim(n.substring(e + 1, r))] } return [n.toLowerCase()] } function e(n) { var e, t, r = [], i = (n || "").split(","); for (e = 0; e < i.length; e++) { if (t = a(N.trim(i[e])), !o[t[0]]) throw new SyntaxError("illegal ajax predicate format: unknown predicate type '" + t[0] + "'."); r.push(o[t[0]](t[1])) } return r } o.true = o.always, o.false = o.never, this.create = function (n) { if (!n) return o.never(); var e = a(n); if (!o[e[0]]) throw new SyntaxError("illegal ajax predicate format: unknown predicate type '" + e[0] + "'."); return o[e[0]](e[1]) } } function fe(n, f, e, i, o, a) { var l = o.ajaxDebug, t = function () { return !1 }, r = t, d = t, v = t, h = t, p = t; function u(n) { f.emit("ajax:load", new le(this, N.currentTimestamp())), l && N.trace("AJAX load intercepted", this) } function c(n) { f.emit("ajax:error", new le(this, N.currentTimestamp())), l && N.trace("AJAX error intercepted", this) } function s(n) { l && N.trace("AJAX onLoadstart intercepted", this), this.interception ? (this.interception.startTime = N.currentTimestamp(), this.interception.lastFocusedElement = k.activeElement) : N.trace("AJAX onLoadstart - missing cls xhr interception data") } function m(n) { if (l && N.trace("AJAX onLoadend intercepted", this), this.interception) { var i = this, o = N.currentTimestamp(), a = v(i), u = a || d(i), c = p(i), s = c || h(i); if (!(s || u || r(i))) return !1; setTimeout(function () { var n = i.getAllResponseHeaders(), e = a && fe.hasGzipContentEncoding(n), t = a ? fe.captureContent(i, e) : null, r = new le(i, i.interception.startTime, o, s && i.interception.requestHeaders ? i.interception.requestHeaders.join("\r\n") : null, c ? i.interception.requestContent : null, u ? fe.fixHeaders(n, t ? t.length : D) : null, t, e); r.lastFocusedElement = i.interception.lastFocusedElement, r.status = i.status, r.statusText = i.statusText, f.emit("ajax:loadend", r) }, 0) } else N.trace("AJAX onLoadend - missing cls xhr interception data for url: " + (this.responseURL || "")) } function g() { var t = XMLHttpRequest.prototype.open, r = XMLHttpRequest.prototype.send, e = XMLHttpRequest.prototype.setRequestHeader; t && r ? (n.XMLHttpRequest.prototype.open = function () { var e, n = this; try { (function (n, e) { if (fe.isClsOwnAjax(n)) return !1; if (0 <= e.indexOf(o.reportURI)) return !1; if (i && 0 <= e.indexOf(i)) return !1; var t, r = e.toLowerCase(); for (t = 0; t < a.length; t++)if (0 <= r.indexOf(a[t])) return !1; return !0 })(n, e = "object" == typeof arguments[1] ? arguments[1].toString() : arguments[1]) && (n.interception = { uuid: N.uuid(), requestHeaders: [], method: arguments[0], url: e, async: arguments[2] }, n.addEventListener("load", u, !1), n.addEventListener("error", c, !1), n.addEventListener("loadstart", s, !1), n.addEventListener("loadend", m, !1), f.emit("ajax:open", new le(n, N.currentTimestamp())), l && N.trace("AJAX open intercepted", n)) } catch (n) { N.log("Exception occurred when intercepting ajax 'open' for url: " + e + " Error: " + n.message, n) } t.apply(this, arguments) }, n.XMLHttpRequest.prototype.send = function () { if (this.interception) try { var n = arguments[0], e = new le(this, N.currentTimestamp()); 0 < arguments.length && (this.interception.requestContent = n, e.data = n), f.emit("ajax:send", e), l && N.trace("AJAX send intercepted", this) } catch (n) { N.log("Exception occurred when intercepting ajax 'send'. Error: " + n.message, n) } r.apply(this, arguments) }, n.XMLHttpRequest.prototype.setRequestHeader = function () { var n = this; if (n.interception) try { n.interception && n.interception.requestHeaders && n.interception.requestHeaders.push(arguments[0] + ": " + arguments[1]), l && N.trace("AJAX 'setRequestHeader' intercepted", n) } catch (n) { N.log("Exception occurred when intercepting ajax 'setRequestHeader'. Error: " + n.message, n) } e.apply(this, arguments) }) : N.log("WARNING: cannot intercept ajax, XMLHttpRequest prototype was altered (other, earlier loaded, 3rd party js?).") } this.initialize = function () { try { fe.cfgBackwardComp(o) && N.log("Warning: using deprecated ajax configuration modifiers."); var n = new se(e); o.ajaxRecordMetadata && (r = n.create(o.ajaxRecordMetadata)), o.ajaxRecordResponseHeaders && (d = n.create(o.ajaxRecordResponseHeaders)), o.ajaxRecordResponseBody && (v = n.create(o.ajaxRecordResponseBody)), o.ajaxRecordRequestHeaders && (h = n.create(o.ajaxRecordRequestHeaders)), o.ajaxRecordRequestBody && (p = n.create(o.ajaxRecordRequestBody)) } catch (n) { return N.log("Error while parsing Ajax predicates from configuration. interception disabled. error:" + n), !1 } return fe.supportAjaxOnProgressEvents() ? (f.on("init:preloaded", g), N.log("Intercepting AJAX calls."), !0) : (N.log("Ajax interception not supported."), !1) } } function le(n, e, t, r, i, o, a, u) { try { if (!n.interception) return void (debugMode && N.trace("AjaxCall - missing cls xhr interception data for url: " + (n.responseURL || ""))); this.xhr = n, this.startedAt = e, this.endedAt = t, this.interception = n.interception, this.url = fe.safeEncodeURI(n.interception.url), this.method = n.interception.method, this.requestHeaders = r || null, this.requestContent = "string" == typeof i ? i : null, this.responseHeaders = o, this.responseContent = a, this.responseCompressed = u } catch (n) { console.log("Error in AjaxCall construction: " + n) } } function de(r, i, o, a) { o = o || "", a = a || []; var u = i.get(de.READY_COOKIE) ? de.STATE.READY : r.get(de.CORS_READY_KEY) ? de.STATE.READY : de.STATE.INIT, c = 0, s = [], f = function (n) { n ? (u = de.STATE.READY, r.set(de.CORS_READY_KEY, !0)) : 3 == ++c && (u = de.STATE.GAVE_UP); var e = s; s = []; for (var t = 0; t < e.length; t++)e[t](n) }, l = function (n, e) { var t, r; for (t = 0; t < n.length; t++)(r = i.get(n[t])) && e.push(n[t] + "=" + encodeURIComponent(r)) }; this.help = function (n, e) { if (u === de.STATE.READY) return e(!0); if (u === de.STATE.GAVE_UP) return e(!1); var t = []; if (l(de.CORS_COOKIES, t), l(a, t), s.push(e), 0 < t.length) { if (u === de.STATE.HELPING) return; u = de.STATE.HELPING; var r = o + "?" + t.join("&"), i = n(); i.onreadystatechange = function () { 4 === i.readyState && (200 === i.status ? f(!0) : (N.log("failed to execute CORS support request. statusCode:" + i.status), f(!1))) }, i.open("GET", r, !0), i.withCredentials = !0, i.send() } else N.log("ERROR: could not retain cls cookies (was the TLD configured and detected correctly?)"), f(!1) }, this.reset = function () { i.set(de.READY_COOKIE, ""), u = de.STATE.INIT, c = 0 } } function ve(t, a) { this.config = { maxReportSize: -1, maxReports: -1 }, this.gainLockToReport = function () { return !0 }, this.freeLock = function () { }, this.flushEvents = function (n, e) { try { t[ve.KEY_NAME] = function (n, e, t, r) { var i, o; if ("object" == typeof e) i = N.Base64.bytesToBase64(e), o = ve.ENCODING_BASE64; else { if ("string" != typeof e) throw "cannot report to storage: unsupported input type: " + typeof e; i = e, o = "plain" } return (n = n ? JSON.parse(n) : []).push({ ts: t, pid: a, sn: r, encoding: o, e: i }), N.arrayToJsonSafe(n) }(t[ve.KEY_NAME], n, N.currentTimestamp(), e) } catch (n) { N.log("error: could not flush client events into storage. " + n.message), delete t[ve.KEY_NAME] } } } function he(n, s) { function e(n, e, t, r) { var i, o, a = [], u = []; if (t) for (i = 0; i < t.length; i++)u.push(t[i]); if (n) for (i = 0; i < n.length; i++)1 === (a = (o = CSS.escape(n[i])).split("\\*")).length ? u.push("#" + o) : 2 === a.length ? u.push(he.prepareWildCardSelector(a, "id")) : s.printErrorMsg("more than one wildcard in id list"); if (e) for (i = 0; i < e.length; i++)1 === (a = (o = CSS.escape(e[i])).split("\\*")).length ? u.push("." + o) : 2 === a.length ? u.push(he.prepareWildCardSelector(a, "class")) : s.printErrorMsg("more than one wildcard in class list"); if (0 === u.length) return null; if (r) return u.map(function (n) { var e = n.split("]["); return 2 === e.length ? ":not(" + e[0] + "]):not([" + e[1] + ")" : ":not(" + n + ")" }).join(""); var c = u.join(","); return s.validateSelector(c) ? c : null } n = n || {}, this._maskedAttributes = N.immutableSet.apply(null, n.domMaskedAttributes), this._maskedAttributesTags = N.immutableSet.apply(null, (n.domMaskAttributesTags || []).map(function (n) { return n.toUpperCase() })), this._selectorsByMaskingType = {}, this._selectorsByMaskingType[on.TEXT.name] = e(n.domMaskIds, n.domMaskClasses, n.domMaskSimpleSelector), this._selectorsByMaskingType[on.OMIT.name] = e(n.domOmitIds, n.domOmitClasses), this._selectorsByMaskingType[on.VALUE_ATTRIBUTE.name] = "input" + e(n.valueMaskIds, ["cls_mask"].concat(n.valueMaskClasses || []), !1, O.ValueMaskingMode.WhiteList === n.valueMaskingMode), this._selectorsByMaskingType[on.ATTRIBUTE.name] = function (n, e) { if (0 === n.length || 0 === e.length) return null; var t, r, i = []; for (t = 0; t < e.length; t++)for (r = 0; r < n.length; r++)i.push(e[t] + "[" + n[r] + "]"); return i.join(",") }(n.domMaskedAttributes || [], n.domMaskAttributesTags || []) } function pe(n) { this._cookieMaskSet = n && n.cookieMask ? N.immutableSet.apply(null, n.cookieMask) : null } function me(i, n, e, t, o, r, a) { a = a || {}; var u, c, s, f, l = (u = t.getAttribute("id"), c = N.toAbsoluteUrl(t.getAttribute("src")), function (n) { var e = n.createElement("script"); return e.setAttribute("type", "text/javascript"), u && e.setAttribute("id", u), e.setAttribute("src", c), e.setAttribute("data-clsautoinjected", "true"), e }), d = (s = e, function () { var n = N.shallowExtend({}, s); return n.reportToStorageAfterUnload = !0, n.iframesParentOrigin = i.location.origin || N.extractOrigin(i.location.href), n }); function v(e) { try { return !(r = e, a.skipHidden && gn.hidden(r) || mn.isCrossOriginFrame(r, i.location.origin) && !function (n) { try { return n.contentWindow.location.href, !0 } catch (n) { return !1 } }(!1) || !r.contentDocument.body.hasChildNodes() || "about:blank" === r.src || "complete" !== r.contentDocument.readyState || ((t = (n = e).contentWindow)[o] ? (mn.logDebug("detector injection skipped: frame is already detector enabled."), 1) : (t._cls_config = d(), t.document.head.appendChild(l(t.document)), n._gbInjected = !0, f && setTimeout(f.bind(null, n, !0), 0), 0))) } catch (n) { return mn.logDebug("failed injecting frame window. error:" + n), f && f(e, !1), !1 } var n, t, r } function h(n) { v(n.target) ? mn.logDebug("loaded frame was auto injected. src:" + n.target.src) : mn.logDebug("loaded frame auto injected was skipped (CORS?). src:" + n.target.src) } function p(n) { n.target._gbInjected = !1 } a.skipHidden && n.on("domMutation", function (n) { !n.actualTarget._gbInjected && "IFRAME" === n.actualTarget.tagName && "attributes" === n.type && "style" === n.attributeName && v(n.actualTarget) && mn.logDebug("dom mutated loaded iframe was injected.") }), this.inject = function (n) { try { return function (n) { if (!n._gbWired) { var e = r(n); n.addEventListener("load", h), n.addEventListener("unload", p), n._gbWired = !0, mn.logDebug("frame was wired. containerId:" + e + " src:" + n.src) } }(n), v(n) } catch (n) { mn.logDebug("error during iframe auto-injection (is cross origin frame?). error:" + n) } return !1 }, this.setInjectionCallback = function (n) { f = n } } function ge(n) { var r = {}; function e(e) { var n = e.data.message, t = r[n]; if (t) { e.stopImmediatePropagation(); try { t(e.source, e.data.value, e.origin) } catch (n) { mn.logDebug("message (origin:" + e.origin + ") handler raised an error.", n) } } } n.addEventListener("message", e), this.onMessage = function (n, e) { r[n] = e }, this.revoke = function () { n.removeEventListener("message", e) } } function ye(n, o) { o = o || "*"; var a = N.immutableSet("javascript:", "data:"); this.send = function (n, e, t, r) { var i; r = (i = r) && !a[i] ? r : o, n.postMessage({ message: e, value: t }, r) } } function Ee(o, r, n, a, u) { u = N.optionsWithDefaults(u, { handshakePredicatingAttribute: "gb_cid", mscThrottle: 300 }); var i = !1, c = {}; function s(n, e, t) { n && o !== n && r.send(n, "frame:notification", e, t) } function f(n, e) { if (e.propagate) { var t, r = o.document.getElementsByTagName("iframe"); for (t = 0; t < r.length; t++)n !== r[t].contentWindow && r[t].hasAttribute(u.handshakePredicatingAttribute) && s(r[t].contentWindow, { type: e.type, propagate: !0 }) } e.bubble && i && s(o.parent, { type: e.type, bubble: !0, propagate: !0 }) } n.onMessage("frame:notification", function (n, e) { var t, r, i; mn.logDebug("received notification, type:", e.type), t = e.type, r = N.currentTimestamp(), (i = c[t]) && r - i < u.mscThrottle || (c[t] = r, 0) ? mn.logDebug("iframe notification dispatching aborted (throttled) . type:" + e.type + " href:" + o.location.href) : (a[e.type] && a[e.type](), f(n, e)) }), this.onParentHandshake = function () { i = !0 }, this.notify = function (n, e, t) { s(n, { type: e }, t) }, this.notifyAll = function (n) { f(D, { type: n, propagate: !0, bubble: !0 }) } } function we(n, e, t) { this.unload = function () { e().sendStoragePendingReports() }, this.domTrackingStarted = function () { n().ensureStarted() }, this.pageUpdate = function () { t() } } function be(t, i) { function o(n) { i.emit("frame:detected", n) } function r(n) { if ("childList" === n.type) { var e, t = []; for (e = 0; e < n.addedNodes.length; e++)"IFRAME" === n.addedNodes[e].tagName ? t.push(n.addedNodes[e]) : "function" == typeof n.addedNodes[e].getElementsByTagName && Array.prototype.push.apply(t, n.addedNodes[e].getElementsByTagName("iframe")); for (e = 0; e < t.length; e++)o(t[e]); t.length && N.log(t.length + " iframes were detected during DOM update.") } else "attributes" === n.type && "IFRAME" === n.actualTarget.tagName && ("IFRAME" === n.actualTarget.tagName || "function" == typeof n.actualTarget.getElementsByTagName && 0 < n.actualTarget.getElementsByTagName("iframe").length) && (r = n.actualTarget, i.emit("frame:domChange", r)); var r } this.start = function () { var n, e = t.getElementsByTagName("iframe"); for (n = 0; n < e.length; n++)o(e[n]); N.log(e.length + " iframes were detected during document's initial scan."), i.on("domMutation", r) } } function Ce(u, c, s, n, f, r) { var o, l, a; r = r || { containerIdAttribute: "gb_cid", mscTimeout: r.mscTimeout || 2e3 }, this.perform = function (n, e, t) { mn.logDebug("performing handshake with parent frame. target:"), o = e, s.send(n, "child:hello", { pageId: c.id }), -1 !== r.mscTimeout && (a = setTimeout(t, r.mscTimeout)) }, this.setParentCallback = function (n) { l = n }, n.onMessage("child:hello", function (n, e, t) { mn.logDebug("CHILD hello received"); var r, i, o = u.getElementsByTagName("iframe"); for (r = 0; r < o.length; r++)if (n === o[r].contentWindow) { i = o[r]; break } if (!i) return mn.logDebug("could not complete iframe handshake: child frame could not be found. pageId:" + e.pageId + " origin:" + t), void (l && l()); var a = f(i); l && l(a, e.pageId), s.send(i.contentWindow, "parent:hello", { containerId: a, parentPageId: c.id }, t) }), n.onMessage("parent:hello", function (n, e, t) { a && clearTimeout(a); var r = e.containerId, i = e.parentPageId; mn.logDebug("PARENT hello received, containerId:", r, "parentPageId:", i), o && o(i, r, t), o = D }) } function xe(r, t, n, e, i, o, a, u) { u = u || {}; var c, s, f = { detected: 0, injected: 0, injectionFailed: 0, handshakesWithChildren: { success: 0, error: 0 }, handshakeWithParent: { startedAt: -1, completedAt: -1, timeout: !1 } }, l = r.top !== r; function d() { s && i.notifyAll("pageUpdate") } function v(n, e, t) { c = { pageId: n, containerId: e, origin: t }, f.handshakeWithParent.completedAt = N.currentTimestamp(), f.handshakeWithParent.info = c, i.onParentHandshake(), a(n, e), N.log("handshake completed. containerId:" + e + " parentId:" + n + " path:" + r.location.pathname) } function h() { N.log("iframes handshake failure: timeout while waiting for PARENT hello."), f.handshakeWithParent.timeout = !0, a() } function p(n) { c && i.notify(r.parent, n, c.origin) } e && e.setInjectionCallback(function (n, e) { e ? f.injected++ : f.injectionFailed++ }), o.setParentCallback(function (n, e) { f.handshakesWithChildren.success += n ? 1 : 0, f.handshakesWithChildren.error += n ? 0 : 1, s && (mn.logDebug("child frame handshake started - emitting pageUpdate event"), t.emit("pageUpdate")) }), this.initialize = function () { l || a() }, this.stats = function () { return f }, t.on("saveEvent", function (n) { s && "pageUpdate" !== n.type && -1 !== O.snapshotApplicableEventType.indexOf(n.type) && d() }), t.on("frame:detected", function (n) { u.autoInject && e && e.inject(n) && mn.logDebug("auto injection was applied on newly detected iframe"), f.detected++ }), t.on("frame:domChange", d), t.on("init:loaded", function () { n.start(), l && (f.handshakeWithParent.startedAt = N.currentTimestamp(), o.perform(r.parent, v, h)) }), t.on("domTrackingStarted", function () { mn.logDebug("DOM tracking started (page snapshot taken)"), s = !0, p("domTrackingStarted") }), u.storageOnUnload && t.on("event:unload", p.bind(null, "unload")) } function Se(i, o, a, u) { u = u && new RegExp(u); var c = function (n) { var e, t = [], r = n.getElementsByTagName("script"); for (e = 0; e < r.length; e++)u.exec(r[e].innerText) || t.push(r[e]); return t }; this.sanitize = function (n) { var e, t, r = []; if (i && Array.prototype.push.apply(r, function (n) { var e = []; if (n.ownerDocument) for (var t, r = n.ownerDocument.createNodeIterator(n, NodeFilter.SHOW_COMMENT, null, !0); t = r.nextNode();)e.push(t); return e }(n)), o && "function" == typeof n.getElementsByTagName) for (e = 0; e < o.length; e++)u && "script" === o[e] ? Array.prototype.push.apply(r, c(n)) : Array.prototype.push.apply(r, n.getElementsByTagName(o[e])); if (a && "function" == typeof n.querySelector) for (t in a) for (e = 0; e < a[t].length; e++)n.querySelector(t + "#" + a[t][e]) && r.push(n.querySelector(t + "#" + a[t][e])); !function (n) { var e; for (e = 0; e < n.length; e++)n[e].parentNode.removeChild(n[e]) }(r), N.log("sanitation of DOM element completed. removedNodes:" + r.length) } } function Ae(n) { return n instanceof Comment || (!("IFRAME" !== n.tagName || !n.parentNode || "HEAD" !== n.parentNode.tagName) || Ae.IGNORABLE_TAGS.hasOwnProperty(n.nodeName)) } function Re(n, r) { if (n.WebSocket) { var i = n.WebSocket, e = function (n, e) { var t = e ? new i(n, e) : new i(n); try { t.addEventListener("message", r) } catch (n) { N.log("failed intercepting WebSocket constructor: " + n.message, n) } return t }; (e.prototype = i.prototype).constructor = i, e.CONNECTING = 0, e.OPEN = 1, e.CLOSING = 2, e.CLOSED = 3, n.WebSocket = e } else N.log("WebSocket interface is not supported by the browser.") } function Te(r, i) { var n, t = (n = 0, function () { return ++n }), o = function (n) { var e = n[Te.GB_ID_ATTRIBUTE_NAME]; return e || (e = t(), n[Te.GB_ID_ATTRIBUTE_NAME] = e, i && "function" == typeof n.setAttribute && n.setAttribute(Te.GB_ID_ATTRIBUTE_NAME, e)), e }; this.usingGlassboxIds = i, this.idOf = function (n, e) { return e ? n[Te.GB_ID_ATTRIBUTE_NAME] : o(n) }, this.selectorFor = function (n, e) { return i ? (t = o(n), "[" + Te.GB_ID_ATTRIBUTE_NAME + "='" + t + "']") : r(n, e); var t }, this.introduceDocument = function (n) { if (i && !n._gb_scanned) { for (var e, t = n.createNodeIterator(n.documentElement, NodeFilter.SHOW_ELEMENT, null, !0); e = t.nextNode();)o(e); n._gb_scanned = !0 } } } function Ie(t, r, i, o) { var n, e = !1, a = null; "undefined" != typeof MutationObserver ? a = MutationObserver : "undefined" != typeof WebKitMutationObserver && (a = WebKitMutationObserver); var u = function (n) { for (var e = 0; e < n.length; e++)if (!o(n.item(e))) return !1; return !0 }, c = function (n) { var e = n.target; if ("attributes" === n.type) { if (n.attributeName === Te.GB_ID_ATTRIBUTE_NAME) return } else "characterData" === n.type && e instanceof CharacterData && (e = e.parentNode || e); if (!o(e)) { if ("childList" === n.type) { for (var t = 0; t < n.removedNodes.length; t++)delete n.removedNodes.item(t)[Te.GB_ID_ATTRIBUTE_NAME]; if (u(n.addedNodes) && u(n.removedNodes)) return } n.actualTarget = e, r.emit("domMutation", n) } }, s = { attributes: !0, childList: !0, characterData: !0, subtree: !0, attributeOldValue: !1, characterDataOldValue: !1 }; this.getName = function () { return "MutationObserver based" }, this.supported = function () { return null !== a }, this.start = function () { if (!e) { if (!n) { if (!a) throw new Error("cannot start DomObserver: native interface not supported by the browser."); n = new a(function (n) { n.forEach(c) }) } n.observe(i, s), e = !0 } }, this.isActive = function () { return e }, this.n = function () { if (a && t.navigator.userAgent.match(/Trident\/(\d+)/)) { var n = new a(function (n) { }); n.observe(i, { childList: !0, subtree: !0 }); var e = (new DOMParser).parseFromString("<?xml version='1.0' encoding='UTF-8'?><test><![CDATA[-5153879911146088898:4982669000430465522]]></test>", "text/xml"); return n.disconnect(), 1 < e.firstChild.childNodes.length } return !1 } } function Me(u, e, c) { var t = !1, r = function (n) { var e, t, r, i = [], o = [], a = n.type; if ("DOMNodeInserted" === n.type) e = "childList", (t = n.target.parentNode) && i.push(n.target); else if ("DOMNodeRemoved" === n.type) delete n.target[Te.GB_ID_ATTRIBUTE_NAME], e = "childList", (t = n.target.parentNode) && o.push(n.target); else if ("DOMCharacterDataModified" === n.type) e = "characterData", t = n.target; else { if ("DOMAttrModified" !== n.type) return; if (n.attrName === Te.GB_ID_ATTRIBUTE_NAME) return; e = "attributes", t = n.target, r = n.attrName } c(t) || t && u.emit("domMutation", { origType: a, type: e, actualTarget: t, attributeName: r, addedNodes: i, removedNodes: o }) }; this.getName = function () { return "DOM events based" }, this.supported = function () { return "undefined" != typeof MutationEvent }, this.start = function () { var n; t || ((n = e).addEventListener("DOMNodeInserted", function (n) { r(n) }, !1), n.addEventListener("DOMCharacterDataModified", function (n) { r(n) }, !1), n.addEventListener("DOMNodeRemoved", function (n) { r(n) }, !1), n.addEventListener("DOMAttrModified", function (n) { r(n) }, !1), t = !0) }, this.isActive = function () { return t } } function ke(e, t) { var r; t.on("init:loaded", function () { r = e.title }), t.on("domMutation", function () { var n; n = !r || r === e.title, r = e.title, n || setTimeout(function () { t.emit("titleChanged") }, 0) }) } function De(l, d, u, v, h, p, m, g) { g = N.optionsWithDefaults(g, De.DefaultOptions); var y = function (n, e, t) { var r, i, o, a = n.getElementsByTagName(e); for (r = 0; r < a.length; r++)for (o = a[r], i = 0; i < t.length; i++)De.AttributeUpdaters[t[i]](o, u) }; this.take = function (n) { if (null === l.body) return D; var e, t, r, i = N.currentTimestamp(); try { var o = d.cloneNode(l.documentElement), a = o.querySelector("head"), u = o.querySelector("body"); p && a && p.sanitize(a), m && u && m.sanitize(u), y(o, "input", ["value", "checked"]), y(o, "select", ["selectedIndex"]), g.addHeader && (e = o, t = n, r = De.CLS_HEADER_PREFIX + "[createdAt:" + N.currentTimestamp() + " seq:" + t + "] ", e.head.insertBefore(e.createComment(r), e.head.childNodes[0])), v && v.domMaskNode(o, on.OMIT, on.TEXT, on.VALUE_ATTRIBUTE, on.ATTRIBUTE), g.domRecordCssRules && function (n, e) { for (var t, r, i, o = e.getElementsByTagName("style"), a = n.getElementsByTagName("style"), u = 0; u < o.length; u++)if (i = o[u].textContent || "", o[u].sheet.gb_css_rules) a[u].textContent = i + o[u].sheet.gb_css_rules; else if (!i) { t = o[u].sheet.cssRules, r = ""; for (var c = 0; c < t.length; c++)"string" == typeof t[c].cssText && (r += t[c].cssText); a[u] && (a[u].textContent = r) } }(o, l); var c = De.HTML_SCHEMA_PREFIX + o.outerHTML, s = h ? h.maskCookie(l.cookie) : l.cookie; return new Oe(c, l.referrer, n, s, l.characterSet) } catch (n) { return N.log("could not obtain page snapshot. error: " + n), this.lastError = n, D } finally { var f = N.currentTimestamp(); N.log("full page snapshot capturing took:" + (f - i) + "msc") } } } function Oe(n, e, t, r, i) { this.html = n, this.referrer = e, this.seq = t, this.charset = i, this.cookie = r } function _e(f, l) { var d = N.immutableSet("checkbox", "radio"), v = { INPUT: "inputs", SELECT: "selects", TEXTAREA: "textareas" }, n = function (n, e) { var t, r, i, o; if (!function (n) { if (!l || void 0 === l.ignoredFormElement) return !1; var e = N.getElementId(n); return !!e && _.contains(l.ignoredFormElement, e) }(n.element) && (n.properties && 0 < n.properties.length)) { var a, u, c = v[n.element.tagName], s = {}; if (c) { for (a = 0; a < n.properties.length; a++)i = n.element, o = n.properties[a], s[u = "SELECT" === i.tagName ? "selectedIndex" : "INPUT" === i.tagName && d[i.getAttribute("type") || ""] ? "checked" : o] = (t = n.element, r = u, f && "value" === r ? f.censor(t) : t[r]); N.ensureProperty(e, c)[n.selector()] = s } } }; return { all: function () { return [n] } } } function Ne(c, s) { c = c || {}, s = s || []; var f = 0; function l(n, e, t) { if (e.removed) return !1; var r; for (r = 0; r < n.length; r++)n[r](e, t); return !0 } this.getSnapshot = function () { var n, e, t, r, i, o, a = { timestamp: f++, propertiesMode: "modifiedOnly", selectors: c.usingGlassboxIds ? "gb" : "native", hashedTokens: !!c.usingHashedTokens }, u = 0; for (n = 0; n < s.length; n++) { for (e in o = 0, t = (i = s[n]).tracker.track()) r = t[e], l(i.providers, r, a) && o++; u += o, N.log(o + " change entries of type " + i.name + " were processed and assigned to DOM update.") } return 0 === u && (a = D), a }, this.start = function () { var n; for (n = 0; n < s.length; n++)s[n].tracker.start(); N.log("dom mutation accumulation started.") } } function Le(n, e) { this.element = n, this.nodeCache = e, this._useId = !0, this._resolvedSelector = D } function Ue(n, a) { var u = {}, c = 0; function r(n) { var e, t, r = 0; if ("function" == typeof n.element.contains) for (e in u) u[e].removed || (t = u[e].element) !== n.element && n.element.contains(t) && (u[e].removed = !0, r++); return r } function i(n) { for (var e, t, r = n.element.parentNode; r;) { if (t = u[a.idOf(r, !0)]) for (e = 0; e < t.length; e++)if (void 0 !== t[e].childListOrdinal) return n.removed = !0, t[e] = n.childListOrdinal, 1; r = r.parentNode } return 0 } function e(n) { var e, t, r, i = c++, o = (e = n.actualTarget, t = a.idOf(e), (r = u[t]) || (r = new Le(e, a), u[t] = r), r); "characterData" === n.type ? o.characterDataChild = n.target : "childList" === n.type ? (o.childListOrdinal = i, o.characterDataChild = D) : "attributes" === n.type && (o.attributes || (o.attributes = {}), o.attributes[n.attributeName] = i, "id" === n.attributeName && o.invalidateId()) } this.start = function () { n.on("domMutation", e), N.log("DOM mutation tracking started.") }, this.track = function () { var n = u, e = function () { var n, e, t = 0; for (n in u) (e = u[n]).removed || (N.isAttachedToDOM(e.element) ? void 0 !== e.childListOrdinal && (t += i(e), t += e.removed ? 0 : r(e)) : (t++ , e.removed = !0)); return t }(); return N.log("DOM changes log was compacted by " + e + " entries."), c = 0, u = {}, n } } function Pe(u, c, s) { var f = !0, l = {}; s = N.immutableSet.apply(null, s || []); var d = function (n, e, t) { var r = Pe.propertyForElement(n); if (r) { var i = (l[e] || {})[r], o = n[r]; (f ? o !== Pe.defaultValue(n, r) : i !== o) && (t[e] || (t[e] = new Le(n, c), t[e].properties = []), t[e].properties.push(r)); var a = {}; a[r] = o, l[e] = a } }; this.start = function () { N.log("DOM elements properties tracking started.") }, this.track = function () { var n, e, t, r, i = {}, o = {}, a = u.querySelectorAll("input,select,textarea"); for (n = 0; n < a.length; n++)(t = a[n]).id && s[t.id] || "hidden" === t.getAttribute("type") || (e = c.idOf(a[n]), d(a[n], e, i), o[e] = !0); for (r in l) o[r] || delete l[r]; return f = !1, i } } function Fe(n, r) { var e, i, t, o, a = [], u = {}; e = n.CSSStyleSheet.prototype, i = e.insertRule, e.insertRule = function () { var n = i.apply(this, arguments); try { var e = arguments[0]; this.gb_css_rules ? this.gb_css_rules += e : this.gb_css_rules = e; var t = r.idOf(this.ownerNode); u[t] || (u[t] = new Le(this.ownerNode, r)), a.push({ selector: t, type: "added", rule: e, index: n }) } catch (n) { N.log("Exception occurred during CSS insertRule interception. Error: " + n.message, n) } return n }, N.log("CSS rule insertion tracking started."), t = n.CSSStyleSheet.prototype, o = t.deleteRule, t.deleteRule = function () { try { var n = arguments[0]; if (this.cssRules[n] !== D) { var e = r.idOf(this.ownerNode); u[e] || (u[e] = new Le(this.ownerNode, r)), a.push({ selector: e, type: "deleted", index: n }) } } catch (n) { N.log("Exception occurred during CSS deleteRule interception. Error: " + n.message, n) } return o.apply(this, arguments) }, N.log("CSS rule deletion tracking started."), this.start = function () { }, this.track = function () { !function () { for (var n, e, t = 0; t < a.length; t++)n = a[t].selector, e = u[n].selector(), a[t].selector = e }(); var n = {}; return a.length && (n.cssRules = { rules: a }), a = [], u = {}, n } } function je(r) { var i = {}, o = 0; function a(n, e) { return "__gbh_" + n + (e ? "_" + e : "") } function t(n) { var e, t = (e = n, N.encodeAsBase(N.hashcode(e), 36)); return i[t] ? a(t) : (r <= o && (i = {}, o = 0), i[t] = !0, o++ , a(t, n)) } return function (n) { var e = N.DOMElement2Str(n); return 10 < e.length ? t(e) : e } } function Be(e) { this.encode = function (n) { return n.constructor === Array ? e.encode(N.arrayToJsonSafe(n)) : e.encode(JSON.stringify(n)) }, this.decode = function (n) { return JSON.parse(e.decode(n)) } } function He(e, t, r) { var i = { url: e }; try { var o = new XMLHttpRequest; return !!o && (o.onreadystatechange = function () { if (4 === o.readyState) if (200 === o.status) { var n = o.getResponseHeader("Content-Type"); i.type = n, i.content = N.pako.gzip(o.response), t(i) } else 0 === o.status ? r(i.url) : (N.log("Failed getting resource data by Ajax for url : " + e + " status:" + o.status + "  " + o.statusText), i.error = "status: " + o.statusText + " (" + o.status + ")", t(i)) }, o.cls_own = !0, o.open("GET", e, !0), o.responseType = "arraybuffer", o.send(), !0) } catch (n) { return console.log("Failed getting resource data by Ajax for url: " + e + ": " + n.message, n), !1 } } function qe(u, c, t, e, s, f, l, r) { var n, d; function v() { var n, e = c.get("res.pending"); if (c.remove("res.pending"), e) try { n = s.decode(e) } catch (n) { N.log("Failed parsing JSON for pending resources: " + n.message, n) } return n } function i(n) { r.countRecorded++ , e.emit("saveResourceEvent", n) } function o(n) { r.countCorsDenied++ , e.emit("saveCorsDeniedEvent", n) } (n = r || {}).countRecorded = 0, n.countCorsDenied = 0, n.recordingAll = !!c.get("res.all"), r = n, d = l.resourceRecordCssOnly ? N.immutableSet("link", "css") : N.immutableSet("link", "css", "font", "img", "input"), this.fetchResources = function () { var n = v(); if (n) for (var e = 0; e < n.length; e++)if (!t(n[e], i, o)) { N.log("Failed executing an XHR request for fetching a resource. Breaking the fetch loop."); break } }, this.electResources = function () { var n, e = l.electAmount, t = l.maxPendingResources; if (c.get("res.all") && (n = !0, e = Number.MAX_VALUE, t = Number.MAX_VALUE), n = n || Math.random() < l.electProbability) { var r = u.performance.getEntriesByType("resource"); r = function (n) { for (var e = [], t = 0; t < n.length; t++) { var r = n[t]; f(r.name) || d[n[t].initiatorType] && e.push(r) } return e }(r); for (var i, o = v() || [], a = 0; a < e && 0 < r.length && !(o.length >= t); a++)i = Math.floor(Math.random() * r.length), o.push(r[i].name), r.splice(i, 1); c.set("res.pending", s.encode(o)) } }, this.recordAllResources = function () { c.set("res.all", "true") }, this.stopRecordAllResources = function () { c.remove("res.all") } } function Ve(f, t, r) { function l(n, e, t) { for (var r = {}, i = 0; i < e.length; i++)n[e[i]] !== D && (r[e[i]] = n[e[i]]); return r } function i(n, e, t, r, i) { var o, a, u = [], c = f.performance.getEntriesByType(e); if (u = r && i ? c.filter(function (n) { return i[n[r]] !== D }) : c, "resource" === e) { var s = function () { for (var n = {}, e = f.document.getElementsByTagName("script"), t = 0; t < e.length; t++)e[t].src && (n[e[t].src] = e[t].async ? 1 : 0); return n }(); for (o = 0; o < u.length; o++)"script" === (a = u[o]).initiatorType && (a.async = s[a.name] ? 1 : 0) } for (n[e] = [], o = 0; o < u.length; o++)n[e].push(l(u[o], t)) } this.reportMeasurements = function () { for (var n = {}, e = 0; e < r.length; e++)i(n, r[e].type, r[e].properties, r[e].filterBy, r[e].validFilterValues); t.emit("waterfall", n) } } function ze(n, r, i, o) { var e = ["INPUT", "SELECT", "TEXTAREA"], a = e.join(), u = N.immutableSet.apply(N, e); function c(n, e) { for (var t, r = [], i = "." + e, o = n.querySelectorAll(i), a = 0; a < o.length; a++)"hidden" !== (t = o[a].getAttribute("type")) && "button" !== t && r.push(o[a]); return r } function s(n, e) { for (var t, r = 0, i = []; r < n.length;)if (n[r + 1] && u[n[r].tagName] && f(n[r])) (t = d(n[r + 1])) && i.push({ elem: n[r], msg: l(t) }), r += 2; else if (n[r + 1] && u[n[r + 1].tagName] && f(n[r + 1])) (t = d(n[r])) && i.push({ elem: n[r + 1], msg: l(t) }), r += 2; else { if (t = l(d(n[r]))) { var o = n[r].querySelector(a) || n[r].parentElement.querySelector(a); (o && f(o) || !o) && i.push({ elem: o || e, msg: t }) } r++ } return i } function f(n) { return n.gb_lastInputVal === D || n.gb_lastInputVal !== n.value ? (n.gb_lastInputVal = n.value, !0) : (n.gb_lastInputVal = n.value, !1) } function l(n) { var e = n.split("."); return (2 < e.length ? e[0] + "." + e[1] + "." : n).substring(0, 200) } function d(n) { var e; if (!n.childNodes.length) return ""; for (var t = n.childNodes.length - 1; 0 <= t; t--)if (e = (e = n.childNodes[t].textContent).trim()) return e; return n.textContent.trim() } function v(n) { for (var e, t = 0; t < n.length; t++)e = i.getSelectorExpression(n[t].elem) || O.encoding.rootSelector, r.emit("formValidationError", { element: n[t].elem, message: n[t].msg, selector: e }) } this.intercept = function (n) { var e; try { if (e = function (n) { for (; n;) { if ("FORM" === n.tagName) return n; n = n.parentElement } return null }(n)) for (var t = 0; t < o.domFormValidationClassErrors.length; t++)v(s(c(e, o.domFormValidationClassErrors[t]), e)) } catch (n) { N.log("exception occurred during form validation interception. Error: " + n.message, n) } } } function Xe(s, f) { this.showErrorsLRU = new Jn(20), this.intercept = function () { N.log("Intercepting jQuery Validator errors."); var c = jQuery.validator.prototype.showErrors; jQuery.validator.prototype.showErrors = function (n) { try { if (this.errorList && 0 < this.errorList.length) for (var e = 0; e < this.errorList.length; e++) { var t = this.errorList[e].element, r = this.errorList[e].message, i = "SAME - NOT REPORTING", o = f.getSelectorExpression(t) || O.encoding.rootSelector, a = this.showErrorsLRU.set(o, r); if (null === a || _.isUndefined(a)) i = "NEW"; else if (a !== r) i = "UPDATE"; else if (a === r) { var u = this.errorsFor(t); u && 0 < u.length && !_.isUndefined(u[0].innerHTML) && (u[0].innerHTML === r && jQuery(u[0]).is(":visible") || (i = "SHOW")) } "NEW" !== i && "UPDATE" !== i && "SHOW" !== i || s.emit("formValidationError", { element: t, message: 0 < r.length ? r : "NONE", selector: o }) } } catch (n) { N.log("Failed intercepting showErrors for validation error report. " + n.message, n) } c.call(this, n) } } } function We(n, e, t, r) { this._elementResolver = e, this._accessors = t, this._rule = n, this._urlRegexp = r } }("_detector", window, document, "5.6.200SP1B31");
}    
